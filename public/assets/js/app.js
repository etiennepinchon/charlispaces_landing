!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/public/assets/js/",n(n.s=32)}([function(e,t,n){var i,r,o={},a=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=i.apply(this,arguments)),r}),s=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),d=null,l=0,c=[],u=n(21);function h(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=o[i.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](i.parts[a]);for(;a<i.parts.length;a++)r.parts.push(y(i.parts[a],t))}else{var s=[];for(a=0;a<i.parts.length;a++)s.push(y(i.parts[a],t));o[i.id]={id:i.id,refs:1,parts:s}}}}function p(e,t){for(var n=[],i={},r=0;r<e.length;r++){var o=e[r],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};i[a]?i[a].parts.push(s):n.push(i[a]={id:a,parts:[s]})}return n}function f(e,t){var n=s(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=c[c.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),c.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=s(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,r)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function g(e){var t=document.createElement("style");return e.attrs.type="text/css",v(t,e.attrs),f(e,t),t}function v(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function y(e,t){var n,i,r,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var a=l++;n=d||(d=g(t)),i=x.bind(null,n,a,!1),r=x.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",v(t,e.attrs),f(e,t),t}(t),i=function(e,t,n){var i=n.css,r=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||o)&&(i=u(i));r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([i],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),r=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=g(t),i=function(e,t){var n=t.css,i=t.media;i&&e.setAttribute("media",i);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),r=function(){m(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=p(e,t);return h(n,t),function(e){for(var i=[],r=0;r<n.length;r++){var a=n[r];(s=o[a.id]).refs--,i.push(s)}e&&h(p(e,t),t);for(r=0;r<i.length;r++){var s;if(0===(s=i[r]).refs){for(var d=0;d<s.parts.length;d++)s.parts[d]();delete o[s.id]}}}};var E,b=(E=[],function(e,t){return E[e]=t,E.filter(Boolean).join("\n")});function x(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=b(t,r);else{var o=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var r=(a=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"});return[n].concat(o).concat([r]).join("\n")}var a;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<e.length;r++){var a=e[r];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!("string"==typeof e||e instanceof String))throw new TypeError("This library (validator.js) validates strings only")},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e},e.exports=t.default},function(e,t){e.exports={emit:(e,t,n)=>{e.dispatchEvent(new CustomEvent(t,{detail:n}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,i.default)(e),(t=(0,r.default)(t,d)).require_display_name||t.allow_display_name){var n=e.match(l);if(n)e=n[1];else if(t.require_display_name)return!1}var s=e.split("@"),f=s.pop(),m=s.join("@"),g=f.toLowerCase();"gmail.com"!==g&&"googlemail.com"!==g||(m=m.replace(/\./g,"").toLowerCase());if(!(0,o.default)(m,{max:64})||!(0,o.default)(f,{max:254}))return!1;if(!(0,a.default)(f,{require_tld:t.require_tld}))return!1;if('"'===m[0])return m=m.slice(1,m.length-1),t.allow_utf8_local_part?p.test(m):u.test(m);for(var v=t.allow_utf8_local_part?h:c,y=m.split("."),E=0;E<y.length;E++)if(!v.test(y[E]))return!1;return!0};var i=s(n(2)),r=s(n(3)),o=s(n(20)),a=s(n(19));function s(e){return e&&e.__esModule?e:{default:e}}var d={allow_display_name:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0},l=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\,\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\s]*<(.+)>$/i,c=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,u=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,h=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,p=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;e.exports=t.default},function(e,t,n){"use strict";n.r(t);n(31),n(30),n(29);AFRAME.registerComponent("fbx-model",{schema:{src:{type:"asset"},crossorigin:{default:""}},init:function(){this.model=null},update:function(){const e=this.data;if(!e.src)return;this.remove();const t=new THREE.FBXLoader;e.crossorigin&&t.setCrossOrigin(e.crossorigin),t.load(e.src,this.load.bind(this))},load:function(e){this.model=e,this.el.setObject3D("mesh",e),this.el.emit("model-loaded",{format:"fbx",model:e})},remove:function(){this.model&&this.el.removeObject3D("mesh")}});class i{constructor(e={duration:420}){this.animationEnded=!1,this.duration=e.duration,this.onFadeInEndBind=this.onFadeInEnd.bind(this),this.onFadeOutEndBind=this.onFadeOutEnd.bind(this),this.setUpUI()}setUpUI(){let e=document.querySelector("a-camera");if(document.querySelector(".app").classList.add("blink"),!e)throw new Error("No camera were found.");this.el=document.createElement("a-sky"),this.el.setAttribute("id","scene-camera-fade"),this.el.setAttribute("color","#000"),this.el.setAttribute("radius",.1),this.el.setAttribute("opacity",0),this.el.setAttribute("fadein",`duration: ${this.duration}`),this.el.addEventListener("animationend",this.onFadeInEndBind),e.appendChild(this.el)}end(){if(!this.animationEnded)return setTimeout(this.end.bind(this),50);this.el.removeEventListener("animationend",this.onFadeInEndBind),this.el.setAttribute("fadeout",{duration:this.duration/1.5,forceFade:!0}),this.el.addEventListener("animationend",this.onFadeOutEndBind),document.querySelector(".app").classList.remove("blink")}onFadeInEnd(){this.animationEnded=!0}onFadeOutEnd(){this.el.removeEventListener("animationend",this.onFadeOutEndBind),this.el.parentNode.removeChild(this.el),this.el=null}}var r=window.innerWidth,o=window.innerHeight;let a,s,d,l;AFRAME.registerComponent("tunnel",{schema:{},init(){this.shouldRender=!0,this.shouldRun=!1,this.startT,this.el.sceneEl.addEventListener("loaded",()=>{this.sceneEl=this.el.sceneEl,this.scene=this.el.sceneEl.object3D,setTimeout(()=>this.setUp(),0)})},tick(e){if(this.startT?e=e-this.startT+4e3:this.startT=e,!this.tubeGeometry||!this.shouldRun)return void(this.texturePlane&&(this.texturePlane.visible=!1));this.texturePlane&&(this.texturePlane.visible=!0),this.updateMaterialOffset(),this.updateCurve();let t=(Math.sin(e/1e3)+1)/2;this.ratioX=t,this.ratioY=1-t,this.renderToTexture()},remove(){this.shouldRun=!1,this.el.object3D.remove(this.tubeMesh),this.tubeMaterial.dispose(),this.tubeGeometry.dispose(),this.tubeGeometry=this.tubeMaterial=this.tubeMesh=void 0},setUp(){this.speed=8,this.mouse={position:new THREE.Vector2(.5*r,.5*o),ratio:new THREE.Vector2(0,0),target:new THREE.Vector2(.5*r,.5*o)},this.ratioX=0,this.ratioY=1;var e=new THREE.TextureLoader;e.crossOrigin="Anonymous",e.load("/assets/textures/galaxyTexture.jpg",this.createMesh.bind(this)),this.initAnimation();this.sceneEl.object3D;this.sceneEl.renderer.setClearColor(16127),(l=new THREE.Scene).fog=new THREE.Fog(16127,1,100),(d=new THREE.PerspectiveCamera(140,r/o,.1,1e3)).lookAt(new THREE.Vector3(0,0,-1)),d.position.y=1,d.position.z=-8;let t=window.devicePixelRatio,n=256*t;AFRAME.utils.device.isMobile()||(n=256*t*2),(s=new THREE.WebGLRenderTarget(n,2*n,{minFilter:THREE.LinearFilter,magFilter:THREE.NearestFilter})).texture.wrapS=THREE.ClampToEdgeWrapping,s.texture.wrapT=THREE.RepeatWrapping,s.texture.repeat.set(.5,1),s.texture.offset.x=.25;let i=new THREE.PlaneGeometry(2,4),c=new THREE.MeshBasicMaterial({color:16777215,map:s.texture}),u=this.texturePlane=new THREE.Mesh(i,c);u.position.set(0,1.1,-4.01),u.visible=!1,document.querySelector("#mainScene").object3D.add(u),(a=new THREE.WebGLRenderer({antialias:!1})).setClearColor(0),a.setPixelRatio(window.devicePixelRatio),a.setSize(n,n),a.domElement.style.zIndex=1e3,document.body.appendChild(a.domElement)},createMesh(e){var t=[],n=0,r=new THREE.Geometry;for(n=0;n<10;n+=1)t.push(new THREE.Vector3(0,0,n/4*3));t[4].y=-.06,this.curve=new THREE.CatmullRomCurve3(t),this.curve.type="catmullrom",(r=new THREE.Geometry).vertices=this.curve.getPoints(90),this.splineMesh=new THREE.Line(r,new THREE.LineBasicMaterial),this.tubeMaterial=new THREE.MeshBasicMaterial({side:THREE.BackSide,map:e}),this.tubeMaterial.map.wrapS=THREE.MirroredRepeatWrapping,this.tubeMaterial.map.wrapT=THREE.MirroredRepeatWrapping,this.tubeMaterial.map.repeat.set(this.tubeMaterial.repx,this.tubeMaterial.repy),this.tubeGeometry=new THREE.TubeGeometry(this.curve,90,.04,30,!1),this.tubeGeometry_o=this.tubeGeometry.clone(),this.tubeMesh=new THREE.Mesh(this.tubeGeometry,this.tubeMaterial),this.tubeMesh.scale.set(300,300,300),this.tubeMesh.position.set(65,8,690),this.tubeMesh.rotation.set(0,-135,45),l.add(this.tubeMesh),document.querySelector("#door").addEventListener("doorOpening",()=>{this.shouldRun=!0}),document.querySelector("#door").addEventListener("doorOpenned",()=>{l.remove(this.tubeMesh),this.el.object3D.add(this.tubeMesh),this.sceneEl.setAttribute("fog",{far:400}),this.shouldRender=!1,setTimeout(()=>{!function(e){let t=new i({duration:420});setTimeout(function(){t&&t.end(),e()},640)}(()=>{const e=document.querySelector("#comingSoon");e.setAttribute("position","0 0 0"),e.setAttribute("visible",!0);const t=this.sceneEl.querySelector("a-camera");t.setAttribute("position","0 1.6 10"),t.children[0].setAttribute("visible",!0);const n=document.createElement("a-animation");n.setAttribute("attribute","position"),n.setAttribute("to","0 1.6 -10"),n.setAttribute("dur","40000"),n.setAttribute("easing","linear"),n.setAttribute("direction","alternate"),n.setAttribute("repeat","indefinite"),this.sceneEl.querySelector("a-camera").appendChild(n),this.el.parentNode.removeChild(this.el)})},4e3)})},initAnimation(){this.textureParams={offsetX:0,offsetY:0,repeatX:10,repeatY:4},this.cameraShake={x:0,y:0};var e=new TimelineMax({repeat:-1});e.to(this.textureParams,4,{repeatX:.3,ease:Power1.easeInOut}),e.to(this.textureParams,12,{offsetX:8,ease:Power2.easeInOut},0),e.to(this.textureParams,6,{repeatX:10,ease:Power2.easeInOut},"-=5")},updateMaterialOffset(){this.tubeMaterial.map.offset.x=this.textureParams.offsetX,this.tubeMaterial.map.offset.y+=.001,this.tubeMaterial.map.repeat.set(this.textureParams.repeatX,this.textureParams.repeatY)},updateCurve(){var e=0,t=0,n=null,i=null;for(e=0;e<this.tubeGeometry.vertices.length;e+=1)n=this.tubeGeometry_o.vertices[e],i=this.tubeGeometry.vertices[e],t=Math.floor(e/30),i.x+=(n.x+this.splineMesh.geometry.vertices[t].x-i.x)/15,i.y+=(n.y+this.splineMesh.geometry.vertices[t].y-i.y)/15;this.tubeGeometry.verticesNeedUpdate=!0,this.curve.points[2].x=.6*(1-this.ratioX)-.3,this.curve.points[3].x=0,this.curve.points[4].x=.6*(1-this.ratioX)-.3,this.curve.points[2].y=.6*(1-this.ratioY)-.3,this.curve.points[3].y=0,this.curve.points[4].y=.6*(1-this.ratioY)-.3,this.splineMesh.geometry.verticesNeedUpdate=!0,this.splineMesh.geometry.vertices=this.curve.getPoints(90)},renderToTexture(){if(!this.tubeGeometry||!this.shouldRun)return;this.sceneEl.object3D;let e=this.sceneEl.renderer;e.render(l,d,s),e.setRenderTarget(null),a.render(l,d,s)}});n(28),n(27),n(26),n(25),n(24),n(23);class c{constructor(e){this.el=e,this.containerEl=null,this.confettiFrequency=3,this.confettiColors=["#fce18a","#ff726d","#b48def","#f4306d"],this.confettiAnimations=["slow","medium","fast"],this._setupElements(),this._renderConfetti()}stop(){clearInterval(this.confettiInterval),setTimeout(()=>{this.el.removeChild(this.containerEl)},3e3)}_setupElements(){const e=document.createElement("div"),t=this.el.style.position;"relative"===t&&"absolute"===t||(this.el.style.position="relative"),e.classList.add("confetti-container"),this.el.appendChild(e),this.containerEl=e}_renderConfetti(){this.confettiInterval=setInterval(()=>{const e=document.createElement("div"),t=Math.floor(3*Math.random())+7+"px",n=this.confettiColors[Math.floor(Math.random()*this.confettiColors.length)],i=Math.floor(Math.random()*this.el.offsetWidth)+"px",r=this.confettiAnimations[Math.floor(Math.random()*this.confettiAnimations.length)];e.classList.add("confetti","confetti--animation-"+r),e.style.left=i,e.style.width=t,e.style.height=t,e.style.backgroundColor=n,e.removeTimeout=setTimeout(function(){e.parentNode.removeChild(e)},3e3),this.containerEl.appendChild(e)},25)}}var u=n(5),h=n.n(u);n(18),n(16),n(14),n(12),n(10),n(8);const p="https://api.charlispaces.com";window.store=[];const f=function(e){e.classList.add("shake"),setTimeout(function(){e.classList.remove("shake")},300)};let m;document.addEventListener("contextmenu",e=>e.preventDefault()),document.addEventListener("DOMContentLoaded",function(){(m=document.querySelector("a-scene")).addEventListener("loaded",()=>{m.components.inspector.remove(),document.querySelector(".coming-soon-2d").classList.remove("hide"),new class{constructor(){AFRAME.utils.device.isMobile()||m.setAttribute("cursor",{rayOrigin:"mouse"}),this.setUpUI()}setUpUI(){this.modal=document.querySelector(".modal-container"),this.modal.querySelector(".close-button").addEventListener("click",this.closeModal.bind(this)),document.querySelector(".notify-me").addEventListener("click",e=>{e.preventDefault(),this.openModal()}),document.querySelector(".let-me-know").addEventListener("click",e=>{e.preventDefault(),this.validateEmail()})}openModal(){window.store.modalOpen=!0,this.modal.classList.remove("hide"),this.modal.querySelector(".email").focus(),setTimeout(()=>{this.modal.classList.remove("fadeIn")},10)}closeModal(){window.store.modalOpen=!1,this.modal.classList.add("closing"),this.modal.classList.add("fadeIn"),setTimeout(()=>{this.modal.classList.remove("closing"),this.modal.classList.add("hide")},600)}closeModalWithSuccess(){window.store.modalOpen=!1,this.modal.classList.add("closing"),this.modal.classList.add("fadeOut"),setTimeout(()=>{this.modal.classList.remove("closing"),this.modal.classList.add("hide"),this.modal.classList.remove("fadeOut"),this.modal.classList.add("fadeIn"),this.modal.querySelector(".email").value="",this.modal.querySelector(".wrapper").classList.remove("hide-opacity"),this.modal.querySelector(".done").classList.remove("show-opacity"),this.modal.querySelector(".done").classList.add("hide"),this.modal.querySelector(".pattern").classList.remove("show-opacity"),window.store.doorOpenned&&setTimeout(()=>{window.location.href="https://twitter.com/CharliSpaces"},120)},600)}isEmailValid(e){return!(!e||!h()(e)||e.length>120)}validateEmail(){const e=this.modal.querySelector(".email").value;if(!this.isEmailValid(e))return this.invalidEmail();this.sendEmailRequest(e)}invalidEmail(){f(this.modal.querySelector(".email"))}sendEmailRequest(){const e=this.modal.querySelector(".wrapper"),t=this.modal.querySelector(".done"),n=this.modal.querySelector(".pattern");e.classList.add("busy");const i=this.modal.querySelector(".email").value;var r=new FormData;r.append("email",i),fetch(`${p}/newsletter`,{method:"POST",body:JSON.stringify({email:i}),headers:{"content-type":"application/json"}}).then(i=>{if(e.classList.remove("busy"),200!==i.status&&201!==i.status)return this.invalidEmail();{e.classList.add("hide-opacity"),setTimeout(()=>{t.classList.remove("hide")},300),setTimeout(()=>{t.classList.add("show-opacity"),n.classList.add("show-opacity")},310),setTimeout(()=>{this.closeModalWithSuccess()},2200);const i=new c(document.body);setTimeout(()=>{i.stop()},2e3)}}).catch(this.invalidEmail.bind(this))}}})},!1)},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,".socials {\n  position: fixed;\n  pointer-events: all;\n  bottom: 14px;\n  right: 12px;\n  opacity: 0.85;\n}\n.socials li {\n  display: inline-block;\n}\n.socials a {\n  display: block;\n  width: 24px;\n  height: 24px;\n}\n.socials a.facebook {\n  background: url('/assets/icons/facebook.svg') center no-repeat;\n  background-size: 70%;\n}\n.socials a.twitter {\n  background: url('/assets/icons/twitter.svg') center no-repeat;\n  background-size: 70%;\n}\n.socials a.instagram {\n  background: url('/assets/icons/instagram.svg') center no-repeat;\n  background-size: 70%;\n}\n\nfooter .copyright {\n  position: fixed;\n  right: 12px;\n  font-size: 9px;\n  color: white;\n  opacity: 0.5;\n}\n\n\n/* IPHONE 8+ */\n@media screen and (max-width: 440px) {\n  footer {\n    display: none;\n  }\n}\n",""])},function(e,t,n){var i=n(7);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(0)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,".coming-soon-2d .modal {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  margin-left: -210px;\n  margin-top: -150px;\n  width: 420px;\n  height: 300px;\n  background: white;\n  border-radius: 28px;\n  z-index: 100;\n  box-shadow: 0 0 64px rgba(0,0,0,0.3);\n  box-sizing: border-box;\n  padding: 0 28px;\n  overflow: hidden;\n  transition: transform .3s cubic-bezier(0.175, 0.885, 0.320, 1), margin .3s cubic-bezier(0.175, 0.885, 0.320, 1);\n}\n\n/* IPHONE 8+ */\n@media screen and (max-width: 440px) {\n  .coming-soon-2d .modal {\n    width: 380px;\n    height: 271px;\n    margin-left: -190px;\n    margin-top: -135px;\n    border-radius: 24px;\n  }\n}\n\n/* IPHONE 8 */\n@media screen and (max-width: 390px) {\n  .coming-soon-2d .modal {\n    width: 320px;\n    height: 228px;\n    margin-left: -160px;\n    margin-top: -114px;\n    border-radius: 22px;\n  }\n}\n\n/* IPHONE 5 */\n@media screen and (max-width: 330px) {\n  .coming-soon-2d .modal {\n    width: 280px;\n    height: 200px;\n    margin-left: -140px;\n    margin-top: -100px;\n    border-radius: 16px;\n  }\n}\n\n\n/* OVERLAY */\n.coming-soon-2d .modal-container {\n  transition: opacity .25s ease-in;\n}\n.coming-soon-2d .modal-container::before {\n  content: '';\n  position: fixed;\n  background: rgba(0,0,0,0.7);\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n\n\n\n\n/* FADE IN / OUT */\n.coming-soon-2d .modal-container.fadeIn,\n.coming-soon-2d .modal-container.fadeOut {\n  opacity: 0;\n}\n.coming-soon-2d .modal-container.closing .modal {\n  transition: transform .2s ease-in, margin .2s ease-in;\n}\n.coming-soon-2d .modal-container.fadeIn .modal {\n  margin-top: 150px;\n  transform: scale(0.9);\n}\n.coming-soon-2d .modal-container.fadeOut .modal {\n  margin-top: -800px;\n}\n\n\n\n.coming-soon-2d .modal .wrapper {\n  position: relative;\n  transition: opacity .2s ease-in;\n}\n\n\n/* CLOSE BUTTON */\n.coming-soon-2d .modal .close-button {\n  position: absolute;\n  display: block;\n  top: 0;\n  right: -16px;\n  width: 42px;\n  height: 42px;\n  background: #eff3ff;\n  border-radius: 50%;\n  transition: transform .1s ease-in, opacity .1s ease-in;\n}\n.coming-soon-2d .modal .close-button:active {\n  transform: scale(0.98) translateY(2px);\n  opacity: 0.8;\n}\n.coming-soon-2d .modal .close-button span {\n  display: inline-block;\n  width: 100%;\n  height: 100%;\n  background: url('/assets/icons/closeIcon.svg') center no-repeat;\n  background-size: 35%;\n}\n\n\n/* IPHONE 8+ */\n@media screen and (max-width: 440px) {\n  .coming-soon-2d .modal .close-button {\n    width: 40px;\n    height: 40px;\n  }\n}\n\n/* IPHONE 8 */\n@media screen and (max-width: 390px) {\n  .coming-soon-2d .modal .close-button {\n    right: -18px;\n    top: -2px;\n  }\n}\n\n/* IPHONE 5 */\n@media screen and (max-width: 330px) {\n  .coming-soon-2d .modal .close-button {\n    width: 36px;\n    height: 36px;\n    top: 12px;\n  }\n}\n\n\n\n/* TITLE / INPUT */\n.coming-soon-2d .modal h1 {\n  text-align: center;\n  font-size: 20px;\n  color: #333;\n  font-weight: bold;\n  padding-top: 48px;\n}\n.coming-soon-2d .modal .input-container {\n  width: 100%;\n  margin: auto;\n  margin-top: 24px;\n}\n.coming-soon-2d .modal .input-container input {\n  display: inline-block;\n  border: none;\n  font-size: 24px;\n  text-align: left;\n  width: 100%;\n  font-family: 'Fredoka One', cursive;\n  outline: none;\n  caret-color: #003EFF;\n  color: #003EFF;\n  background: #F0F0F0;\n  box-shadow: 0 6px 0 #CCC;\n  border-radius: 12px;\n  padding: 14px 20px;\n  box-sizing: border-box;\n}\n\n/* IPHONE 8+ */\n@media screen and (max-width: 440px) {\n  .coming-soon-2d .modal h1 {\n    padding-top: 38px;\n  }\n  .coming-soon-2d .modal .input-container {\n    margin-top: 16px;\n  }\n  .coming-soon-2d .modal .input-container input {\n    font-size: 20px;\n    padding: 12px 18px;\n    box-shadow: 0 5px 0 #CCC;\n  }\n}\n\n/* IPHONE 8 */\n@media screen and (max-width: 390px) {\n  .coming-soon-2d .modal h1 {\n    font-size: 16px;\n  }\n  .coming-soon-2d .modal .input-container {\n    margin-top: 14px;\n  }\n  .coming-soon-2d .modal .input-container input {\n    font-size: 18px;\n    padding: 12px 16px;\n    box-shadow: 0 4px 0 #CCC;\n  }\n}\n\n/* IPHONE 5 */\n@media screen and (max-width: 330px) {\n  .coming-soon-2d .modal h1 {\n    font-size: 13px;\n    max-width: 80%;\n    margin: auto;\n  }\n  .coming-soon-2d .modal .input-container input {\n    font-size: 16px;\n    padding: 8px 14px;\n    box-shadow: 0 3px 0 #CCC;\n  }\n}\n\n\n\n\n/* DONE BUTTON */\n.coming-soon-2d .modal .let-me-know {\n  display: inline-block;\n  margin-top: 28px;\n  transform: scale(0.8);\n  transform-origin: top;\n}\n.coming-soon-2d .modal .let-me-know::before {\n  background: #eff3ff;\n}\n\n/* IPHONE 8+ */\n@media screen and (max-width: 440px) {\n  .coming-soon-2d .modal .let-me-know  {\n    margin-top: 22px;\n    transform: scale(0.6);\n  }\n}\n\n/* IPHONE 8 */\n@media screen and (max-width: 390px) {\n  .coming-soon-2d .modal .let-me-know  {\n    margin-top: 16px;\n    transform: scale(0.5);\n  }\n}\n\n/* IPHONE 5 */\n@media screen and (max-width: 330px) {\n  .coming-soon-2d .modal .let-me-know  {\n    margin-top: 14px;\n  }\n}\n\n\n\n\n/* MODAL DONE */\n.coming-soon-2d .done {\n  opacity: 0;\n  height: 100%;\n  position: relative;\n  transition: opacity .2s ease-in;\n}\n.coming-soon-2d .done .content {\n  position: absolute;\n  z-index: 10;\n  top: 0;\n  left: 0;\n}\n.coming-soon-2d .done h1 {\n  font-size: 42px;\n  padding-top: 54px;\n  color: #003EFF;\n}\n\n\n\n/* IPHONE 8+ */\n@media screen and (max-width: 440px) {\n  .coming-soon-2d .done h1 {\n    font-size: 36px;\n    padding-top: 64px;\n  }\n}\n\n/* IPHONE 8 */\n@media screen and (max-width: 390px) {\n  .coming-soon-2d .done h1 {\n    font-size: 32px;\n    padding-top: 48px;\n  }\n}\n\n/* IPHONE 5 */\n@media screen and (max-width: 330px) {\n  .coming-soon-2d .done h1 {\n    font-size: 26px;\n    padding-top: 72px;\n  }\n}\n\n\n\n\n\n.coming-soon-2d .pattern {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  transition: opacity .2s ease-in;\n}\n\n/* MODAL DONE */\n.coming-soon-2d .pattern::before,\n.coming-soon-2d .pattern::after {\n  content: '';\n  position: absolute;\n  z-index: -1;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  background: white url('/assets/images/pattern.png') center repeat;\n  background-size: 65%;\n  opacity: 0.12;\n}\n.coming-soon-2d .pattern::after {\n  background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,1));\n  opacity: 1;\n}\n",""])},function(e,t,n){var i=n(9);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(0)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,".coming-soon-2d {\n  position: fixed;\n  z-index: 1000;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n.coming-soon-2d .vignette {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  box-shadow: inset 0 0 140px #0030c5;\n  transition: opacity 0.2s linear;\n}\n.coming-soon-2d .content {\n  position: fixed;\n  bottom: 28px;\n  width: 100%;\n  text-align: center;\n}\n.coming-soon-2d .content .notify-me,\n.coming-soon-2d .content .modal {\n  pointer-events: all;\n}\n\n@media screen and (max-width: 720px) {\n  .coming-soon-2d button {\n    transform: scale(0.8);\n  }\n}\n\n@media screen and (max-width: 520px) {\n  .coming-soon-2d {\n    box-shadow: inset 0 0 100px #0030c5;\n  }\n}\n\n@media screen and (max-width: 420px) {\n  .coming-soon-2d {\n    box-shadow: inset 0 0 64px #0030c5;\n  }\n}\n\n.app.blink .coming-soon-2d .vignette {\n  opacity: 0;\n}\n",""])},function(e,t,n){var i=n(11);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(0)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,"/* SHAKE EFFECT */\n.shake {\n  position: relative;\n  animation: shake .1s linear;\n  animation-iteration-count: 3;\n}\n@keyframes shake {\n  0% { left: -5px; }\n  100% { right: -5px; }\n}\n",""])},function(e,t,n){var i=n(13);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(0)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,"button {\n  outline: none;\n  position: relative;\n  border: none;\n  background: none;\n  font-family: 'Fredoka One', cursive;\n  padding: 6px;\n  transform-origin: bottom;\n}\nbutton::before {\n  content: '';\n  display: block;\n  position: absolute;\n  z-index: -1;\n  background: rgba(0,0,0,.12);\n  width: 100%;\n  height: 100%;\n  top: 1px;\n  left: -4px;\n  border-radius: 28px;\n  padding: 4px;\n  transition: transform .1s ease-in;\n}\nbutton:hover .inner {\n  opacity: .95;\n}\n\nbutton:active::before {\n  transform: scale(0.98) translateY(2px);\n}\nbutton:active .outer {\n  box-shadow: 0 10px 10px rgba(0,0,0,.3);\n  -webkit-animation-play-state: paused;\n  -moz-animation-play-state: paused;\n  -o-animation-play-state: paused;\n  animation-play-state: paused;\n}\nbutton:active .inner {\n  opacity: 1;\n  box-shadow: 0 2px 0 #022ba9;\n  transform: translateY(4px);\n}\nbutton .outer  {\n  display: block;\n  border-radius: 24px;\n  box-shadow: 0 10px 20px rgba(0,0,0,.6);\n  animation-name: buttonAnimation;\n  animation-duration: 1.2s;\n  animation-iteration-count: infinite;\n  animation-direction: reverse;\n  animation-timing-function: linear;\n}\nbutton .inner {\n  display: block;\n  color: white;\n  background: #003EFF;\n  box-shadow: 0 6px 0 #022ba9;\n  border-radius: 24px;\n  padding: 12px 42px;\n  font-weight: bold;\n  font-size: 26px;\n  text-transform: uppercase;\n  transition: all .1s ease-in;\n}\n\n@keyframes buttonAnimation {\n  0% {\n    transform: rotate(1.5deg);\n  }\n\n  50% {\n    transform: rotate(-1.5deg);\n  }\n\n  100% {\n    transform: rotate(1.5deg);\n  }\n}\n",""])},function(e,t,n){var i=n(15);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(0)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,"\n.app {\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  cursor: -webkit-image-set(url(/assets/cursors/cursor.png) 1x,url(/assets/cursors/cursor@2x.png) 2x) 0 0,default;\n}\nbutton, .click, a {\n  cursor:-webkit-image-set(url(/assets/cursors/cursorButton.png) 1x,url(/assets/cursors/cursorButton@2x.png) 2x) 0 0,pointer;\n}\ninput {\n  cursor:-webkit-image-set(url(/assets/cursors/cursorInput.png) 1x,url(/assets/cursors/cursorInput@2x.png) 2x) 0 0,pointer;\n}\n\n.hide {\n  display: none !important;\n}\n\n.hide-opacity {\n  opacity: 0 !important;\n  pointer-events: none;\n}\n\n.show-opacity {\n  opacity: 1 !important;\n}\n\n.busy {\n  opacity: 0.6;\n  pointer-events: none;\n}\n",""])},function(e,t,n){var i=n(17);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(0)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,i.default)(e),(t=(0,r.default)(t,a)).allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1));var n=e.split(".");if(t.require_tld){var o=n.pop();if(!n.length||!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(o))return!1;if(/[\s\u2002-\u200B\u202F\u205F\u3000\uFEFF\uDB40\uDC20]/.test(o))return!1}for(var s,d=0;d<n.length;d++){if(s=n[d],t.allow_underscores&&(s=s.replace(/_/g,"")),!/^[a-z\u00a1-\uffff0-9-]+$/i.test(s))return!1;if(/[\uff01-\uff5e]/.test(s))return!1;if("-"===s[0]||"-"===s[s.length-1])return!1}return!0};var i=o(n(2)),r=o(n(3));function o(e){return e&&e.__esModule?e:{default:e}}var a={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e,t){(0,a.default)(e);var n=void 0,r=void 0;"object"===(void 0===t?"undefined":i(t))?(n=t.min||0,r=t.max):(n=arguments[1],r=arguments[2]);var o=encodeURI(e).split(/%..|./).length-1;return o>=n&&(void 0===r||o<=r)};var r,o=n(2),a=(r=o)&&r.__esModule?r:{default:r};e.exports=t.default},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var r,o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(r=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:i+o.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")})}},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,"@keyframes confetti-slow {\n  0% {\n    transform: translate3d(0, 0, 0) rotateX(0) rotateY(0);\n  }\n  100% {\n    transform: translate3d(25px, 105vh, 0) rotateX(360deg) rotateY(180deg);\n  }\n}\n@keyframes confetti-medium {\n  0% {\n    transform: translate3d(0, 0, 0) rotateX(0) rotateY(0);\n  }\n  100% {\n    transform: translate3d(100px, 105vh, 0) rotateX(100deg) rotateY(360deg);\n  }\n}\n@keyframes confetti-fast {\n  0% {\n    transform: translate3d(0, 0, 0) rotateX(0) rotateY(0);\n  }\n  100% {\n    transform: translate3d(-50px, 105vh, 0) rotateX(10deg) rotateY(250deg);\n  }\n}\n\n.confetti-container {\n  perspective: 700px;\n  position: absolute;\n  overflow: hidden;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n\n.confetti {\n  position: absolute;\n  z-index: 1;\n  top: -10px;\n  border-radius: 0%;\n}\n.confetti--animation-slow {\n  animation: confetti-slow 2.25s linear 1 forwards;\n}\n.confetti--animation-medium {\n  animation: confetti-medium 1.75s linear 1 forwards;\n}\n.confetti--animation-fast {\n  animation: confetti-fast 1.25s linear 1 forwards;\n}\n",""])},function(e,t,n){var i=n(22);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(0)(i,r);i.locals&&(e.exports=i.locals)},function(e,t){const n=(new THREE.TextureLoader).load("/assets/textures/ghostParticle.png");window.innerWidth,window.innerHeight;class i{constructor(e,t,i){var r=this.radius=.1*Math.random()+.09;this.color=new THREE.Color("hsl("+(50*Math.random()+180)+",100%,75%)");var o=new THREE.MeshBasicMaterial({color:this.color,transparent:!0,map:n,side:THREE.DoubleSide,flatShading:!0,transparent:!0,depthTest:!1});this.mesh=new THREE.Mesh(new THREE.PlaneGeometry(1,1),o),this.mesh.scale.set(8*r,r,r),this.percent=Math.random(),this.speed=.003*Math.random()+.01,this.setRotation(),e.add(this.mesh)}setRotation(){let e=360*Math.random();new THREE.Vector2(Math.sin(e),Math.cos(e));this.mesh.position.set(Math.sin(e),Math.cos(e),-1.5-.1*Math.random()),this.mesh.rotation.z=80-e}update(){this.percent+=this.speed,this.percent>1&&(this.percent=0,this.setRotation()),this.mesh.scale.y=this.radius+this.radius*this.percent,this.percent<.5?this.mesh.material.opacity=2*this.percent*.28:this.mesh.material.opacity=.28*(1-2*(this.percent-.5))}}AFRAME.registerComponent("ghostparticles",{schema:{},init(){this.particles=[],this.el.sceneEl.addEventListener("loaded",()=>{this.sceneEl=this.el.sceneEl,this.scene=this.el.sceneEl.object3D,setTimeout(()=>this.setUp(),0)})},tick(e){if(this.el.parentNode.object3D.visible)for(var t=0;t<this.particles.length;t++)this.particles[t].update(this)},setUp(){this.particles=[];for(var e=0;e<70;e++)this.particles.push(new i(this.el.object3D))}})},function(e,t){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("environment",{schema:{active:{default:!1},preset:{default:"default",oneOf:["none","default","contact","egypt","checkerboard","forest","goaland","yavapai","goldmine","arches","threetowers","poison","tron","japan","dream","volcano","starry","osiris"]},seed:{type:"int",default:1,min:0,max:1e3},skyType:{default:"color",oneOf:["none","color","gradient","atmosphere"]},skyColor:{type:"color"},horizonColor:{type:"color"},lighting:{default:"distant",oneOf:["none","distant","point"]},shadow:{default:!1},shadowSize:{default:10},lightPosition:{type:"vec3",default:{x:0,y:1,z:-.2}},fog:{type:"float",default:0,min:0,max:1},flatShading:{default:!1},playArea:{type:"float",default:1,min:1,max:100},ground:{default:"hills",oneOf:["none","flat","hills","canyon","spikes","noise"]},groundYScale:{type:"float",default:3,min:0,max:50},groundTexture:{default:"none",oneOf:["none","checkerboard","squares","walkernoise"]},groundColor:{type:"color",default:"#553e35"},groundColor2:{type:"color",default:"#694439"},dressing:{default:"none",oneOf:["none","cubes","pyramids","cylinders","hexagons","stones","trees","mushrooms","towers","apparatus","arches","torii"]},dressingAmount:{type:"int",default:10,min:0,max:1e3},dressingColor:{type:"color",default:"#795449"},dressingScale:{type:"float",default:5,min:0,max:100},dressingVariance:{type:"vec3",default:{x:1,y:1,z:1}},dressingUniformScale:{default:!0},dressingOnPlayArea:{type:"float",default:0,min:0,max:1},grid:{default:"none",oneOf:["none","1x1","2x2","crosses","dots","xlines","ylines"]},gridColor:{type:"color",default:"#ccc"}},multiple:!1,presets:{none:{},default:{active:!0,seed:1,skyType:"atmosphere",skyColor:"#88c",horizonColor:"#ddd",lighting:"distant",lightPosition:{x:-.11,y:1,z:.33},fog:.78,flatShading:!1,playArea:1,ground:"hills",groundYScale:3,groundTexture:"checkerboard",groundColor:"#454545",groundColor2:"#5d5d5d",dressing:"none",dressingAmount:10,dressingColor:"#795449",dressingScale:1,dressingVariance:{x:0,y:0,z:0},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"none",gridColor:"#ccc",shadow:!1},contact:{active:!0,seed:14,skyType:"gradient",skyColor:"#478d54",horizonColor:"#b696cb",lighting:"distant",lightPosition:{x:0,y:2.01,z:-1},fog:.8,flatShading:!1,playArea:1,ground:"spikes",groundYScale:4.91,groundTexture:"none",groundColor:"#2e455f",groundColor2:"#694439",dressing:"apparatus",dressingAmount:7,dressingColor:"#657067",dressingScale:20,dressingVariance:{x:20,y:20,z:20},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"1x1",gridColor:"#478d54",shadow:!1},egypt:{active:!0,seed:26,skyType:"gradient",skyColor:"#1b7660",horizonColor:"#e4b676",lighting:"distant",lightPosition:{x:0,y:1.65,z:-1},fog:.75,flatShading:!1,playArea:1,ground:"hills",groundYScale:5,groundTexture:"walkernoise",groundColor:"#664735",groundColor2:"#6c4b39",dressing:"pyramids",dressingAmount:10,dressingColor:"#7c5c45",dressingScale:5,dressingVariance:{x:20,y:20,z:20},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"spots",gridColor:"#e4b676",shadow:!1},checkerboard:{active:!0,seed:1,skyType:"gradient",skyColor:"#0d0d0d",horizonColor:"#404040",lighting:"distant",lightPosition:{x:0,y:1,z:-.2},fog:.81,flatShading:!0,playArea:1,ground:"hills",groundYScale:4.81,groundTexture:"checkerboard",groundColor:"#252525",groundColor2:"#111111",dressing:"cubes",dressingAmount:10,dressingColor:"#9f9f9f",dressingScale:1.51,dressingVariance:{x:5,y:20,z:5},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"dots",gridColor:"#ccc",shadow:!1},forest:{active:!0,seed:8,skyType:"gradient",skyColor:"#24b59f",horizonColor:"#eff9b7",lighting:"distant",lightPosition:{x:-1.2,y:.88,z:-.55},fog:.8,flatShading:!1,playArea:1,ground:"noise",groundYScale:4.18,groundTexture:"squares",groundColor:"#937a24",groundColor2:"#987d2e",dressing:"trees",dressingAmount:500,dressingColor:"#888b1d",dressingScale:1,dressingVariance:{x:10,y:10,z:10},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"none",gridColor:"#c5a543",shadow:!1},goaland:{active:!0,seed:17,skyType:"gradient",skyColor:"#14645f",horizonColor:"#a3dab8",lighting:"point",lightPosition:{x:.1,y:4,z:.56},fog:.73,flatShading:!1,playArea:1,ground:"noise",groundYScale:.81,groundTexture:"none",groundColor:"#ae3241",groundColor2:"#db4453",dressing:"mushrooms",dressingAmount:150,dressingColor:"#a9313d",dressingScale:5,dressingVariance:{x:5,y:10,z:5},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"dots",gridColor:"#239893",shadow:!1},yavapai:{active:!0,seed:11,skyType:"gradient",skyColor:"#239849",horizonColor:"#cfe0af",lighting:"distant",lightPosition:{x:.5,y:1,z:0},fog:.8,flatShading:!0,playArea:1,ground:"canyon",groundYScale:9.76,groundTexture:"walkernoise",groundColor:"#C66344",groundColor2:"#c96b4b",dressing:"stones",dressingAmount:500,dressingColor:"#C66344",dressingScale:.06,dressingVariance:{x:.2,y:.1,z:.2},dressingUniformScale:!0,dressingOnPlayArea:1,grid:"none",gridColor:"#239893",shadow:!1},goldmine:{active:!0,seed:53,skyType:"gradient",skyColor:"#1e1c1a",horizonColor:"#8c7964",lighting:"point",lightPosition:{x:-.09,y:3,z:.33},fog:.43,flatShading:!0,playArea:1.08,ground:"canyon",groundYScale:50,groundTexture:"none",groundColor:"#353535",groundColor2:"#454545",dressing:"hexagons",dressingAmount:300,dressingColor:"#fe921b",dressingScale:.5,dressingVariance:{x:2,y:8,z:2},dressingUniformScale:!0,dressingOnPlayArea:.03,grid:"none",gridColor:"#ccc",shadow:!1},threetowers:{active:!0,seed:5,skyType:"gradient",skyColor:"#23a06b",horizonColor:"#f5e170",lighting:"distant",lightPosition:{x:.5,y:1,z:0},fog:.8,flatShading:!1,playArea:1,ground:"spikes",groundYScale:4.26,groundTexture:"walkernoise",groundColor:"#273a49",groundColor2:"#2b464f",dressing:"towers",dressingAmount:3,dressingColor:"#5f6d94",dressingScale:50,dressingVariance:{x:10,y:100,z:10},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"none",gridColor:"#239893",shadow:!1},poison:{active:!0,seed:92,skyType:"gradient",skyColor:"#1ea84a",horizonColor:"#177132",lighting:"distant",lightPosition:{x:.5,y:1,z:0},fog:.8,flatShading:!1,playArea:1,ground:"canyon",groundYScale:9.76,groundTexture:"none",groundColor:"#851f31",groundColor2:"#912235",dressing:"hexagons",dressingAmount:20,dressingColor:"#c7415b",dressingScale:20,dressingVariance:{x:20,y:200,z:20},dressingUniformScale:!1,dressingOnPlayArea:0,grid:"crosses",gridColor:"#1ea84a",shadow:!1},arches:{active:!0,seed:19,skyType:"atmosphere",skyColor:"#8cbdc8",horizonColor:"#ddd",lighting:"distant",lightPosition:{x:-.11,y:.16,z:.33},fog:.67,flatShading:!0,playArea:1,ground:"canyon",groundYScale:10,groundTexture:"walkernoise",groundColor:"#a87d6f",groundColor2:"#795449",dressing:"arches",dressingAmount:6,dressingColor:"#795449",dressingScale:26,dressingVariance:{x:20,y:40,z:20},dressingUniformScale:!0,dressingOnPlayArea:.04,grid:"none",gridColor:"#ccc",shadow:!1},tron:{active:!0,seed:14,skyType:"gradient",skyColor:"#091b39",horizonColor:"#284a9e",lighting:"distant",lightPosition:{x:-.72,y:.62,z:.4},fog:.8,flatShading:!1,playArea:1,ground:"spikes",groundYScale:4.91,groundTexture:"none",groundColor:"#061123",groundColor2:"#694439",dressing:"towers",dressingAmount:5,dressingColor:"#fb000e",dressingScale:15,dressingVariance:{x:20,y:20,z:20},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"1x1",gridColor:"#fb000e",shadow:!1},japan:{active:!0,seed:14,skyType:"gradient",skyColor:"#7e5db5",horizonColor:"#b4adda",lighting:"distant",lightPosition:{x:1.33,y:1,z:.24},fog:.9,flatShading:!1,playArea:1,ground:"hills",groundYScale:25,groundTexture:"walkernoise",groundColor:"#7e5db5",groundColor2:"#cabdf5",dressing:"torii",dressingAmount:4,dressingColor:"#bc5e7c",dressingScale:15,dressingVariance:{x:0,y:0,z:0},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"spots",gridColor:"#e4b676",shadow:!1},dream:{active:!0,seed:17,skyType:"gradient",skyColor:"#87faf4",horizonColor:"#b34093",lighting:"distant",lightPosition:{x:-.72,y:.53,z:.97},fog:.8,flatShading:!1,playArea:1,ground:"hills",groundYScale:20,groundTexture:"checkerboard",groundColor:"#b34093",groundColor2:"#c050a2",dressing:"mushrooms",dressingAmount:300,dressingColor:"#3cf7ed",dressingScale:.2,dressingVariance:{x:.2,y:.2,z:.2},dressingUniformScale:!0,dressingOnPlayArea:1,grid:"none",gridColor:"#239893",shadow:!1},volcano:{active:!0,seed:92,skyType:"gradient",skyColor:"#4a070f",horizonColor:"#f62300",lighting:"point",lightPosition:{x:.5,y:2.25,z:0},fog:.87,flatShading:!1,playArea:1,ground:"canyon",groundYScale:9.76,groundTexture:"walkernoise",groundColor:"#fb0803",groundColor2:"#510000",dressing:"arches",dressingAmount:15,dressingColor:"#fb0803",dressingScale:3,dressingVariance:{x:10,y:100,z:10},dressingUniformScale:!1,dressingOnPlayArea:.2,grid:"none",gridColor:"#fa0e00",shadow:!1},starry:{active:!0,seed:1,skyType:"atmosphere",skyColor:"#88c",horizonColor:"#ddd",lighting:"distant",lightPosition:{x:0,y:-.01,z:-.46},fog:.7,flatShading:!1,playArea:1,ground:"hills",groundYScale:3,groundTexture:"none",groundColor:"#553e35",groundColor2:"#694439",dressing:"none",dressingAmount:100,dressingColor:"#795449",dressingScale:5,dressingVariance:{x:1,y:1,z:1},dressingUniformScale:!0,grid:"1x1",dressingOnPlayArea:0,gridColor:"#39d2f2",shadow:!1},osiris:{active:!0,seed:46,skyType:"atmosphere",skyColor:"#88c",horizonColor:"#ddd",lighting:"distant",lightPosition:{x:0,y:.02,z:-.46},fog:0,flatShading:!1,playArea:1,ground:"hills",groundYScale:3,groundTexture:"none",groundColor:"#9e7b47",groundColor2:"#9e7b47",dressing:"pyramids",dressingAmount:7,dressingColor:"#9e7b47",dressingScale:5,dressingVariance:{x:30,y:30,z:30},dressingUniformScale:!0,grid:"dots",dressingOnPlayArea:0,gridColor:"#daa452",shadow:!1}},init:function(){for(var e in this.STAGE_SIZE=200,this.assets={arches:[{type:"mesh",vertices:[409,268,4,351,228,36,336,236,-57,-152,391,69,-135,358,88,-119,330,43,-20,358,-35,-153,357,-47,37,413,-26,-20,411,-14,-302,148,154,-339,121,-126,-389,200,-88,-477,193,-76,-314,346,-19,-314,306,-30,-250,296,-73,-267,237,-82,-212,303,-68,-245,200,-67,-223,304,108,-329,299,107,-289,350,76,-320,342,69,119,373,-39,38,370,8,113,367,52,492,202,-31,462,83,-104,447,71,-80,426,112,25,482,189,-7,222,372,6,121,402,41,87,382,67,221,346,55,559,93,-13,528,47,39,505,21,-111,528,54,-101,616,31,-53,442,256,-15,300,338,19,257,308,-79,408,256,-74,312,352,-26,384,297,-31,437,257,-47,-29,415,53,-232,377,59,-139,335,77,-132,344,2,-18,377,-37,-171,387,-28,-254,384,18,-651,-27,27,-435,-28,179,-345,149,165,-272,-28,23,-215,146,-2,-279,-29,-59,-211,145,-55,-337,-28,-128,-413,247,0,-293,363,24,-214,254,-36,-164,290,33,-284,150,94,-218,362,105,75,369,29,518,147,-63,447,190,-70,445,56,-105,391,185,-60,431,49,-33,459,83,26,470,162,42,130,390,53,167,341,-30,125,394,-45,239,368,-17,91,414,10,450,18,2,449,-27,-9,436,-28,-58,496,-27,-110,582,-28,-140,647,-27,-56,325,325,-45,-307,297,-56,-647,-28,-45,-188,310,-54,-264,197,113,-367,175,139,8,387,82,426,45,-55,114,359,-28,500,27,44,461,-29,13,-512,-27,-151,-152,376,-38,-490,-28,148,12,370,-28,442,160,42,465,194,32,381,183,-33,649,-27,-34,444,16,29,616,-28,25,417,267,-66,-132,352,-34,-322,-27,130,-271,86,-115,-635,-28,-121,-291,203,-99,176,405,-10,561,52,-93,371,305,9,311,237,-22,377,200,-81,-129,406,46,-154,371,99,-82,361,71,-21,354,26,-91,363,-27,-165,413,-12,-414,215,110,-238,127,26,-408,-28,-128,-674,-28,-94,-446,232,-39,-311,226,-90,-255,210,-61,-235,192,-11,-217,218,58,-269,299,124,-386,276,78,-399,281,42,15,373,58,16,393,75,549,107,-46,481,188,-68,409,120,-41,541,81,12,230,368,41,194,350,-50,224,361,-50,604,-28,-10,602,-27,35,486,56,-121,502,69,-120,457,-27,-110,226,317,-40,-584,-28,-124,439,-26,-30,467,-26,39,547,-27,-146,21,368,14,466,229,-29,578,-27,44,609,-27,-96,291,356,-15,290,306,34,255,321,28,231,311,-5,-251,386,50,-183,307,87,-152,307,24,-264,373,-12,-392,-27,190,-333,-28,84,-281,-27,54,-270,-28,-23,-308,-28,-101,-687,-27,-59,39,418,39,413,163,25,404,206,-90,54,400,-31,121,352,8,-454,41,148,-426,9,182,-564,115,3,-427,27,-107,-548,118,-32,-556,122,-53,-517,91,-101,-475,54,140,-461,52,-134,-558,119,-71,-434,286,59,-687,-31,52,-595,146,22,-670,-28,164,-537,166,122,-575,-28,217,-566,159,65,-470,152,136,-712,-29,102,-639,-29,211,-532,-30,181,-442,-30,-100],faces:[76,104,162,1,176,103,103,76,1,2,119,73,73,105,2,2,118,152,45,161,46,46,109,45,3,120,49,49,68,3,3,121,139,139,48,3,4,122,94,94,121,4,6,123,124,9,175,81,10,169,111,10,67,92,88,43,146,11,131,114,11,128,183,13,130,15,90,184,174,90,182,184,130,184,63,14,130,63,15,130,14,16,131,12,15,168,53,18,91,17,131,16,17,65,133,132,65,132,91,67,134,166,166,92,67,20,135,92,20,166,4,4,121,20,22,135,68,25,102,96,25,157,102,69,138,157,69,157,25,39,150,71,71,141,39,28,150,149,149,72,28,142,176,105,36,140,27,27,143,36,32,115,81,32,144,161,161,80,32,77,35,144,34,26,77,78,179,96,145,152,78,178,79,145,80,146,79,147,140,36,143,108,36,143,37,148,74,95,154,154,83,74,72,149,151,151,95,72,38,150,156,40,147,106,70,140,40,40,116,70,42,162,0,35,163,162,43,145,146,46,117,41,47,158,27,48,139,175,122,138,94,157,138,123,52,178,102,52,102,6,52,124,7,7,100,52,53,125,8,57,93,181,56,169,181,59,127,58,60,173,61,62,128,11,11,112,62,65,91,167,65,167,66,126,93,21,22,68,49,72,95,29,142,29,74,74,82,142,75,107,97,75,97,103,76,97,37,104,143,31,78,152,164,78,164,179,79,178,8,97,155,159,107,98,155,83,98,82,154,95,84,39,116,86,86,156,39,87,160,116,24,145,96,162,104,0,105,118,2,43,177,119,44,177,43,91,51,167,44,88,109,46,161,117,3,68,121,3,48,120,4,166,50,50,122,4,5,123,122,123,138,122,110,124,51,170,10,111,110,91,7,7,124,110,8,125,9,9,81,8,186,12,188,92,135,10,11,114,112,64,63,137,13,15,89,89,53,100,64,168,14,14,168,15,89,100,16,16,12,89,100,18,16,17,91,132,112,19,61,18,7,91,19,17,132,133,127,59,133,59,61,136,21,22,134,127,133,20,92,166,121,135,20,158,31,27,21,135,22,23,137,136,24,102,178,178,145,24,25,179,69,26,94,138,27,140,70,27,70,141,150,177,71,28,177,150,29,142,73,73,119,29,142,82,30,30,176,142,107,75,82,31,143,27,33,81,175,31,41,104,115,79,8,32,33,144,80,115,32,33,175,139,35,162,42,77,139,34,163,26,179,163,179,164,78,96,145,177,29,119,108,143,148,148,37,159,97,159,37,74,83,82,38,149,150,156,150,39,40,106,87,87,116,40,140,147,40,161,144,42,42,117,161,41,0,104,41,117,0,0,117,42,164,118,163,1,163,118,118,176,1,118,105,176,152,118,164,43,152,145,43,119,2,71,109,141,47,41,158,44,71,177,45,109,88,45,88,146,46,47,109,141,47,27,167,50,166,49,120,165,139,121,94,5,122,50,123,51,124,157,6,102,157,123,6,100,8,178,5,167,51,6,124,52,100,178,52,53,168,125,125,165,120,54,125,168,9,48,175,120,9,125,93,10,135,181,101,56,57,169,10,59,172,61,67,170,171,67,171,127,58,127,171,129,186,113,60,61,172,61,173,112,62,112,173,174,189,129,165,64,23,64,137,23,165,22,49,64,54,168,17,114,131,17,112,114,66,133,65,19,132,133,19,133,61,134,133,66,166,134,66,166,66,167,93,135,21,68,135,121,23,136,22,94,34,139,25,96,179,26,138,69,69,179,26,30,103,176,116,141,70,39,141,116,73,142,105,143,76,37,26,35,77,103,97,76,77,144,33,33,139,77,38,151,149,80,161,45,80,45,146,81,115,8,107,155,97,82,98,107,95,151,84,38,156,85,86,116,160,96,102,24,72,29,28,29,95,74,75,30,82,108,147,36,88,44,43,91,110,51,170,67,10,11,183,131,64,14,63,89,15,53,100,7,18,112,17,19,127,134,67,136,126,21,158,41,31,33,32,81,115,80,79,177,28,29,43,2,152,71,44,109,47,46,41,141,109,47,167,5,50,123,5,51,100,53,8,125,54,165,9,120,48,93,57,10,59,58,172,174,185,189,165,54,64,165,23,22,94,26,34,30,75,103,143,104,76,26,163,35,38,85,151,192,182,191,183,128,201,12,13,89,181,169,57,186,153,113,188,183,99,184,182,63,185,13,189,180,181,93,186,99,153,189,186,129,185,184,130,186,13,12,187,93,126,193,199,194,194,196,193,200,187,195,187,197,195,187,126,197,197,190,194,190,136,137,190,196,194,63,182,192,63,192,196,192,198,196,191,182,55,193,196,198,194,199,197,195,197,199,136,197,126,190,137,63,190,63,196,197,136,190,192,191,198,201,99,183,90,55,182,181,180,101,185,130,13,186,188,99,186,189,13,187,180,93,200,101,187,183,188,131,184,185,174,180,187,101,16,18,17,12,131,188,35,42,144,163,1,162,76,162,1,79,146,145]}],stones:[{type:"mesh",vertices:[-376,189,42,230,223,-310,353,162,-62,414,-23,-67,256,90,-475,24,85,-526,-418,-16,57,-432,66,-40,-199,151,-376,-155,49,467,-91,289,201,293,197,91,81,-17,-480,42,108,431,-359,-17,-250,383,-19,-243,194,-15,270,-272,180,293,-86,212,262,234,54,297,395,97,-302,-123,-21,-444,-416,-19,-123,-323,-18,267,-100,-16,429,-300,96,-361,163,-19,409,118,201,-431,-241,-18,391,-130,274,-309,306,-19,-399,-221,96,404],faces:[31,18,17,0,17,18,3,20,2,18,11,10,29,27,8,27,29,1,0,18,10,10,29,0,16,19,26,11,2,1,20,30,4,20,3,15,30,12,4,4,12,5,5,27,4,4,27,20,21,25,5,7,8,25,22,7,14,7,25,14,23,28,31,0,7,17,24,26,9,31,28,9,8,27,5,2,20,1,13,19,18,10,11,1,19,13,26,3,11,19,19,16,3,11,3,2,11,18,19,20,15,30,29,10,1,25,21,14,8,5,25,5,12,21,6,7,22,7,6,23,8,0,29,8,7,0,23,31,7,13,31,9,18,31,13,9,28,24,26,13,9,27,1,20,7,31,17]},{type:"mesh",vertices:[-217,34,-153,198,90,20,212,85,169,-131,93,171,197,113,30,173,121,164,315,29,-16,219,24,189,282,50,-102,232,38,-181,-195,-9,-166,-156,30,-207,-51,-9,-231,-180,91,-173,-19,73,-204,-280,23,96,-242,100,107,3,158,-82,109,88,221,275,-10,-40,236,-10,-135,-178,49,184,-1,-10,-243,265,-11,109,-12,-9,237,-36,46,251,-233,86,-81,93,77,-171,-163,133,69,18,16,263,296,44,93,131,-12,-226,-89,-10,-201,-273,-10,-51,-240,-9,110,190,-12,192,-253,-11,-92,42,43,-258,-115,-11,238,168,99,-88,-285,-10,24,71,124,-158,298,-10,10,116,150,-24,-282,44,39],faces:[44,16,26,13,26,16,0,26,13,27,14,41,4,5,1,7,30,2,28,5,43,41,39,27,17,43,41,43,4,39,13,28,17,17,41,13,28,43,17,24,29,38,29,35,7,18,25,29,5,18,2,18,5,3,30,42,6,30,35,23,19,20,8,8,20,9,9,39,8,1,30,8,31,37,9,11,14,37,14,27,37,32,11,12,11,37,12,11,0,13,33,40,44,44,26,33,33,0,36,34,38,15,44,40,15,21,3,16,27,39,9,2,30,1,21,25,3,16,3,28,28,3,5,4,43,5,41,43,39,13,16,28,25,21,38,38,29,25,7,18,29,29,24,35,18,7,2,18,3,25,30,23,42,30,7,35,8,30,6,6,19,8,6,42,19,8,39,1,37,31,22,27,9,37,9,20,31,10,11,32,11,10,0,12,37,22,14,13,41,14,11,13,33,26,0,36,0,10,21,44,15,16,44,21,15,40,34,38,21,15,4,1,39,5,2,1]},{type:"mesh",vertices:[-101,102,57,99,35,102,40,72,80,59,14,-168,-186,22,45,-176,25,-30,66,-7,146,153,-7,53,-110,47,-96,-90,-8,-146,150,-7,-12,-200,-7,8,-173,-7,-55,55,46,-60,125,-7,110,136,30,-10,-149,58,68,-15,82,-71,98,-7,-86,-34,-6,-194,-33,-7,171,-36,65,137,38,-8,-192,-103,-9,147,-12,62,-152],faces:[2,17,0,17,8,0,17,24,8,19,24,22,5,11,4,2,13,17,17,13,24,21,23,20,1,2,21,7,15,1,7,10,15,5,9,12,15,18,13,0,5,16,0,8,5,1,15,2,10,18,15,3,13,18,24,3,22,11,23,4,4,16,5,16,4,23,24,13,3,15,13,2,6,1,21,6,21,20,6,14,1,2,0,21,1,14,7,3,18,22,8,24,19,8,19,9,12,11,5,5,8,9,16,23,21,16,21,0]},{type:"mesh",vertices:[86,55,-18,58,38,73,97,-12,79,135,7,10,-93,-11,-72,-133,5,33,13,68,-32,94,-11,-57,-90,52,53,-24,-11,-106,-13,-10,104,-75,49,-69,-12,18,114,49,-12,-96,-46,-11,-85,-119,-11,-26,48,5,-111,-58,-11,105,-117,-12,52,-5,35,-93,123,-11,7],faces:[5,8,11,2,3,1,8,1,6,11,8,6,6,19,11,10,12,17,20,7,3,3,7,16,16,0,3,16,9,19,14,4,9,15,18,5,5,11,15,18,17,5,19,0,16,1,3,0,0,6,1,19,6,0,12,8,17,2,1,12,12,10,2,1,8,12,3,2,20,16,13,9,16,7,13,19,4,11,15,11,4,17,8,5,9,4,19]}],torii:[{type:"mesh",mirror:!0,flatShading:!0,vertices:[692,966,-52,661,834,-52,692,966,52,661,834,52,0,894,-52,0,776,-52,0,894,52,0,776,52,518,935,52,345,913,52,170,899,52,162,779,52,328,790,52,494,808,52,170,899,-52,345,913,-52,518,935,-52,494,808,-52,328,790,-52,162,779,-52,0,618,16,0,697,16,0,618,-16,0,697,-16,586,618,16,586,697,16,586,618,-16,586,697,-16,331,-29,-75,331,766,-52,369,-29,-65,357,766,-45,396,-29,-37,377,766,-26,406,-29,0,384,766,0,396,-29,37,377,766,26,369,-29,65,357,766,45,331,-29,75,331,766,52,294,-29,65,305,766,45,267,-29,37,286,766,26,257,-29,0,279,766,0,267,-29,-37,286,766,-26,294,-29,-65,305,766,-45,0,777,85,0,681,33,333,762,-75,333,806,-75,371,762,-65,371,806,-65,398,762,-37,398,806,-37,408,762,0,408,806,0,398,762,37,398,806,37,371,762,65,371,806,65,333,762,75,333,806,75,296,762,65,296,806,65,268,762,37,268,806,37,258,762,0,258,806,0,268,762,-37,268,806,-37,296,762,-65,296,806,-65,0,681,-33,0,777,-85,52,681,33,52,777,85,52,681,-33,52,777,-85],faces:[4,10,14,1,13,17,11,6,7,0,3,1,16,1,17,4,19,5,14,18,19,15,17,18,3,8,13,13,9,12,12,10,11,19,7,5,19,12,11,18,13,12,16,2,0,15,8,16,14,9,15,23,26,22,27,24,26,25,20,24,26,20,22,23,25,27,29,30,28,31,32,30,33,34,32,35,36,34,37,38,36,39,40,38,41,42,40,43,44,42,45,46,44,47,48,46,49,50,48,51,28,50,55,56,54,57,58,56,59,60,58,61,62,60,63,64,62,79,81,83,65,66,64,82,53,78,67,68,66,81,53,80,69,70,68,83,80,82,71,72,70,79,82,78,73,74,72,75,63,59,75,76,74,77,54,76,60,68,76,4,6,10,1,3,13,11,10,6,0,2,3,16,0,1,4,14,19,14,15,18,15,16,17,3,2,8,13,8,9,12,9,10,19,11,7,19,18,12,18,17,13,16,8,2,15,9,8,14,10,9,23,27,26,27,25,24,25,21,20,26,24,20,23,21,25,29,31,30,31,33,32,33,35,34,35,37,36,37,39,38,39,41,40,41,43,42,43,45,44,45,47,46,47,49,48,49,51,50,51,29,28,55,57,56,57,59,58,59,61,60,61,63,62,63,65,64,79,52,81,65,67,66,82,80,53,67,69,68,81,52,53,69,71,70,83,81,80,71,73,72,79,83,82,73,75,74,59,57,55,55,77,75,75,73,71,71,69,75,67,65,63,63,61,59,59,55,75,75,69,67,67,63,75,75,77,76,77,55,54,76,54,56,56,58,76,60,62,68,64,66,68,68,70,72,72,74,68,76,58,60,62,64,68,68,74,76]}],hexagons:[{type:"extrude",vertices:[-.198,-.302,.197,-.3,.372,0,.199,.298,-.202,.298,-.368,0]}],towers:[{type:"extrude",vertices:[-.054,-.178,-.007,-.182,.069,-.027,.189,.079,.178,.124,-.007,.097,-.145,.182,-.178,.144,-.079,-.021]},{type:"lathe",segments:4,vertices:[.004,.02,.012,.092,.042,.166,.067,.55,.101,.594,.105,.838,.193,.934,.18,.994]},{type:"lathe",segments:5,vertices:[.069,.216,.067,.562,.126,.562,.128,.774,.191,.774,.193,.986]}],trees:[{type:"lathe",noise:.015,segments:6,vertices:[1e-6,.826,.054,.832,.105,.854,.136,.9,.136,.958,.118,.994]},{type:"lathe",noise:.015,segments:14,vertices:[1e-6,.01,.069,.022,.13,.068,.178,.18,.189,.32,.191,.59,.193,.75,.138,.79,.018,.808,.018,.996]},{type:"lathe",noise:.015,segments:14,vertices:[1e-6,.436,.126,.46,.201,.57,.219,.72,.154,.846,.028,.884,.034,.996]}],apparatus:[{type:"lathe",segments:10,vertices:[1e-6,.23,.042,.23,.069,.36,.038,.362,.038,.372,.06,.372,.073,.572,.024,.572,.024,.67,.069,.67,.075,.722,.097,.724,.105,.852,.083,.902,.065,.902,.065,.924,.128,.924,.146,.996]},{type:"lathe",segments:16,vertices:[1e-6,.232,.229,.182,.486,.07,.356,.182,.213,.242,.154,.242,.144,.262,.178,.262,.126,.314,.04,.328,.038,.374,.058,.374,.071,.408,.026,.406,.03,.42,.091,.418,.034,.496,.01,.498,.03,.506,.014,.998]}],mushrooms:[{type:"lathe",noise:.02,segments:14,vertices:[1e-6,.006,.13,.018,.341,.084,.437,.144,.492,.234,.484,.246,.276,.232,.107,.284,.046,.346,.062,.852,.097,.956,.166,.998]},{type:"lathe",noise:.02,segments:10,vertices:[1e-6,.562,.091,.572,.172,.61,.223,.666,.256,.74,.258,.806,.246,.824,.062,.826,.065,.948,.097,.998]},{type:"lathe",noise:.02,segments:10,vertices:[1e-6,.768,.099,.772,.219,.802,.306,.844,.352,.886,.352,.908,.118,.904,.107,.93,.115,.966,.14,.996]}]},this.assets)for(var t=0;t<this.assets[e].length;t++){var n=this.assets[e][t];if("mesh"==n.type)for(var i=0,r=n.vertices.length;i<r;i++)n.vertices[i]/=1e3}this.userFog=this.el.sceneEl.getAttribute("fog"),this.sky=document.createElement("a-sky"),this.sky.setAttribute("radius",this.STAGE_SIZE),this.sky.setAttribute("theta-length",110),this.stars=null,this.groundMaterial=null,this.ground=document.createElement("a-entity"),this.ground.setAttribute("rotation","-90 0 0"),this.ground.classList.add("environmentGround"),this.groundCanvas=null,this.groundTexture=null,this.groundMaterial=null,this.groundGeometry=null,this.dressing=document.createElement("a-entity"),this.dressing.classList.add("environmentDressing"),this.gridCanvas=null,this.gridTexture=null,this.hemilight=document.createElement("a-entity"),this.hemilight.setAttribute("position","0 50 0"),this.hemilight.setAttribute("light",{type:"hemisphere",color:"#CEE4F0",intensity:.4}),this.sunlight=document.createElement("a-entity"),this.sunlight.setAttribute("position",this.data.lightPosition),this.sunlight.setAttribute("light",{intensity:.6}),this.el.appendChild(this.hemilight),this.el.appendChild(this.sunlight),this.el.appendChild(this.ground),this.el.appendChild(this.dressing),this.el.appendChild(this.sky)},getFogColor:function(e,t){var n;if("color"==e||"none"==e)n=new THREE.Color(this.data.skyColor);else if("gradient"==e)n=new THREE.Color(this.data.horizonColor);else if("atmosphere"==e){var i=[1,.5,.22,.1,.05,0],r=["#C0CDCF","#81ADC5","#525e62","#2a2d2d","#141616","#000"];if(t<=0)return"#000";t=Math.min(1,t);for(var o=0;o<i.length;o++)if(t>i[o]){var a=new THREE.Color(r[o-1]),s=new THREE.Color(r[o]),d=(t-i[o])/(i[o-1]-i[o]);s.lerp(a,d),n=s;break}}return n.multiplyScalar(.9),n.lerp(new THREE.Color(this.data.groundColor),.3),"#"+n.getHexString()},update:function(e){if(!e||void 0===e.preset||e.preset!==this.data.preset){var t=Object.assign({},this.presets[this.data.preset]);if(e&&void 0!==e.preset||Object.assign(t,this.el.components.environment.attrValue),this.el.setAttribute("environment",t),e)return;e={}}var n=this.data.skyType,i=new THREE.Vector3(this.data.lightPosition.x,this.data.lightPosition.y,this.data.lightPosition.z);if(i.normalize(),this.sunlight){if(this.sunlight.setAttribute("position",this.data.lightPosition),"atmosphere"!=n){var r=new THREE.Color(this.data.skyColor);r.r=(r.r+1)/2,r.g=(r.g+1)/2,r.b=(r.b+1)/2,this.hemilight.setAttribute("light",{color:"#"+r.getHexString()}),this.sunlight.setAttribute("light",{intensity:.6}),this.hemilight.setAttribute("light",{intensity:.6})}else this.sunlight.setAttribute("light",{intensity:.1+.5*i.y}),this.hemilight.setAttribute("light",{intensity:.1+.5*i.y});this.sunlight.setAttribute("light",{castShadow:this.data.shadow,shadowCameraLeft:-this.data.shadowSize,shadowCameraBottom:-this.data.shadowSize,shadowCameraRight:this.data.shadowSize,shadowCameraTop:this.data.shadowSize})}if(n!=e.skyType||this.data.skyColor!=e.skyColor||this.data.horizonColor!=e.horizonColor){this.sky.removeAttribute("material");var o={};o.shader={none:"flat",color:"flat",gradient:"gradientshader",atmosphere:"skyshader"}[n],this.stars&&this.stars.setAttribute("visible","atmosphere"==n),"color"==n?(o.color=this.data.skyColor,o.fog=!1):"gradient"==n&&(o.topColor=this.data.skyColor,o.bottomColor=this.data.horizonColor),this.sky.setAttribute("material",o)}"atmosphere"==n&&(this.sky.setAttribute("material",{sunPosition:i}),this.setStars(2e3*(1-Math.max(0,8*(i.y+.08))))),this.data.lighting!==e.lighting&&(this.sunlight.setAttribute("light",{type:"point"==this.data.lighting?"point":"directional"}),this.sunlight.setAttribute("visible","none"!==this.data.lighting),this.hemilight.setAttribute("visible","none"!==this.data.lighting));var a=!this.groundGeometry||this.data.seed!=e.seed||this.data.ground!=e.ground||this.data.playArea!=e.playArea||this.data.flatShading!=e.flatShading;(a||this.data.groundColor!=e.groundColor||this.data.groundColor2!=e.groundColor2||this.data.groundYScale!=e.groundYScale||this.data.groundTexture!=e.groundTexture||this.data.gridColor!=e.gridColor||this.data.grid!=e.grid)&&(this.updateGround(a),this.hemilight&&this.hemilight.setAttribute("light",{groundColor:this.data.groundColor})),this.data.seed==e.seed&&this.data.dressingOnPlayArea==e.dressingOnPlayArea&&this.data.dressing==e.dressing&&this.data.flatShading==e.flatShading&&this.data.dressingAmount==e.dressingAmount&&this.data.dressingScale==e.dressingScale&&this.data.dressingColor==e.dressingColor&&this.data.dressingVariance.x==e.dressingVariance.x&&this.data.dressingVariance.y==e.dressingVariance.y&&this.data.dressingVariance.z==e.dressingVariance.z&&this.data.dressingUniformScale==e.dressingUniformScale||this.updateDressing(),this.sky.setAttribute("visible","none"!==n),this.el.setAttribute("visible",this.data.active),this.data.active||(this.userFog?this.el.sceneEl.setAttribute("fog",this.userFog):this.el.sceneEl.removeAttribute("fog")),this.dumpParametersDiff()},logPreset:function(){var e="{";for(var t in this.schema)if("preset"!=t){e+=t+": ";var n=this.schema[t].type;e+="vec3"==n?"{ x: "+this.data[t].x+", y: "+this.data[t].y+", z: "+this.data[t].z+"}":"string"==n||"color"==n?'"'+this.data[t]+'"':this.data[t],e+=", "}e+="}"},dumpParametersDiff:function(){function e(e){return Math.floor(1e3*e)/1e3}var t=[],n="none"!=this.data.preset&&this.presets[this.data.preset];for(var i in n&&t.push("preset: "+this.data.preset),this.schema)if(!("preset"==i||n&&void 0===n[i])){var r=n?n[i]:this.schema[i].default,o=this.data[i];if("vec3"==this.schema[i].type){var a=r;"string"==typeof r&&(a={x:(r=r.split(" "))[0],y:r[1],z:r[2]}),e(a.x)==e(o.x)&&e(a.y)==e(o.y)&&e(a.z)==e(o.z)||t.push(i+": "+e(o.x)+" "+e(o.y)+" "+e(o.z))}else r!=o&&("number"==this.schema[i].type&&(o=e(o)),t.push(i+": "+o))}},random:function(e){return parseFloat("0."+Math.sin(9999*this.data.seed*e).toString().substr(7))},updateGround:function(e){if(e){var t="none"!=this.data.ground;if(this.ground.setAttribute("visible",t),!t)return;this.groundGeometry||(this.groundGeometry=new THREE.PlaneGeometry(this.STAGE_SIZE+2,this.STAGE_SIZE+2,63,63));for(var i=new n,r=this.groundGeometry.vertices,o=this.groundGeometry.vertices.length,a=0,s=0,d=0;a<o;a++)if("flat"!=this.data.ground){var l;switch(this.data.ground){case"hills":l=Math.max(0,i.noise(s,d,0));break;case"canyon":l=.2+.8*i.noise(s,d,0),l=Math.min(1,10*Math.pow(l,2));break;case"spikes":l=this.random(a)<.02?this.random(a+1):0;break;case"noise":l=this.random(a)<.35?this.random(a+1):0}l+=.1*this.random(a+2);var c=2*s/10-1,u=2*d/10-1,h=this.data.playArea;l*=(c=Math.max(0,Math.min(1,(Math.abs(c)-(h-.9))*(1/h))))>(u=Math.max(0,Math.min(1,(Math.abs(u)-(h-.9))*(1/h))))?c:u,r[a].z=l,(s+=10/64)>=10&&(s=0,d+=10/64)}else r[a].z=0;this.groundGeometry.computeFaceNormals(),this.data.flatShading?this.groundGeometry.computeFlatVertexNormals():this.groundGeometry.computeVertexNormals(),this.groundGeometry.verticesNeedUpdate=!0,this.groundGeometry.normalsNeedUpdate=!0}this.ground.setAttribute("scale",{z:this.data.groundYScale});var p=this.STAGE_SIZE/20;this.groundCanvas&&2048==this.groundCanvas.width||(this.gridCanvas=document.createElement("canvas"),this.gridCanvas.width=2048,this.gridCanvas.height=2048,this.gridTexture=new THREE.Texture(this.gridCanvas),this.gridTexture.wrapS=THREE.RepeatWrapping,this.gridTexture.wrapT=THREE.RepeatWrapping,this.gridTexture.repeat.set(p,p),this.groundCanvas=document.createElement("canvas"),this.groundCanvas.width=2048,this.groundCanvas.height=2048,this.groundTexture=new THREE.Texture(this.groundCanvas),this.groundTexture.wrapS=THREE.RepeatWrapping,this.groundTexture.wrapT=THREE.RepeatWrapping,this.groundTexture.repeat.set(p,p),this.groundMaterial=new THREE.MeshLambertMaterial({map:this.groundTexture,emissive:new THREE.Color(16777215),emissiveMap:this.gridTexture,flatShading:this.data.flatShading?THREE.FlatShading:THREE.SmoothShading}));var f=this.groundCanvas.getContext("2d"),m=this.gridCanvas.getContext("2d");if(this.drawTexture(f,2048,20),m.fillStyle="#000000",m.fillRect(0,0,2048,2048),this.drawGrid(m,2048,20),this.groundTexture.needsUpdate=!0,this.gridTexture.needsUpdate=!0,e){var g=new THREE.Mesh(this.groundGeometry,this.groundMaterial);this.ground.setObject3D("mesh",g)}else this.ground.getObject3D("mesh").material=this.groundMaterial;this.ground.setAttribute("shadow",{cast:!1,receive:this.data.shadow})},drawGrid:function(e,t,n){if("none"!=this.data.grid){var i,r,o,a=Math.floor(n/2),s=t/(n/2);switch(e.fillStyle=this.data.gridColor,this.data.grid){case"1x1":case"2x2":for("1x1"==this.data.grid&&(a*=2,s=t/n),i=0;i<a;i++)o=Math.floor(i*s),e.fillRect(0,o,t,1),e.fillRect(o,0,1,t);break;case"crosses":var d=Math.floor(s/20);for(i=0;i<a+1;i++)for(o=Math.floor(i*s),r=0;r<a+1;r++){var l=Math.floor(r*s-d);e.fillRect(l,o,2*d,1),e.fillRect(o,l,1,2*d)}break;case"dots":for(i=0;i<a+1;i++)for(r=0;r<a+1;r++)e.beginPath(),e.arc(Math.floor(r*s),Math.floor(i*s),4,0,2*Math.PI),e.fill();break;case"xlines":for(i=0;i<a;i++)e.fillRect(Math.floor(i*s),0,1,t);break;case"ylines":for(i=0;i<a;i++)e.fillRect(0,Math.floor(i*s),t,1)}}},drawTexture:function(e,t,i){var r,o,a,s,d,l,c;if(e.fillStyle=this.data.groundColor,e.fillRect(0,0,t,t),"none"!=this.data.groundTexture)switch(this.data.groundTexture){case"checkerboard":e.fillStyle=this.data.groundColor2;var u=Math.floor(i/2),h=t/(i/2);for(r=0;r<u+1;r+=2)for(var p=0;p<u+1;p++)e.fillRect(Math.floor((r+p%2)*h),Math.floor(p*h),Math.floor(h),Math.floor(h));break;case"squares":var f=t/16;for(a=new THREE.Color(this.data.groundColor),s=new THREE.Color(this.data.groundColor2),r=0;r<256;r++)(o=this.random(r+3)>.5?a.clone():s.clone()).addScalar(.1*this.random(r+3)-.05),e.fillStyle="#"+o.getHexString(),e.fillRect(r%16*f,Math.floor(r/16)*f,f,f);break;case"noise":d=(l=e.getImageData(0,0,t,t)).data,a=new THREE.Color(this.data.groundColor),s=new THREE.Color(this.data.groundColor2);var m=new THREE.Color(s.r-a.r,s.g-a.g,s.b-a.b),g=new n;for(r=0,p=0,c=d.length;r<c;r+=4,p++){var v=g.noise(p%t/t*3,p/t/t*3,0);d[r+0]=Math.floor(255*(a.r+m.r*v)),d[r+1]=Math.floor(255*(a.g+m.g*v)),d[r+2]=Math.floor(255*(a.b+m.b*v))}e.putImageData(l,0,0);break;case"walkernoise":var y=Math.floor(t/2),E=document.createElement("canvas");E.width=y,E.height=y;var b=E.getContext("2d");b.fillStyle=this.data.groundColor,b.fillRect(0,0,y,y),d=(l=b.getImageData(0,0,y,y)).data,a=new THREE.Color(this.data.groundColor),s=new THREE.Color(this.data.groundColor2);var x=[];for(r=0;r<1e3;r++)o=a.clone().lerp(s,Math.random()),x.push({x:Math.random()*y,y:Math.random()*y,r:Math.floor(255*o.r),g:Math.floor(255*o.g),b:Math.floor(255*o.b)});for(var w=0;w<5e3;w++)for(r=0;r<1e3;r++){var T=x[r],R=4*Math.floor(T.y*y+T.x);d[R+0]=T.r,d[R+1]=T.g,d[R+2]=T.b,T.x+=Math.floor(3*Math.random())-1,T.y+=Math.floor(3*Math.random())-1,T.x>=y&&(T.x=T.x-y),T.y>=y&&(T.y=T.y-y),T.x<0&&(T.x=y+T.x),T.y<0&&(T.y=y+T.y)}b.putImageData(l,0,0),e.drawImage(E,0,0,t,t)}},getAssetGeometry:function(e){if(!e)return null;var t,n,i,r=[],o=this;function a(e,t){for(var n=new THREE.Vector3,i=0,r=e.vertices.length;i<r;i++)n.x=(o.random(i)-.5)*t,n.y=(o.random(i+r)-.5)*t,n.z=(o.random(i+2*r)-.5)*t,e.vertices[i].add(n)}for(var s=0;s<e.length;s++)if("lathe"==e[s].type){var d=-99999,l=[];for(i=e[s].vertices,t=0;t<i.length;t+=2)l.push(new THREE.Vector2(i[t],i[t+1])),i[t+1]>d&&(d=i[t+1]);(n=new THREE.LatheGeometry(l,e[s].segments||8)).applyMatrix((new THREE.Matrix4).makeRotationFromEuler(new THREE.Euler(-Math.PI,0,0))),n.applyMatrix((new THREE.Matrix4).makeTranslation(0,d,0)),e[s].noise&&a(n,e[s].noise),r.push(n)}else if("extrude"==e[s].type){var c=new THREE.Shape;for(i=e[s].vertices,t=0;t<i.length;t+=2)0==t?c.moveTo(i[t],i[t+1]):c.lineTo(i[t],i[t+1]);(n=new THREE.ExtrudeGeometry(c,{amount:1,bevelEnabled:!1})).applyMatrix((new THREE.Matrix4).makeRotationFromEuler(new THREE.Euler(-Math.PI/2,0,0))),e[s].noise&&a(n,e[s].noise),r.push(n)}else if("mesh"==e[s].type){n=new THREE.Geometry,i=e[s].vertices;for(var u=e[s].faces,h=0;h<i.length;h+=3)n.vertices.push(new THREE.Vector3(i[h],i[h+1],i[h+2]));for(var p=0;p<u.length;p+=3)n.faces.push(new THREE.Face3(u[p],u[p+1],u[p+2]));this.data.flatShading||e[s].flatShading?n.computeFaceNormals():n.computeVertexNormals(),e[s].mirror&&n.merge(n,(new THREE.Matrix4).makeRotationFromEuler(new THREE.Euler(0,Math.PI,0))),e[s].noise&&a(n,e[s].noise),r.push(n)}return r},updateDressing:function(){var e=new THREE.Object3D;if(this.dressing.setAttribute("visible","none"!=this.data.dressing),"none"!=this.data.dressing){var t,n=new THREE.Geometry;switch(this.data.dressing){case"cubes":(t=[new THREE.BoxGeometry(1,1,1)])[0].applyMatrix((new THREE.Matrix4).makeTranslation(0,.5,0));break;case"pyramids":(t=[new THREE.ConeGeometry(1,1,4,1,!0)])[0].applyMatrix((new THREE.Matrix4).makeTranslation(0,.5,0));break;case"cylinders":(t=[new THREE.CylinderGeometry(.5,.5,1,8,1,!0)])[0].applyMatrix((new THREE.Matrix4).makeTranslation(0,.5,0));break;default:if(!(t=this.getAssetGeometry(this.assets[this.data.dressing])))return}for(var i=0,r=88343;i<this.data.dressingAmount;i++,r++){var o,a=t[Math.floor(this.random(33+i)*t.length)],s=this.data.dressingScale,d=new THREE.Vector3(this.data.dressingVariance.x,this.data.dressingVariance.y,this.data.dressingVariance.z);o=this.random(r)<this.data.dressingOnPlayArea?15*this.random(r+1):10+Math.max(d.x,d.z)+10*this.random(r+1)+this.random(r+2)*this.STAGE_SIZE/3;var l=this.random(r+3)*Math.PI*2,c=new THREE.Matrix4,u=this.random(r+4),h=this.data.dressingUniformScale;c.compose(new THREE.Vector3(Math.cos(l)*o,0,Math.sin(l)*o),(new THREE.Quaternion).setFromAxisAngle(new THREE.Vector3(0,1,0),(this.random(r+5)-.5)*d.length()*Math.PI*2),new THREE.Vector3(s+(h?u:this.random(r+6))*d.x,s+(h?u:this.random(r+7))*d.y,s+(h?u:this.random(r+8))*d.z)),n.merge(a,c)}var p=new THREE.BufferGeometry;p.fromGeometry(n);var f=new THREE.MeshLambertMaterial({color:new THREE.Color(this.data.dressingColor),vertexColors:THREE.VertexColors});this.data.flatShading&&p.computeVertexNormals();var m=new THREE.Mesh(p,f);e.add(m),this.dressing.setObject3D("mesh",e)}},createStars:function(){for(var e=new THREE.BufferGeometry,t=new Float32Array(6e3),n=this.STAGE_SIZE-1,i=new THREE.Vector3,r=0;r<t.length;r+=3)i.set(this.random(r+23)-.5,this.random(r+24),this.random(r+25)-.5),i.normalize(),i.multiplyScalar(n),t[r]=i.x,t[r+1]=i.y,t[r+2]=i.z;e.addAttribute("position",new THREE.BufferAttribute(t,3)),e.setDrawRange(0,0);var o=new THREE.PointsMaterial({size:.01,color:13421772,fog:!1});this.stars.setObject3D("mesh",new THREE.Points(e,o))},setStars:function(e){this.stars||(this.stars=document.createElement("a-entity"),this.stars.id="stars",this.createStars(),this.el.appendChild(this.stars)),e=Math.floor(Math.min(2e3,Math.max(0,e))),this.stars.getObject3D("mesh").geometry.setDrawRange(0,e)}}),AFRAME.registerShader("skyshader",{schema:{luminance:{type:"number",default:1,min:0,max:2,is:"uniform"},turbidity:{type:"number",default:2,min:0,max:20,is:"uniform"},reileigh:{type:"number",default:1,min:0,max:4,is:"uniform"},mieCoefficient:{type:"number",default:.005,min:0,max:.1,is:"uniform"},mieDirectionalG:{type:"number",default:.8,min:0,max:1,is:"uniform"},sunPosition:{type:"vec3",default:{x:0,y:0,z:-1},is:"uniform"},color:{type:"color",default:"#fff"}},vertexShader:["varying vec3 vWorldPosition;","void main() {","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vWorldPosition = worldPosition.xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D skySampler;","uniform vec3 sunPosition;","varying vec3 vWorldPosition;","vec3 cameraPos = vec3(0., 0., 0.);","uniform float luminance;","uniform float turbidity;","uniform float reileigh;","uniform float mieCoefficient;","uniform float mieDirectionalG;","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float pn = 0.035;","const vec3 lambda = vec3(680E-9, 550E-9, 450E-9);","const vec3 K = vec3(0.686, 0.678, 0.666);","const float v = 4.0;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const vec3 up = vec3(0.0, 1.0, 0.0);","const float EE = 1000.0;","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float cutoffAngle = pi/1.95;","const float steepness = 1.5;","vec3 totalRayleigh(vec3 lambda)","{","return (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn));","}","vec3 simplifiedRayleigh()","{","return 0.0005 / vec3(94, 40, 18);","}","float rayleighPhase(float cosTheta)","{   ","return (3.0 / (16.0*pi)) * (1.0 + pow(cosTheta, 2.0));","}","vec3 totalMie(vec3 lambda, vec3 K, float T)","{","float c = (0.2 * T ) * 10E-18;","return 0.434 * c * pi * pow((2.0 * pi) / lambda, vec3(v - 2.0)) * K;","}","float hgPhase(float cosTheta, float g)","{","return (1.0 / (4.0*pi)) * ((1.0 - pow(g, 2.0)) / pow(1.0 - 2.0*g*cosTheta + pow(g, 2.0), 1.5));","}","float sunIntensity(float zenithAngleCos)","{","return EE * max(0.0, 1.0 - exp(-((cutoffAngle - acos(zenithAngleCos))/steepness)));","}","// Filmic ToneMapping http://filmicgames.com/archives/75","float A = 0.15;","float B = 0.50;","float C = 0.10;","float D = 0.20;","float E = 0.02;","float F = 0.30;","float W = 1000.0;","vec3 Uncharted2Tonemap(vec3 x)","{","return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;","}","void main() ","{","float sunfade = 1.0-clamp(1.0-exp((sunPosition.y/450000.0)),0.0,1.0);","float reileighCoefficient = reileigh - (1.0* (1.0-sunfade));","vec3 sunDirection = normalize(sunPosition);","float sunE = sunIntensity(dot(sunDirection, up));","vec3 betaR = simplifiedRayleigh() * reileighCoefficient;","vec3 betaM = totalMie(lambda, K, turbidity) * mieCoefficient;","float zenithAngle = acos(max(0.0, dot(up, normalize(vWorldPosition - cameraPos))));","float sR = rayleighZenithLength / (cos(zenithAngle) + 0.15 * pow(93.885 - ((zenithAngle * 180.0) / pi), -1.253));","float sM = mieZenithLength / (cos(zenithAngle) + 0.15 * pow(93.885 - ((zenithAngle * 180.0) / pi), -1.253));","vec3 Fex = exp(-(betaR * sR + betaM * sM));","float cosTheta = dot(normalize(vWorldPosition - cameraPos), sunDirection);","float rPhase = rayleighPhase(cosTheta*0.5+0.5);","vec3 betaRTheta = betaR * rPhase;","float mPhase = hgPhase(cosTheta, mieDirectionalG);","vec3 betaMTheta = betaM * mPhase;","vec3 Lin = pow(sunE * ((betaRTheta + betaMTheta) / (betaR + betaM)) * (1.0 - Fex),vec3(1.5));","Lin *= mix(vec3(1.0),pow(sunE * ((betaRTheta + betaMTheta) / (betaR + betaM)) * Fex,vec3(1.0/2.0)),clamp(pow(1.0-dot(up, sunDirection),5.0),0.0,1.0));","vec3 direction = normalize(vWorldPosition - cameraPos);","float theta = acos(direction.y); // elevation --\x3e y-axis, [-pi/2, pi/2]","float phi = atan(direction.z, direction.x); // azimuth --\x3e x-axis [-pi/2, pi/2]","vec2 uv = vec2(phi, theta) / vec2(2.0*pi, pi) + vec2(0.5, 0.0);","vec3 L0 = vec3(0.1) * Fex;","float sundisk = smoothstep(sunAngularDiameterCos,sunAngularDiameterCos+0.00002,cosTheta);","L0 += (sunE * 19000.0 * Fex)*sundisk;","vec3 whiteScale = 1.0/Uncharted2Tonemap(vec3(W));","vec3 texColor = (Lin+L0);   ","texColor *= 0.04 ;","texColor += vec3(0.0,0.001,0.0025)*0.3;","float g_fMaxLuminance = 1.0;","float fLumScaled = 0.1 / luminance;     ","float fLumCompressed = (fLumScaled * (1.0 + (fLumScaled / (g_fMaxLuminance * g_fMaxLuminance)))) / (1.0 + fLumScaled); ","float ExposureBias = fLumCompressed;","vec3 curr = Uncharted2Tonemap((log2(2.0/pow(luminance,4.0)))*texColor);","vec3 color = curr*whiteScale;","vec3 retColor = pow(color,vec3(1.0/(1.2+(1.2*sunfade))));","gl_FragColor.rgb = retColor;","gl_FragColor.a = 1.0;","}"].join("\n")}),AFRAME.registerShader("gradientshader",{schema:{topColor:{type:"color",default:"1 0 0",is:"uniform"},bottomColor:{type:"color",default:"0 0 1",is:"uniform"}},vertexShader:["varying vec3 vWorldPosition;","void main() {"," vec4 worldPosition = modelMatrix * vec4( position, 1.0 );"," vWorldPosition = worldPosition.xyz;"," gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 bottomColor;","uniform vec3 topColor;","uniform float offset;","varying vec3 vWorldPosition;","void main() {"," float h = normalize( vWorldPosition ).y;"," gl_FragColor = vec4( mix( bottomColor, topColor, max( pow( max(h, 0.0 ), 0.8 ), 0.0 ) ), 1.0 );","}"].join("\n")});var n=function(e){var t;for(void 0==e&&(e=Math),this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.p=[],t=0;t<256;t++)this.p[t]=Math.floor(256*e.random(666));for(this.perm=[],t=0;t<512;t++)this.perm[t]=this.p[255&t]};n.prototype.dot=function(e,t,n,i){return e[0]*t+e[1]*n+e[2]*i},n.prototype.mix=function(e,t,n){return(1-n)*e+n*t},n.prototype.fade=function(e){return e*e*e*(e*(6*e-15)+10)},n.prototype.noise=function(e,t,n){var i=Math.floor(e),r=Math.floor(t),o=Math.floor(n);e-=i,t-=r,n-=o,i&=255,r&=255,o&=255;var a=this.perm[i+this.perm[r+this.perm[o]]]%12,s=this.perm[i+this.perm[r+this.perm[o+1]]]%12,d=this.perm[i+this.perm[r+1+this.perm[o]]]%12,l=this.perm[i+this.perm[r+1+this.perm[o+1]]]%12,c=this.perm[i+1+this.perm[r+this.perm[o]]]%12,u=this.perm[i+1+this.perm[r+this.perm[o+1]]]%12,h=this.perm[i+1+this.perm[r+1+this.perm[o]]]%12,p=this.perm[i+1+this.perm[r+1+this.perm[o+1]]]%12,f=this.dot(this.grad3[a],e,t,n),m=this.dot(this.grad3[c],e-1,t,n),g=this.dot(this.grad3[d],e,t-1,n),v=this.dot(this.grad3[h],e-1,t-1,n),y=this.dot(this.grad3[s],e,t,n-1),E=this.dot(this.grad3[u],e-1,t,n-1),b=this.dot(this.grad3[l],e,t-1,n-1),x=this.dot(this.grad3[p],e-1,t-1,n-1),w=this.fade(e),T=this.fade(t),R=this.fade(n),C=this.mix(f,m,w),A=this.mix(y,E,w),M=this.mix(g,v,w),S=this.mix(b,x,w),H=this.mix(C,M,T),k=this.mix(A,S,T);return this.mix(H,k,R)}},function(e,t,n){const i=n(4);var r=function(e){this.el.object3D.traverse(function(t){t.material&&(t.material.transparent=!0,t.material.opacity=e)});for(let t of this.textEntities)t.setAttribute("opacity",e)};AFRAME.registerComponent("fadein",{schema:{duration:{type:"int",default:200}},init:function(){this.textEntities=this.el.querySelectorAll("a-text"),this.opacityUpdate(0),this.start=null},tick:function(e){this.start||(this.start=e);var t=Math.min((e-this.start)/this.data.duration,1);this.opacityUpdate(t),1===t&&(this.el.removeAttribute("fadein"),i.emit(this.el,"animationend"))},opacityUpdate:r}),AFRAME.registerComponent("fadeout",{schema:{duration:{type:"int",default:200},forceFade:{type:"bool",default:!1}},init:function(){this.textEntities=this.el.querySelectorAll("a-text"),this.opacity=this.data.forceFade?1:this.el.getAttribute("opacity")||1,this.opacityUpdate(this.opacity),this.start=null},tick:function(e){this.start||(this.start=e);var t=this.opacity-Math.min((e-this.start)/this.data.duration,this.opacity);this.opacityUpdate(t),0===t&&(this.el.removeAttribute("fadeout"),i.emit(this.el,"animationend"))},opacityUpdate:r}),AFRAME.registerComponent("show",{init:function(){this.textEntities=this.el.querySelectorAll("a-text"),this.opacityUpdate(1),this.el.removeAttribute("show")},opacityUpdate:r}),AFRAME.registerComponent("hide",{init:function(){this.textEntities=this.el.querySelectorAll("a-text"),this.opacityUpdate(0),this.el.removeAttribute("hide")},opacityUpdate:r})},function(e,t,n){const i=n(4);AFRAME.registerComponent("app-door",{schema:{},init(){const e=this.el.getObject3D("mesh");this.cameraEl=document.querySelector("a-camera"),this.doorOpenned=!1,this.cameraSpeed=0,this.emitted=!1,this.clicked=!1,AFRAME.utils.device.isMobile()?this.el.sceneEl.canvas.addEventListener("click",this.doorMouseClick.bind(this)):(this.el.addEventListener("mouseenter",this.doorMouseEnter.bind(this)),this.el.addEventListener("mouseleave",this.doorMouseLeave.bind(this)),this.el.addEventListener("click",this.doorMouseClick.bind(this))),e?this.loadDoorAnimation(e):this.el.addEventListener("model-loaded",e=>{this.loadDoorAnimation(e.detail.model)})},tick(e,t){if(this.emitted)return;if(this.mixer&&!isNaN(t)&&this.mixer.update(t/1e3),!this.doorOpenned)return;const n=this.cameraEl.object3D.position;if(n.z<-3.9){this.emitted=!0;const e=document.querySelector("#mainScene");return e.parentNode.removeChild(e),void i.emit(this.el,"doorOpenned")}n.z-=this.cameraSpeed,this.cameraSpeed>.08||(this.cameraSpeed+=.002)},loadDoorAnimation(e){this.mixer=new THREE.AnimationMixer(e);const t=this.action=this.mixer.clipAction(e.animations[0]);t.setLoop(THREE.LoopOnce),t.clampWhenFinished=!0},doorMouseEnter(){if(window.store.modalOpen)return;document.querySelector(".app").classList.add("click")},doorMouseLeave(){document.querySelector(".app").classList.remove("click")},doorMouseClick(){if(!this.action||this.clicked)return;this.clicked=!0,AFRAME.utils.device.isMobile()?setTimeout(()=>{this.action.play()},1200):this.action.play(),document.querySelector("#doorShadow").setAttribute("fadeout",{duration:2300}),setTimeout(()=>{this.doorOpenned=window.store.doorOpenned=!0},500),i.emit(this.el,"doorOpening")}})},function(e,t){const n=(new THREE.TextureLoader).load("/assets/textures/star.png");var i=window.innerWidth,r=(window.innerHeight,i<500);AFRAME.registerComponent("stars",{schema:{},init(){this.particles=[],this.el.sceneEl.addEventListener("loaded",()=>{this.el.setAttribute("position","-2.5 -1 0"),this.sceneEl=this.el.sceneEl,this.scene=this.el.sceneEl.object3D,setTimeout(()=>this.setUp(),0)})},tick(e){if(this.el.parentNode.object3D.visible)for(var t=0;t<this.particles.length;t++)this.particles[t].update(this)},setUp(){this.particles=[];for(var e=0;e<(r?70:100);e++)this.particles.push(new o(this.el.object3D))}});class o{constructor(e,t,i){var r=this.radius=.1*Math.random()+.08;this.color=new THREE.Color("hsl("+(50*Math.random()+180)+",100%,90%)");var o=new THREE.MeshBasicMaterial({color:this.color,transparent:!0,map:n,side:THREE.DoubleSide,flatShading:!0,transparent:!0,depthTest:!1});this.mesh=new THREE.Mesh(new THREE.PlaneGeometry(1,1),o),this.mesh.scale.set(r,r,r),this.percent=Math.random(),this.speed=.003*Math.random()+.006,this.setPosition(),e.add(this.mesh)}setPosition(){this.posZ=10*Math.random()-10,this.mesh.position.set(5*Math.random(),5*Math.random(),this.posZ)}update(){this.percent+=this.speed,this.percent>1&&(this.percent=0,this.setPosition()),this.percent<.5?this.mesh.material.opacity=2*this.percent:this.mesh.material.opacity=1-2*(this.percent-.5),this.mesh.position.z=this.posZ+6*this.percent}}},function(e,t){THREE.LoaderUtils={extractUrlBase:THREE.Loader.prototype.extractUrlBase,decodeText:function(e){return(new TextDecoder).decode(e)}},function(){function e(e){var t,n=e.Content,i=e.RelativeFilename||e.Filename,r=i.slice(i.lastIndexOf(".")+1).toLowerCase();switch(r){case"bmp":t="image/bmp";break;case"jpg":case"jpeg":t="image/jpeg";break;case"png":t="image/png";break;case"tif":t="image/tiff";break;default:return void console.warn('FBXLoader: Image type "'+r+'" is not supported.')}if("string"==typeof n)return"data:"+t+";base64,"+n;var o=new Uint8Array(n);return window.URL.createObjectURL(new Blob([o],{type:t}))}function t(e,t,n,i){var r=function(e,t,n,i){var r,o=t.path,a=i.get(e.id).children;void 0!==a&&a.length>0&&void 0!==n[a[0].ID]&&(0!==(r=n[a[0].ID]).indexOf("blob:")&&0!==r.indexOf("data:")||t.setPath(void 0));var s=t.load(r);return t.setPath(o),s}(e,t,n,i);r.ID=e.id,r.name=e.attrName;var o=e.WrapModeU,a=e.WrapModeV,s=void 0!==o?o.value:0,d=void 0!==a?a.value:0;if(r.wrapS=0===s?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,r.wrapT=0===d?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,"Scaling"in e){var l=e.Scaling.value;r.repeat.x=l[0],r.repeat.y=l[1]}return r}function n(e,t,n,r){var o=t.id,a=t.attrName,s=t.ShadingModel;if("object"==typeof s&&(s=s.value),!r.has(o))return null;var d,l=function(e,t,n,r,o){var a={};t.BumpFactor&&(a.bumpScale=t.BumpFactor.value);t.Diffuse&&(a.color=(new THREE.Color).fromArray(t.Diffuse.value));t.DisplacementFactor&&(a.displacementScale=t.DisplacementFactor.value);t.ReflectionFactor&&(a.reflectivity=t.ReflectionFactor.value);t.Specular&&(a.specular=(new THREE.Color).fromArray(t.Specular.value));t.Shininess&&(a.shininess=t.Shininess.value);t.Emissive&&(a.emissive=(new THREE.Color).fromArray(t.Emissive.value));t.EmissiveFactor&&(a.emissiveIntensity=parseFloat(t.EmissiveFactor.value));t.Opacity&&(a.opacity=parseFloat(t.Opacity.value));a.opacity<1&&(a.transparent=!0);return o.get(r).children.forEach(function(t){var r=t.relationship;switch(r){case"Bump":a.bumpMap=n.get(t.ID);break;case"DiffuseColor":a.map=i(e,n,t.ID,o);break;case"DisplacementColor":a.displacementMap=i(e,n,t.ID,o);break;case"EmissiveColor":a.emissiveMap=i(e,n,t.ID,o);break;case"NormalMap":a.normalMap=i(e,n,t.ID,o);break;case"ReflectionColor":a.envMap=i(e,n,t.ID,o),a.envMap.mapping=THREE.EquirectangularReflectionMapping;break;case"SpecularColor":a.specularMap=i(e,n,t.ID,o);break;case"TransparentColor":a.alphaMap=i(e,n,t.ID,o),a.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",r)}}),a}(e,t,n,o,r);switch(s.toLowerCase()){case"phong":d=new THREE.MeshPhongMaterial;break;case"lambert":d=new THREE.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),d=new THREE.MeshPhongMaterial({color:3342591})}return d.setValues(l),d.name=a,d}function i(e,t,n,i){return"LayeredTexture"in e.Objects&&n in e.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),n=i.get(n).children[0].ID),t.get(n)}function r(e,t){var n=[];return e.children.forEach(function(e){var i=t[e.ID];if("Cluster"===i.attrType){var r={ID:e.ID,indices:[],weights:[],transform:(new THREE.Matrix4).fromArray(i.Transform.a),transformLink:(new THREE.Matrix4).fromArray(i.TransformLink.a),linkMode:i.Mode};"Indexes"in i&&(r.indices=i.Indexes.a,r.weights=i.Weights.a),n.push(r)}}),{rawBones:n,bones:[]}}function o(e,t,n,i){switch(n.attrType){case"Mesh":return function(e,t,n,i){var r=t.parents.map(function(t){return e.Objects.Model[t.ID]});if(0===r.length)return;var o=t.children.reduce(function(e,t){return void 0!==i[t.ID]&&(e=i[t.ID]),e},null),s=new THREE.Matrix4,d=r[0];if("GeometricRotation"in d){var c=d.GeometricRotation.value.map(THREE.Math.degToRad);c[3]="ZYX",s.makeRotationFromEuler((new THREE.Euler).fromArray(c))}"GeometricTranslation"in d&&s.setPosition((new THREE.Vector3).fromArray(d.GeometricTranslation.value));return function(e,t,n,i,r){var o=n.Vertices.a,s=n.PolygonVertexIndex.a,d=[],c=[],u=[],h=[],p=[],f=[],m=[];if(n.LayerElementColor)var g=function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,i=e.Colors.a,r=[];"IndexToDirect"===n&&(r=e.ColorIndex.a);return{dataSize:4,buffer:i,indices:r,mappingType:t,referenceType:n}}(n.LayerElementColor[0]);if(n.LayerElementMaterial)var v=function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};for(var i=e.Materials.a,r=[],o=0;o<i.length;++o)r.push(o);return{dataSize:1,buffer:i,indices:r,mappingType:t,referenceType:n}}(n.LayerElementMaterial[0]);if(n.LayerElementNormal)var y=function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,i=e.Normals.a,r=[];"IndexToDirect"===n&&("NormalIndex"in e?r=e.NormalIndex.a:"NormalsIndex"in e&&(r=e.NormalsIndex.a));return{dataSize:3,buffer:i,indices:r,mappingType:t,referenceType:n}}(n.LayerElementNormal[0]);if(n.LayerElementUV)for(var E=[],b=0;n.LayerElementUV[b];)E.push(a(n.LayerElementUV[b])),b++;var x={};null!==i&&i.rawBones.forEach(function(e,t){e.indices.forEach(function(n,i){void 0===x[n]&&(x[n]=[]),x[n].push({id:t,weight:e.weights[i]})})});var w=0,T=0,R=!1,C=[],A=[],M=[],S=[],H=[],k=[];s.forEach(function(e,t){var n=!1;e<0&&(e^=-1,s[t]=e,n=!0);var r=[],a=[];if(C.push(3*e,3*e+1,3*e+2),g){var b=l(t,w,e,g);M.push(b[0],b[1],b[2])}if(i){if(void 0!==x[e]&&x[e].forEach(function(e){a.push(e.weight),r.push(e.id)}),a.length>4){R||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),R=!0);var F=[0,0,0,0],L=[0,0,0,0];a.forEach(function(e,t){var n=e,i=r[t];L.forEach(function(e,t,r){if(n>e){r[t]=n,n=e;var o=F[t];F[t]=i,i=o}})}),r=F,a=L}for(;a.length<4;)a.push(0),r.push(0);for(var P=0;P<4;++P)H.push(a[P]),k.push(r[P])}if(y){var b=l(t,w,e,y);A.push(b[0],b[1],b[2])}if(v&&"AllSame"!==v.mappingType)var I=l(t,w,e,v)[0];if(E&&E.forEach(function(n,i){var r=l(t,w,e,n);void 0===S[i]&&(S[i]=[]),S[i].push(r[0]),S[i].push(r[1])}),T++,n){for(var P=2;P<T;P++)d.push(o[C[0]]),d.push(o[C[1]]),d.push(o[C[2]]),d.push(o[C[3*(P-1)]]),d.push(o[C[3*(P-1)+1]]),d.push(o[C[3*(P-1)+2]]),d.push(o[C[3*P]]),d.push(o[C[3*P+1]]),d.push(o[C[3*P+2]]),i&&(f.push(H[0]),f.push(H[1]),f.push(H[2]),f.push(H[3]),f.push(H[4*(P-1)]),f.push(H[4*(P-1)+1]),f.push(H[4*(P-1)+2]),f.push(H[4*(P-1)+3]),f.push(H[4*P]),f.push(H[4*P+1]),f.push(H[4*P+2]),f.push(H[4*P+3]),m.push(k[0]),m.push(k[1]),m.push(k[2]),m.push(k[3]),m.push(k[4*(P-1)]),m.push(k[4*(P-1)+1]),m.push(k[4*(P-1)+2]),m.push(k[4*(P-1)+3]),m.push(k[4*P]),m.push(k[4*P+1]),m.push(k[4*P+2]),m.push(k[4*P+3])),g&&(u.push(M[0]),u.push(M[1]),u.push(M[2]),u.push(M[3*(P-1)]),u.push(M[3*(P-1)+1]),u.push(M[3*(P-1)+2]),u.push(M[3*P]),u.push(M[3*P+1]),u.push(M[3*P+2])),v&&"AllSame"!==v.mappingType&&(p.push(I),p.push(I),p.push(I)),y&&(c.push(A[0]),c.push(A[1]),c.push(A[2]),c.push(A[3*(P-1)]),c.push(A[3*(P-1)+1]),c.push(A[3*(P-1)+2]),c.push(A[3*P]),c.push(A[3*P+1]),c.push(A[3*P+2])),E&&E.forEach(function(e,t){void 0===h[t]&&(h[t]=[]),h[t].push(S[t][0]),h[t].push(S[t][1]),h[t].push(S[t][2*(P-1)]),h[t].push(S[t][2*(P-1)+1]),h[t].push(S[t][2*P]),h[t].push(S[t][2*P+1])});w++,T=0,C=[],A=[],M=[],S=[],H=[],k=[]}});var F=new THREE.BufferGeometry;F.name=n.name;var L=new THREE.Float32BufferAttribute(d,3);r.applyToBufferAttribute(L),F.addAttribute("position",L),u.length>0&&F.addAttribute("color",new THREE.Float32BufferAttribute(u,3));i&&(F.addAttribute("skinIndex",new THREE.Float32BufferAttribute(m,4)),F.addAttribute("skinWeight",new THREE.Float32BufferAttribute(f,4)),F.FBX_Deformer=i);if(c.length>0){var P=new THREE.Float32BufferAttribute(c,3),I=(new THREE.Matrix3).getNormalMatrix(r);I.applyToBufferAttribute(P),F.addAttribute("normal",P)}if(h.forEach(function(e,t){var n="uv"+(t+1).toString();0===t&&(n="uv"),F.addAttribute(n,new THREE.Float32BufferAttribute(h[t],2))}),v&&"AllSame"!==v.mappingType){var O=p[0],z=0;if(p.forEach(function(e,t){e!==O&&(F.addGroup(z,t-z,O),O=e,z=t)}),F.groups.length>0){var D=F.groups[F.groups.length-1],N=D.start+D.count;N!==p.length&&F.addGroup(N,p.length-N,O)}0===F.groups.length&&F.addGroup(0,p.length,p[0])}return F}(0,0,n,o,s)}(e,t,n,i);case"NurbsCurve":return function(e){if(void 0===THREE.NURBSCurve)return console.error("THREE.FBXLoader: The loader relies on THREE.NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new THREE.BufferGeometry;var t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new THREE.BufferGeometry;for(var n,i,r=t-1,o=e.KnotVector.a,a=[],s=e.Points.a,d=0,l=s.length;d<l;d+=4)a.push((new THREE.Vector4).fromArray(s,d));if("Closed"===e.Form)a.push(a[0]);else if("Periodic"===e.Form){n=r,i=o.length-1-n;for(var d=0;d<r;++d)a.push(a[d])}var c=new THREE.NURBSCurve(r,o,a,n,i).getPoints(7*a.length),u=new Float32Array(3*c.length);c.forEach(function(e,t){e.toArray(u,3*t)});var h=new THREE.BufferGeometry;return h.addAttribute("position",new THREE.BufferAttribute(u,3)),h}(n)}}function a(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,i=e.UV.a,r=[];return"IndexToDirect"===n&&(r=e.UVIndex.a),{dataSize:2,buffer:i,indices:r,mappingType:t,referenceType:n}}THREE.FBXLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},Object.assign(THREE.FBXLoader.prototype,{load:function(e,t,n,i){var r=this,o=THREE.LoaderUtils.extractUrlBase(e),a=new THREE.FileLoader(this.manager);a.setResponseType("arraybuffer"),a.load(e,function(n){try{var a=r.parse(n,o);t(a)}catch(t){window.setTimeout(function(){i&&i(t),r.manager.itemError(e)},0)}},n,i)},parse:function(i,a){var s,d,l;if(l="Kaydara FBX Binary  \0",(d=i).byteLength>=l.length&&l===M(d,0,l.length))s=(new x).parse(i);else{var v=M(i);if(!function(e){var t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],n=0;function i(t){var i=e[t-1];return e=e.slice(n+t),n++,i}for(var r=0;r<t.length;++r){var o=i(1);if(o===t[r])return!1}return!0}(v))throw new Error("THREE.FBXLoader: Unknown format.");if(R(v)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+R(v));s=(new b).parse(v)}var y=function(e){var t=new Map;if("Connections"in e){var n=e.Connections.connections;n.forEach(function(e){var n=e[0],i=e[1],r=e[2];t.has(n)||t.set(n,{parents:[],children:[]});var o={ID:i,relationship:r};t.get(n).parents.push(o),t.has(i)||t.set(i,{parents:[],children:[]});var a={ID:n,relationship:r};t.get(i).children.push(a)})}return t}(s),E=function(t){var n={},i={};if("Video"in t.Objects){var r=t.Objects.Video;for(var o in r){var a=r[o],s=parseInt(o);if(n[s]=a.Filename,"Content"in a){var d=a.Content instanceof ArrayBuffer&&a.Content.byteLength>0,l="string"==typeof a.Content&&""!==a.Content;if(d||l){var c=e(r[o]);i[a.Filename]=c}}}}for(var s in n){var u=n[s];void 0!==i[u]?n[s]=i[u]:n[s]=n[s].split("\\").pop()}return n}(s),w=function(e,t,i){var r=new Map;if("Material"in e.Objects){var o=e.Objects.Material;for(var a in o){var s=n(e,o[a],t,i);null!==s&&r.set(parseInt(a),s)}}return r}(s,function(e,n,i,r){var o=new Map;if("Texture"in e.Objects){var a=e.Objects.Texture;for(var s in a){var d=t(a[s],n,i,r);o.set(parseInt(s),d)}}return o}(s,new THREE.TextureLoader(this.manager).setPath(a),E,y),y),T=function(e,t){var n={};if("Deformer"in e.Objects){var i=e.Objects.Deformer;for(var o in i){var a=i[o];if("Skin"===a.attrType){var s=t.get(parseInt(o)),d=r(s,i);d.ID=o,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),d.geometryID=s.parents[0].ID,n[o]=d}}}return n}(s,y);return function(e,t,n,i,r){var o=new THREE.Group,a=function(e,t,n,i,r){var o=new Map,a=e.Objects.Model;for(var s in a){var d=parseInt(s),l=a[s],g=r.get(d),v=c(g,t,d,l.attrName);if(!v){switch(l.attrType){case"Camera":v=u(e,g);break;case"Light":v=h(e,g);break;case"Mesh":v=p(e,g,n,i);break;case"NurbsCurve":v=f(g,n);break;case"LimbNode":case"Null":default:v=new THREE.Group}v.name=THREE.PropertyBinding.sanitizeNodeName(l.attrName),v.ID=d}m(e,v,l),o.set(d,v)}return o}(e,n,i,r,t),s=e.Objects.Model;return a.forEach(function(n){var i=s[n.ID];!function(e,t,n,i,r){if("LookAtProperty"in n){var o=i.get(t.ID).children;o.forEach(function(n){if("LookAtProperty"===n.relationship){var i=e.Objects.Model[n.ID];if("Lcl_Translation"in i){var o=i.Lcl_Translation.value;void 0!==t.target?(t.target.position.fromArray(o),r.add(t.target)):t.lookAt((new THREE.Vector3).fromArray(o))}}})}}(e,n,i,t,o),t.get(n.ID).parents.forEach(function(e){var t=a.get(e.ID);void 0!==t&&t.add(n)}),null===n.parent&&o.add(n)}),function(e,t,n,i,r){var o=function(e){var t={};if("Pose"in e.Objects){var n=e.Objects.Pose;for(var i in n)if("BindPose"===n[i].attrType){var r=n[i].PoseNode;Array.isArray(r)?r.forEach(function(e){t[e.Node]=(new THREE.Matrix4).fromArray(e.Matrix.a)}):t[r.Node]=(new THREE.Matrix4).fromArray(r.Matrix.a)}}return t}(e);for(var a in t){var s=t[a],d=r.get(parseInt(s.ID)).parents;d.forEach(function(e){if(n.has(e.ID)){var t=e.ID,a=r.get(t);a.parents.forEach(function(e){if(i.has(e.ID)){var t=i.get(e.ID);t.bind(new THREE.Skeleton(s.bones),o[e.ID])}})}})}}(e,n,i,a,t),function(e,t,n){n.animations=[];var i=function(e,t){if(void 0!==e.Objects.AnimationCurve){var n=function(e){var t=e.Objects.AnimationCurveNode,n=new Map;for(var i in t){var r=t[i];if(null!==r.attrName.match(/S|R|T/)){var o={id:r.id,attr:r.attrName,curves:{}};n.set(o.id,o)}}return n}(e);!function(e,t,n){var i=e.Objects.AnimationCurve;for(var r in i){var o={id:i[r].id,times:i[r].KeyTime.a.map(C),values:i[r].KeyValueFloat.a},a=t.get(o.id);if(void 0!==a){var s=a.parents[0].ID,d=a.parents[0].relationship,l="";if(d.match(/X/))l="x";else if(d.match(/Y/))l="y";else{if(!d.match(/Z/))continue;l="z"}n.get(s).curves[l]=o}}}(e,t,n);var i=function(e,t,n){var i=e.Objects.AnimationLayer,r=new Map;for(var o in i){var a=[],s=t.get(parseInt(o));if(void 0!==s){var d=s.children;d.forEach(function(i,r){if(n.has(i.ID)){var o=n.get(i.ID);if(void 0!==o.curves.x||void 0!==o.curves.y||void 0!==o.curves.z){if(void 0===a[r]){var s;t.get(i.ID).parents.forEach(function(e){void 0!==e.relationship&&(s=e.ID)});var d=e.Objects.Model[s.toString()],l={modelName:THREE.PropertyBinding.sanitizeNodeName(d.attrName),initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};"Lcl_Translation"in d&&(l.initialPosition=d.Lcl_Translation.value),"Lcl_Rotation"in d&&(l.initialRotation=d.Lcl_Rotation.value),"Lcl_Scaling"in d&&(l.initialScale=d.Lcl_Scaling.value),"PreRotation"in d&&(l.preRotations=d.PreRotation.value),a[r]=l}a[r][o.attr]=o}}}),r.set(parseInt(o),a)}}return r}(e,t,n);return function(e,t,n){var i=e.Objects.AnimationStack,r={};for(var o in i){var a=t.get(parseInt(o)).children;a.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var s=n.get(a[0].ID);r[o]={name:i[o].attrName,layer:s}}return r}(e,t,i)}}(e,t);if(void 0!==i)for(var r in i){var o=i[r],a=g(o);n.animations.push(a)}}(e,t,o),function(e,t){if("GlobalSettings"in e&&"AmbientColor"in e.GlobalSettings){var n=e.GlobalSettings.AmbientColor.value,i=n[0],r=n[1],o=n[2];if(0!==i||0!==r||0!==o){var a=new THREE.Color(i,r,o);t.add(new THREE.AmbientLight(a,1))}}}(e,o),o}(s,y,T,function(e,t,n){var i=new Map;if("Geometry"in e.Objects){var r=e.Objects.Geometry;for(var a in r){var s=t.get(parseInt(a)),d=o(e,s,r[a],n);i.set(parseInt(a),d)}}return i}(s,y,T),w)}});var s=[],d={ByPolygonVertex:{Direct:function(e,t,n,i){var r=e*i.dataSize,o=e*i.dataSize+i.dataSize;return S(s,i.buffer,r,o)},IndexToDirect:function(e,t,n,i){var r=i.indices[e],o=r*i.dataSize,a=r*i.dataSize+i.dataSize;return S(s,i.buffer,o,a)}},ByPolygon:{Direct:function(e,t,n,i){var r=t*i.dataSize,o=t*i.dataSize+i.dataSize;return S(s,i.buffer,r,o)},IndexToDirect:function(e,t,n,i){var r=i.indices[t],o=r*i.dataSize,a=r*i.dataSize+i.dataSize;return S(s,i.buffer,o,a)}},ByVertice:{Direct:function(e,t,n,i){var r=n*i.dataSize,o=n*i.dataSize+i.dataSize;return S(s,i.buffer,r,o)}},AllSame:{IndexToDirect:function(e,t,n,i){var r=i.indices[0]*i.dataSize,o=i.indices[0]*i.dataSize+i.dataSize;return S(s,i.buffer,r,o)}}};function l(e,t,n,i){return d[i.mappingType][i.referenceType](e,t,n,i)}function c(e,t,n,i){var r=null;return e.parents.forEach(function(e){for(var o in t){var a=t[o];a.rawBones.forEach(function(t,o){if(t.ID===e.ID){var s=r;(r=new THREE.Bone).matrixWorld.copy(t.transformLink),r.name=THREE.PropertyBinding.sanitizeNodeName(i),r.ID=n,a.bones[o]=r,null!==s&&r.add(s)}})}}),r}function u(e,t){var n,i;if(t.children.forEach(function(t){var n=e.Objects.NodeAttribute[t.ID];void 0!==n&&(i=n)}),void 0===i)n=new THREE.Object3D;else{var r=0;void 0!==i.CameraProjectionType&&1===i.CameraProjectionType.value&&(r=1);var o=1;void 0!==i.NearPlane&&(o=i.NearPlane.value/1e3);var a=1e3;void 0!==i.FarPlane&&(a=i.FarPlane.value/1e3);var s=window.innerWidth,d=window.innerHeight;void 0!==i.AspectWidth&&void 0!==i.AspectHeight&&(s=i.AspectWidth.value,d=i.AspectHeight.value);var l=s/d,c=45;void 0!==i.FieldOfView&&(c=i.FieldOfView.value);var u=i.FocalLength?i.FocalLength.value:null;switch(r){case 0:n=new THREE.PerspectiveCamera(c,l,o,a),null!==u&&n.setFocalLength(u);break;case 1:n=new THREE.OrthographicCamera(-s/2,s/2,d/2,-d/2,o,a);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),n=new THREE.Object3D}}return n}function h(e,t){var n,i;if(t.children.forEach(function(t){var n=e.Objects.NodeAttribute[t.ID];void 0!==n&&(i=n)}),void 0===i)n=new THREE.Object3D;else{var r;r=void 0===i.LightType?0:i.LightType.value;var o=16777215;void 0!==i.Color&&(o=(new THREE.Color).fromArray(i.Color.value));var a=void 0===i.Intensity?1:i.Intensity.value/100;void 0!==i.CastLightOnObject&&0===i.CastLightOnObject.value&&(a=0);var s=0;void 0!==i.FarAttenuationEnd&&(s=void 0!==i.EnableFarAttenuation&&0===i.EnableFarAttenuation.value?0:i.FarAttenuationEnd.value/1e3);switch(r){case 0:n=new THREE.PointLight(o,a,s,1);break;case 1:n=new THREE.DirectionalLight(o,a);break;case 2:var d=Math.PI/3;void 0!==i.InnerAngle&&(d=THREE.Math.degToRad(i.InnerAngle.value));var l=0;void 0!==i.OuterAngle&&(l=THREE.Math.degToRad(i.OuterAngle.value),l=Math.max(l,1)),n=new THREE.SpotLight(o,a,s,d,l,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a THREE.PointLight."),n=new THREE.PointLight(o,a)}void 0!==i.CastShadows&&1===i.CastShadows.value&&(n.castShadow=!0)}return n}function p(e,t,n,i){var r,o=null,a=null,s=[];return t.children.forEach(function(e){n.has(e.ID)&&(o=n.get(e.ID)),i.has(e.ID)&&s.push(i.get(e.ID))}),s.length>1?a=s:s.length>0?a=s[0]:(a=new THREE.MeshPhongMaterial({color:13421772}),s.push(a)),"color"in o.attributes&&s.forEach(function(e){e.vertexColors=THREE.VertexColors}),o.FBX_Deformer?(s.forEach(function(e){e.skinning=!0}),r=new THREE.SkinnedMesh(o,a)):r=new THREE.Mesh(o,a),r}function f(e,t){var n=e.children.reduce(function(e,n){return t.has(n.ID)&&(e=t.get(n.ID)),e},null),i=new THREE.LineBasicMaterial({color:3342591,linewidth:1});return new THREE.Line(n,i)}function m(e,t,n){if("RotationOrder"in n){var i=parseInt(n.RotationOrder.value,10);i>0&&i<6?console.warn("THREE.FBXLoader: unsupported Euler Order: %s. Currently only XYZ order is supported. Animations and rotations may be incorrect.",["XYZ","XZY","YZX","ZXY","YXZ","ZYX","SphericXYZ"][i]):6===i&&console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect.")}if("Lcl_Translation"in n&&t.position.fromArray(n.Lcl_Translation.value),"Lcl_Rotation"in n){var r=n.Lcl_Rotation.value.map(THREE.Math.degToRad);r.push("ZYX"),t.rotation.fromArray(r)}if("Lcl_Scaling"in n&&t.scale.fromArray(n.Lcl_Scaling.value),"PreRotation"in n){var o=n.PreRotation.value.map(THREE.Math.degToRad);o[3]="ZYX";var a=(new THREE.Euler).fromArray(o);a=(new THREE.Quaternion).setFromEuler(a);var s=(new THREE.Quaternion).setFromEuler(t.rotation);a.multiply(s),t.rotation.setFromQuaternion(a,"ZYX")}}function g(e){var t=[];return e.layer.forEach(function(e){t=t.concat(function(e){var t=[];if(void 0!==e.T&&Object.keys(e.T.curves).length>0){var n=v(e.modelName,e.T.curves,e.initialPosition,"position");void 0!==n&&t.push(n)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){var i=function(e,t,n,i){void 0!==t.x&&(t.x.values=t.x.values.map(THREE.Math.degToRad));void 0!==t.y&&(t.y.values=t.y.values.map(THREE.Math.degToRad));void 0!==t.z&&(t.z.values=t.z.values.map(THREE.Math.degToRad));var r=E(t),o=y(r,t,n);void 0!==i&&((i=i.map(THREE.Math.degToRad)).push("ZYX"),i=(new THREE.Euler).fromArray(i),i=(new THREE.Quaternion).setFromEuler(i));for(var a=new THREE.Quaternion,s=new THREE.Euler,d=[],l=0;l<o.length;l+=3)s.set(o[l],o[l+1],o[l+2],"ZYX"),a.setFromEuler(s),void 0!==i&&a.premultiply(i),a.toArray(d,l/3*4);return new THREE.QuaternionKeyframeTrack(e+".quaternion",r,d)}(e.modelName,e.R.curves,e.initialRotation,e.preRotations);void 0!==i&&t.push(i)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){var r=v(e.modelName,e.S.curves,e.initialScale,"scale");void 0!==r&&t.push(r)}return t}(e))}),new THREE.AnimationClip(e.name,-1,t)}function v(e,t,n,i){var r=E(t),o=y(r,t,n);return new THREE.VectorKeyframeTrack(e+"."+i,r,o)}function y(e,t,n){var i=n,r=[],o=-1,a=-1,s=-1;return e.forEach(function(e){if(t.x&&(o=t.x.times.indexOf(e)),t.y&&(a=t.y.times.indexOf(e)),t.z&&(s=t.z.times.indexOf(e)),-1!==o){var n=t.x.values[o];r.push(n),i[0]=n}else r.push(i[0]);if(-1!==a){var d=t.y.values[a];r.push(d),i[1]=d}else r.push(i[1]);if(-1!==s){var l=t.z.values[s];r.push(l),i[2]=l}else r.push(i[2])}),r}function E(e){var t=[];return void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort(function(e,t){return e-t}).filter(function(e,t,n){return n.indexOf(e)==t})}function b(){}function x(){}function w(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t}function T(){}function R(e){var t=e.match(/FBXVersion: (\d+)/);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function C(e){return e/46186158e3}function A(e){return e.split(",").map(function(e){return parseFloat(e)})}function M(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=e.byteLength),THREE.LoaderUtils.decodeText(new Uint8Array(e,t,n))}function S(e,t,n,i){for(var r=n,o=0;r<i;r++,o++)e[o]=t[r];return e}Object.assign(b.prototype,{getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(e){this.nodeStack.push(e),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(e,t){this.currentProp=e,this.currentPropName=t},parse:function(e){this.currentIndent=0,this.allNodes=new T,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var t=this,n=e.split("\n");return n.forEach(function(e,i){var r=e.match(/^[\s\t]*;/),o=e.match(/^[\s\t]*$/);if(!r&&!o){var a=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),s=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),d=e.match("^\\t{"+(t.currentIndent-1)+"}}");a?t.parseNodeBegin(e,a):s?t.parseNodeProperty(e,s,n[++i]):d?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)}}),this.allNodes},parseNodeBegin:function(e,t){var n=t[1].trim().replace(/^"/,"").replace(/"$/,""),i=t[2].split(",").map(function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")}),r={name:n},o=this.parseNodeAttr(i),a=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(n,r):n in a?("PoseNode"===n?a.PoseNode.push(r):void 0!==a[n].id&&(a[n]={},a[n][a[n].id]=a[n]),""!==o.id&&(a[n][o.id]=r)):"number"==typeof o.id?(a[n]={},a[n][o.id]=r):"Properties70"!==n&&(a[n]="PoseNode"===n?[r]:r),"number"==typeof o.id&&(r.id=o.id),""!==o.name&&(r.attrName=o.name),""!==o.type&&(r.attrType=o.type),this.pushStack(r)},parseNodeAttr:function(e){var t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));var n="",i="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:t,name:n,type:i}},parseNodeProperty:function(e,t,n){var i=t[1].replace(/^"/,"").replace(/"$/,"").trim(),r=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===i&&","===r&&(r=n.replace(/"/g,"").replace(/,$/,"").trim());var o=this.getCurrentNode();if("Properties70"!==o.name){if("C"===i){var a=r.split(",").slice(1),s=parseInt(a[0]),d=parseInt(a[1]),l=r.split(",").slice(3);i="connections",function(e,t){for(var n=0,i=e.length,r=t.length;n<r;n++,i++)e[i]=t[n]}(r=[s,d],l=l.map(function(e){return e.trim().replace(/^"/,"")})),void 0===o[i]&&(o[i]=[])}"Node"===i&&(o.id=r),i in o&&Array.isArray(o[i])?o[i].push(r):"a"!==i?o[i]=r:o.a=r,this.setCurrentProp(o,i),"a"===i&&","!==r.slice(-1)&&(o.a=A(r))}else this.parseNodeSpecialProperty(e,i,r)},parseNodePropertyContinued:function(e){var t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=A(t.a))},parseNodeSpecialProperty:function(e,t,n){var i=n.split('",').map(function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")}),r=i[0],o=i[1],a=i[2],s=i[3],d=i[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":d=parseFloat(d);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":d=A(d)}this.getPrevNode()[r]={type:o,type2:a,flag:s,value:d},this.setCurrentProp(this.getPrevNode(),r)}}),Object.assign(x.prototype,{parse:function(e){var t=new w(e);t.skip(23);var n=t.getUint32();console.log("THREE.FBXLoader: FBX binary version: "+n);for(var i=new T;!this.endOfContent(t);){var r=this.parseNode(t,n);null!==r&&i.add(r.name,r)}return i},endOfContent:function(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()},parseNode:function(e,t){var n={},i=t>=7500?e.getUint64():e.getUint32(),r=t>=7500?e.getUint64():e.getUint32(),o=(t>=7500?e.getUint64():e.getUint32(),e.getUint8()),a=e.getString(o);if(0===i)return null;for(var s=[],d=0;d<r;d++)s.push(this.parseProperty(e));var l=s.length>0?s[0]:"",c=s.length>1?s[1]:"",u=s.length>2?s[2]:"";for(n.singleProperty=1===r&&e.getOffset()===i;i>e.getOffset();){var h=this.parseNode(e,t);null!==h&&this.parseSubNode(a,n,h)}return n.propertyList=s,"number"==typeof l&&(n.id=l),""!==c&&(n.attrName=c),""!==u&&(n.attrType=u),""!==a&&(n.name=a),n},parseSubNode:function(e,t,n){if(!0===n.singleProperty){var i=n.propertyList[0];Array.isArray(i)?(t[n.name]=n,n.a=i):t[n.name]=i}else if("Connections"===e&&"C"===n.name){var r=[];n.propertyList.forEach(function(e,t){0!==t&&r.push(e)}),void 0===t.connections&&(t.connections=[]),t.connections.push(r)}else if("Properties70"===n.name){Object.keys(n).forEach(function(e){t[e]=n[e]})}else if("Properties70"===e&&"P"===n.name){var o,a=n.propertyList[0],s=n.propertyList[1],d=n.propertyList[2],l=n.propertyList[3];0===a.indexOf("Lcl ")&&(a=a.replace("Lcl ","Lcl_")),0===s.indexOf("Lcl ")&&(s=s.replace("Lcl ","Lcl_")),o="Color"===s||"ColorRGB"===s||"Vector"===s||"Vector3D"===s||0===s.indexOf("Lcl_")?[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:n.propertyList[4],t[a]={type:s,type2:d,flag:l,value:o}}else void 0===t[n.name]?"number"==typeof n.id?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:"PoseNode"===n.name?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):void 0===t[n.name][n.id]&&(t[n.name][n.id]=n)},parseProperty:function(e){var t=e.getString(1);switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":var n=e.getUint32();return e.getArrayBuffer(n);case"S":n=e.getUint32();return e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var i=e.getUint32(),r=e.getUint32(),o=e.getUint32();if(0===r)switch(t){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}void 0===window.Zlib&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var a=new w(new Zlib.Inflate(new Uint8Array(e.getArrayBuffer(o))).decompress().buffer);switch(t){case"b":case"c":return a.getBooleanArray(i);case"d":return a.getFloat64Array(i);case"f":return a.getFloat32Array(i);case"i":return a.getInt32Array(i);case"l":return a.getInt64Array(i)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}),Object.assign(w.prototype,{getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(e){this.offset+=e},getBoolean:function(){return 1==(1&this.getUint8())},getBooleanArray:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getBoolean());return t},getUint8:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},getInt16:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},getInt32:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},getInt32Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getInt32());return t},getUint32:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},getInt64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,4294967295===(e=4294967295&~e)&&(t=t+1&4294967295),-(4294967296*t+(e=e+1&4294967295))):4294967296*t+e},getInt64Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getInt64());return t},getUint64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e},getFloat32:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},getFloat32Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getFloat32());return t},getFloat64:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},getFloat64Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getFloat64());return t},getArrayBuffer:function(e){var t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t},getString:function(e){for(var t=new Uint8Array(e),n=0;n<e;n++)t[n]=this.getUint8();var i=t.indexOf(0);return i>=0&&(t=t.slice(0,i)),THREE.LoaderUtils.decodeText(t)}}),Object.assign(T.prototype,{add:function(e,t){this[e]=t}})}()},function(e,t){const n={once:THREE.LoopOnce,repeat:THREE.LoopRepeat,pingpong:THREE.LoopPingPong};function i(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}AFRAME.registerComponent("animation-mixer",{schema:{clip:{default:"*"},duration:{default:0},crossFadeDuration:{default:0},loop:{default:"repeat",oneOf:Object.keys(n)},repetitions:{default:1/0,min:0}},init:function(){this.model=null,this.mixer=null,this.activeActions=[];const e=this.el.getObject3D("mesh");e?this.load(e):this.el.addEventListener("model-loaded",e=>{this.load(e.detail.model)})},load:function(e){const t=this.el;this.model=e,this.mixer=new THREE.AnimationMixer(e),this.mixer.addEventListener("loop",e=>{t.emit("animation-loop",{action:e.action,loopDelta:e.loopDelta})}),this.mixer.addEventListener("finished",e=>{t.emit("animation-finished",{action:e.action,direction:e.direction})}),this.data.clip&&this.update({})},remove:function(){this.mixer&&this.mixer.stopAllAction()},update:function(e){e&&(this.stopAction(),this.data.clip&&this.playAction())},stopAction:function(){const e=this.data;for(let t=0;t<this.activeActions.length;t++)e.crossFadeDuration?this.activeActions[t].fadeOut(e.crossFadeDuration):this.activeActions[t].stop();this.activeActions.length=0},playAction:function(){if(!this.mixer)return;const e=this.model,t=this.data,r=e.animations||(e.geometry||{}).animations||[];if(!r.length)return;const o=(a=t.clip,new RegExp("^"+a.split(/\*+/).map(i).join(".*")+"$"));var a;for(let i,a=0;i=r[a];a++)if(i.name.match(o)){const r=this.mixer.clipAction(i,e);r.enabled=!0,t.duration&&r.setDuration(t.duration),r.setLoop(n[t.loop],t.repetitions).fadeIn(t.crossFadeDuration).play(),this.activeActions.push(r)}},tick:function(e,t){this.mixer&&!isNaN(t)&&this.mixer.update(t/1e3)}})},function(e,t){AFRAME.registerComponent("rounded",{schema:{enabled:{default:!0},width:{type:"number",default:1},height:{type:"number",default:1},radius:{type:"number",default:.3},topLeftRadius:{type:"number",default:-1},topRightRadius:{type:"number",default:-1},bottomLeftRadius:{type:"number",default:-1},bottomRightRadius:{type:"number",default:-1},color:{type:"color",default:"#F0F0F0"},opacity:{type:"number",default:1}},init:function(){this.rounded=new THREE.Mesh(this.draw(),new THREE.MeshPhongMaterial({color:new THREE.Color(this.data.color),side:THREE.DoubleSide})),this.updateOpacity(),this.el.setObject3D("mesh",this.rounded)},update:function(){this.data.enabled?this.rounded&&(this.rounded.visible=!0,this.rounded.geometry=this.draw(),this.rounded.material.color=new THREE.Color(this.data.color),this.updateOpacity()):this.rounded.visible=!1},updateOpacity:function(){this.data.opacity<0&&(this.data.opacity=0),this.data.opacity>1&&(this.data.opacity=1),this.data.opacity<1?this.rounded.material.transparent=!0:this.rounded.material.transparent=!1,this.rounded.material.opacity=this.data.opacity},tick:function(){},remove:function(){this.rounded&&(this.el.object3D.remove(this.rounded),this.rounded=null)},draw:function(){var e=new THREE.Shape;var t,n,i,r,o,a,s,d,l,c=[this.data.radius,this.data.radius,this.data.radius,this.data.radius];return-1!=this.data.topLeftRadius&&(c[0]=this.data.topLeftRadius),-1!=this.data.topRightRadius&&(c[1]=this.data.topRightRadius),-1!=this.data.bottomLeftRadius&&(c[2]=this.data.bottomLeftRadius),-1!=this.data.bottomRightRadius&&(c[3]=this.data.bottomRightRadius),t=e,n=0,i=0,r=this.data.width,o=this.data.height,a=c[0],s=c[1],d=c[2],l=c[3],a||(a=1e-5),s||(s=1e-5),d||(d=1e-5),l||(l=1e-5),t.moveTo(n,i+a),t.lineTo(n,i+o-a),t.quadraticCurveTo(n,i+o,n+a,i+o),t.lineTo(n+r-s,i+o),t.quadraticCurveTo(n+r,i+o,n+r,i+o-s),t.lineTo(n+r,i+l),t.quadraticCurveTo(n+r,i,n+r-l,i),t.lineTo(n+d,i),t.quadraticCurveTo(n,i,n,i+d),new THREE.ShapeBufferGeometry(e)},pause:function(){},play:function(){}}),AFRAME.registerPrimitive("a-rounded",{defaultComponents:{rounded:{}},mappings:{enabled:"rounded.enabled",width:"rounded.width",height:"rounded.height",radius:"rounded.radius","top-left-radius":"rounded.topLeftRadius","top-right-radius":"rounded.topRightRadius","bottom-left-radius":"rounded.bottomLeftRadius","bottom-right-radius":"rounded.bottomRightRadius",color:"rounded.color",opacity:"rounded.opacity"}})},function(e,t,n){e.exports=n(6)}]);
//# sourceMappingURL=app.js.map