{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///./node_modules/css-loader/lib/css-base.js","webpack:///./node_modules/validator/lib/util/assertString.js","webpack:///./node_modules/validator/lib/util/merge.js","webpack:///./src/core/event.js","webpack:///./node_modules/validator/lib/isEmail.js","webpack:///./src/loaders/fbx-model.js","webpack:///./src/components/transition.js","webpack:///./src/components/tunnel.js","webpack:///./src/components/blink.js","webpack:///./src/core/confetti.js","webpack:///./src/index.js","webpack:///./src/styles/socials.css","webpack:///./src/styles/socials.css?a12b","webpack:///./src/styles/modal.css","webpack:///./src/styles/modal.css?db7f","webpack:///./src/styles/vignette.css","webpack:///./src/styles/vignette.css?44e6","webpack:///./src/styles/shake.css","webpack:///./src/styles/shake.css?5e73","webpack:///./src/styles/button.css","webpack:///./src/styles/button.css?a18c","webpack:///./src/styles/index.css","webpack:///./src/styles/index.css?70b3","webpack:///./node_modules/validator/lib/isFQDN.js","webpack:///./node_modules/validator/lib/isByteLength.js","webpack:///./node_modules/style-loader/lib/urls.js","webpack:///./src/styles/confetti.css","webpack:///./src/styles/confetti.css?d9be","webpack:///./src/components/particles.js","webpack:///./src/components/environment.js","webpack:///./src/components/fade.js","webpack:///./src/components/door.js","webpack:///./src/components/stars.js","webpack:///./src/lib/FBXLoader.js","webpack:///./src/loaders/animation-mixer.js","webpack:///./src/lib/rounded.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","fn","memo","stylesInDom","isOldIE","window","document","all","atob","apply","this","arguments","getElement","target","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","e","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","options","length","item","domStyle","id","refs","j","parts","push","addStyle","listToStyles","list","newStyles","base","part","css","media","sourceMap","insertStyleElement","style","insertInto","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","createElement","attrs","type","addAttrs","el","keys","forEach","key","setAttribute","obj","update","remove","result","transform","styleIndex","applyToSingletonTag","bind","URL","createObjectURL","revokeObjectURL","Blob","btoa","link","rel","createLinkElement","autoFixUrls","undefined","convertToAbsoluteUrls","unescape","encodeURIComponent","JSON","stringify","blob","oldSrc","href","styleSheet","cssText","createTextNode","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","filter","Boolean","join","cssNode","childNodes","useSourceMap","toString","map","content","cssMapping","sourceMapping","sourceURLs","sources","source","sourceRoot","concat","cssWithMappingToString","mediaQuery","alreadyImportedModules","default","input","String","TypeError","defaults","emit","data","dispatchEvent","CustomEvent","detail","str","_assertString2","_merge2","default_email_options","require_display_name","allow_display_name","display_email","match","displayName","split","domain","pop","user","lower_domain","toLowerCase","replace","_isByteLength2","max","_isFQDN2","require_tld","slice","allow_utf8_local_part","quotedEmailUserUtf8","test","quotedEmailUser","pattern","emailUserUtf8Part","emailUserPart","user_parts","_interopRequireDefault","AFRAME","registerComponent","schema","src","crossorigin","init","model","loader","THREE","FBXLoader","setCrossOrigin","load","setObject3D","format","removeObject3D","CameraTransition","constructor","duration","animationEnded","onFadeInEndBind","onFadeInEnd","onFadeOutEndBind","onFadeOutEnd","setUpUI","cameraEl","classList","add","addEventListener","end","setTimeout","removeEventListener","forceFade","ww","innerWidth","wh","innerHeight","rendererBuffer","bufferTexture","bufferCamera","bufferScene","shouldRender","shouldRun","startT","sceneEl","scene","object3D","setUp","tick","t","tubeGeometry","texturePlane","visible","updateMaterialOffset","updateCurve","sin","Math","ratioX","ratioY","renderToTexture","tubeMesh","tubeMaterial","dispose","speed","mouse","position","Vector2","ratio","TextureLoader","crossOrigin","createMesh","initAnimation","renderer","setClearColor","Scene","fog","Fog","PerspectiveCamera","lookAt","Vector3","y","z","dpr","devicePixelRatio","resolution","utils","device","isMobile","WebGLRenderTarget","minFilter","LinearFilter","magFilter","NearestFilter","texture","wrapS","ClampToEdgeWrapping","wrapT","RepeatWrapping","repeat","set","offset","x","planeGeometry","PlaneGeometry","planeMaterial","MeshBasicMaterial","color","plane","Mesh","WebGLRenderer","antialias","setPixelRatio","setSize","domElement","zIndex","body","points","geometry","Geometry","curve","CatmullRomCurve3","vertices","getPoints","splineMesh","Line","LineBasicMaterial","side","BackSide","MirroredRepeatWrapping","repx","repy","TubeGeometry","tubeGeometry_o","clone","scale","rotation","far","callback","transition","CameraBlink","comingSoonEl","children","envAnimEl","textureParams","offsetX","offsetY","repeatX","repeatY","cameraShake","hyperSpace","TimelineMax","to","ease","Power1","easeInOut","Power2","vertice_o","vertice","floor","verticesNeedUpdate","render","setRenderTarget","Confetti","containerEl","confettiFrequency","confettiColors","confettiAnimations","_setupElements","_renderConfetti","stop","clearInterval","confettiInterval","elPosition","setInterval","confettiEl","confettiSize","random","confettiBackground","confettiLeft","offsetWidth","confettiAnimation","left","width","height","backgroundColor","removeTimeout","API_URL","store","shakeEl","event","preventDefault","components","inspector","rayOrigin","modal","closeModal","openModal","validateEmail","modalOpen","focus","closeModalWithSuccess","doorOpenned","location","isEmailValid","isEmail_default","inputValue","invalidEmail","sendEmailRequest","wrapperEl","doneEl","patternEl","FormData","append","fetch","method","email","headers","content-type","then","response","status","confetti","catch","hmr","locals","default_fqdn_options","allow_trailing_dot","substring","tld","allow_underscores","_typeof","Symbol","iterator","min","len","encodeURI","_assertString","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","newUrl","unquotedOrigUrl","trim","$1","Particle","burst","time","radius","Color","mat","transparent","DoubleSide","flatShading","depthTest","mesh","percent","setRotation","angle","cos","material","opacity","particles","active","preset","oneOf","seed","skyType","skyColor","horizonColor","lighting","shadow","shadowSize","lightPosition","playArea","ground","groundYScale","groundTexture","groundColor","groundColor2","dressing","dressingAmount","dressingColor","dressingScale","dressingVariance","dressingUniformScale","dressingOnPlayArea","grid","gridColor","multiple","presets","none","contact","egypt","checkerboard","forest","goaland","yavapai","goldmine","threetowers","poison","arches","tron","japan","dream","volcano","starry","osiris","STAGE_SIZE","assets","faces","stones","torii","mirror","hexagons","towers","segments","trees","noise","apparatus","mushrooms","asset","v","userFog","getAttribute","sky","stars","groundMaterial","groundCanvas","groundGeometry","gridCanvas","gridTexture","hemilight","intensity","sunlight","getFogColor","sunHeight","fogColor","fogRatios","fogColors","c1","c2","a","lerp","multiplyScalar","getHexString","oldData","newData","assign","environment","attrValue","sunPos","normalize","skycol","g","b","castShadow","shadowCameraLeft","shadowCameraBottom","shadowCameraRight","shadowCameraTop","removeAttribute","shader","gradient","atmosphere","topColor","bottomColor","sunPosition","setStars","updateGroundGeometry","updateGround","updateDressing","dumpParametersDiff","logPreset","dec3","params","usingPreset","def","coords","parseFloat","substr","updateGeometry","visibleground","perlin","PerlinNoise","verts","numVerts","h","pow","xx","yy","pa","abs","computeFaceNormals","computeFlatVertexNormals","computeVertexNormals","normalsNeedUpdate","texRepeat","Texture","MeshLambertMaterial","emissive","emissiveMap","FlatShading","SmoothShading","groundctx","getContext","gridctx","drawTexture","fillStyle","fillRect","drawGrid","needsUpdate","getObject3D","cast","receive","ctx","size","texMeters","ii","num","step","jj","beginPath","arc","PI","fill","col","col1","col2","im","imdata","numpixels","squareSize","numSquares","addScalar","getImageData","diff","rnd","putImageData","tex","texctx","walkers","it","walker","pos","drawImage","getAssetGeometry","geo","geoset","self","applyNoise","maxy","LatheGeometry","applyMatrix","Matrix4","makeRotationFromEuler","Euler","makeTranslation","shape","Shape","moveTo","lineTo","ExtrudeGeometry","amount","bevelEnabled","f","Face3","merge","Object3D","BoxGeometry","ConeGeometry","CylinderGeometry","distance","ds","dv","direction","matrix","uniformScale","compose","Quaternion","setFromAxisAngle","bufgeo","BufferGeometry","fromGeometry","vertexColors","VertexColors","createStars","positions","Float32Array","numStars","addAttribute","BufferAttribute","setDrawRange","PointsMaterial","Points","registerShader","luminance","is","turbidity","reileigh","mieCoefficient","mieDirectionalG","vertexShader","fragmentShader","grad3","perm","dot","mix","fade","X","Y","Z","gi000","gi001","gi010","gi011","gi100","gi101","gi110","gi111","n000","n100","n010","n110","n001","n101","n011","n111","u","w","nx00","nx01","nx10","nx11","nxy0","nxy1","Event","opacityUpdate","traverse","text","textEntities","querySelectorAll","start","cameraSpeed","emitted","clicked","canvas","doorMouseClick","doorMouseEnter","doorMouseLeave","loadDoorAnimation","dt","mixer","isNaN","currentPos","mainScene","doorLayer","doorMat","console","log","AnimationMixer","action","clipAction","animations","setLoop","LoopOnce","clampWhenFinished","play","setPosition","posZ","LoaderUtils","extractUrlBase","Loader","decodeText","array","TextDecoder","decode","parseImage","videoNode","Content","fileName","RelativeFilename","Filename","extension","lastIndexOf","warn","Uint8Array","parseTexture","textureNode","images","connections","currentPath","path","ID","setPath","loadTexture","attrName","wrapModeU","WrapModeU","wrapModeV","WrapModeV","valueU","valueV","values","Scaling","parseMaterial","FBXTree","materialNode","textureMap","ShadingModel","has","parameters","properties","BumpFactor","bumpScale","Diffuse","fromArray","DisplacementFactor","displacementScale","ReflectionFactor","reflectivity","Specular","specular","Shininess","shininess","Emissive","EmissiveFactor","emissiveIntensity","Opacity","child","relationship","bumpMap","getTexture","displacementMap","normalMap","envMap","mapping","EquirectangularReflectionMapping","specularMap","alphaMap","parseParameters","MeshPhongMaterial","setValues","Objects","LayeredTexture","parseSkeleton","deformerNodes","rawBones","subDeformerNode","attrType","rawBone","indices","weights","Transform","transformLink","TransformLink","linkMode","Mode","Indexes","Weights","bones","parseGeometry","relationships","geometryNode","skeletons","modelNodes","parents","parent","Model","skeleton","reduce","preTransform","modelNode","GeometricRotation","degToRad","GeometricTranslation","vertexPositions","Vertices","vertexIndices","PolygonVertexIndex","vertexBuffer","normalBuffer","colorsBuffer","uvsBuffer","materialIndexBuffer","vertexWeightsBuffer","weightsIndicesBuffer","LayerElementColor","colorInfo","ColorNode","mappingType","MappingInformationType","referenceType","ReferenceInformationType","buffer","Colors","indexBuffer","ColorIndex","dataSize","getColors","LayerElementMaterial","materialInfo","MaterialNode","Materials","materialIndices","getMaterials","LayerElementNormal","normalInfo","NormalNode","Normals","NormalIndex","NormalsIndex","getNormals","LayerElementUV","uvInfo","getUVs","weightTable","weight","polygonIndex","faceLength","displayedWeightsWarning","vertexPositionIndexes","faceNormals","faceColors","faceUVs","faceWeights","faceWeightIndices","vertexIndex","polygonVertexIndex","endOfFace","weightIndices","getData","wt","wIndex","Weight","weightIndex","currentWeight","currentIndex","comparedWeight","comparedWeightIndex","comparedWeightArray","tmp","materialIndex","uv","positionAttribute","Float32BufferAttribute","applyToBufferAttribute","FBX_Deformer","normalAttribute","normalMatrix","Matrix3","getNormalMatrix","uvBuffer","prevMaterialIndex","startIndex","addGroup","groups","lastGroup","lastIndex","count","genGeometry","parseMeshGeometry","NURBSCurve","error","order","parseInt","Order","startKnot","endKnot","degree","knots","KnotVector","controlPoints","pointsValues","Vector4","Form","vertex","toArray","parseNurbsGeometry","UVNode","UV","UVIndex","manager","DefaultLoadingManager","url","onLoad","onProgress","onError","resourceDirectory","FileLoader","setResponseType","parse","itemError","FBXBuffer","CORRECT","byteLength","convertArrayBufferToString","BinaryParser","FBXText","cursor","read","isFbxFormatASCII","getFbxVersion","TextParser","connectionMap","Map","rawConnections","Connections","rawConnection","fromID","toID","parentRelationship","childRelationship","parseConnections","blobs","videoNodes","Video","nodeID","arrayBufferContent","ArrayBuffer","base64Content","image","filename","parseImages","materials","materialMap","materialNodes","Material","parseMaterials","textureNodes","parseTextures","DeformerNodes","Deformer","deformerNode","geometryID","parseDeformers","geometryMap","sceneGraph","Group","modelMap","node","buildSkeleton","createCamera","createLight","createCurve","PropertyBinding","sanitizeNodeName","setModelTransforms","parseModels","lookAtTarget","Lcl_Translation","setLookAtProperties","connection","bindMatrices","BindPoseNode","Pose","poseNodes","PoseNode","Array","isArray","poseNode","Node","Matrix","parsePoseNodes","geoID","geoRelationships","geoConnParent","Skeleton","bindSkeleton","rawClips","AnimationCurve","curveNodesMap","rawCurveNodes","AnimationCurveNode","rawCurveNode","curveNode","attr","curves","parseAnimationCurveNodes","rawCurves","animationCurve","times","KeyTime","convertFBXTimeToSeconds","KeyValueFloat","animationCurveID","animationCurveRelationship","axis","parseAnimationCurves","layersMap","rawLayers","AnimationLayer","layerCurveNodes","modelID","rawModel","modelName","initialPosition","initialRotation","initialScale","Lcl_Rotation","Lcl_Scaling","preRotations","PreRotation","parseAnimationLayers","rawStacks","AnimationStack","layer","parseAnimStacks","parseAnimations","rawClip","clip","addClip","addAnimations","GlobalSettings","ambientColor","AmbientColor","AmbientLight","createAmbientLight","parseScene","geometryNodes","parseGeometries","dataArray","GetData","ByPolygonVertex","Direct","infoObject","from","IndexToDirect","ByPolygon","ByVertice","AllSame","bone","subBone","Bone","matrixWorld","copy","cameraAttribute","NodeAttribute","CameraProjectionType","nearClippingPlane","NearPlane","farClippingPlane","FarPlane","AspectWidth","AspectHeight","aspect","fov","FieldOfView","focalLength","FocalLength","setFocalLength","OrthographicCamera","lightAttribute","LightType","Intensity","CastLightOnObject","FarAttenuationEnd","EnableFarAttenuation","PointLight","DirectionalLight","InnerAngle","penumbra","OuterAngle","SpotLight","CastShadows","attributes","skinning","SkinnedMesh","linewidth","RotationOrder","setFromEuler","currentRotation","multiply","setFromQuaternion","tracks","rawTracks","T","positionTrack","generateVectorTrack","R","rotationTrack","initialValue","getTimesForAllAxes","getKeyframeTrackValues","quaternion","euler","quaternionValues","premultiply","QuaternionKeyframeTrack","generateRotationTrack","S","scaleTrack","generateTracks","AnimationClip","VectorKeyframeTrack","prevValue","xIndex","yIndex","xValue","yValue","zValue","sort","elem","BinaryReader","littleEndian","DataView","parseNumberArray","val","getPrevNode","nodeStack","currentIndent","getCurrentNode","getCurrentProp","currentProp","pushStack","popStack","setCurrentProp","currentPropName","allNodes","line","matchComment","matchEmpty","matchBeginning","matchProperty","matchEnd","parseNodeBegin","parseNodeProperty","parseNodePropertyContinued","nodeName","nodeAttrs","parseNodeAttr","currentNode","contentLine","propName","propValue","connProps","rest","parseNodeSpecialProperty","props","prop","innerPropName","innerPropType1","innerPropType2","innerPropFlag","innerPropValue","type2","flag","reader","skip","version","getUint32","endOfContent","parseNode","getOffset","endOffset","getUint64","numProperties","nameLen","getUint8","getString","propertyList","parseProperty","singleProperty","subNode","parseSubNode","getBoolean","getFloat64","getFloat32","getInt32","getInt64","getArrayBuffer","getInt16","arrayLength","encoding","compressedLength","getBooleanArray","getFloat64Array","getFloat32Array","getInt32Array","getInt64Array","Zlib","reader2","Inflate","decompress","low","high","nullByte","LoopMode","once","LoopRepeat","pingpong","LoopPingPong","regExpEscape","crossFadeDuration","loop","repetitions","Infinity","activeActions","loopDelta","stopAllAction","previousData","stopAction","playAction","fadeOut","clips","re","RegExp","enabled","setDuration","fadeIn","topLeftRadius","topRightRadius","bottomLeftRadius","bottomRightRadius","rounded","draw","updateOpacity","roundedRectShape","corners","quadraticCurveTo","ShapeBufferGeometry","pause","registerPrimitive","defaultComponents","mappings","top-left-radius","top-right-radius","bottom-left-radius","bottom-right-radius"],"mappings":"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I,KAAK,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,EAAE,IAAI,IAAI,GAAG,IAAI,KAAK,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,KAAK,EAAE,IAAI,IAAI,EAAE,IAAI,IAAI,GAAG,GAAG,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,KAAK,GAAG,IAAI,IAAI,GAAG,IAAI,KAAK,GAAG,IAAI,KAAK,GAAG,IAAI,KAAK,GAAG,IAAI,KAAK,GAAG,IAAI,KAAK,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,KAAK,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,KAAK,GAAG,IAAI,KAAK,GAAG,KAAK,IAAI,IAAI,KAAK,KAAK,GAAG,IAAI,IAAI,KAAK,GAAG,KAAK,IAAI,IAAI,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,KAAK,GAAG,IAAI,KAAK,GAAG,IAAI,IAAI,IAAI,IAAI,KAAK,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,KAAK,GAAG,IAAI,KAAK,GAAG,IAAI,KAAK,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,EAAE,KAAK,IAAI,EAAE,KAAK,IAAI,GAAG,KAAK,IAAI,IAAI,KAAK,IAAI,IAAI,KAAK,IAAI,GAAG,IAAI,KAAK,IAAI,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,EAAE,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,KAAK,GAAG,IAAI,GAAG,GAAG,KAAK,GAAG,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,GAAG,IAAI,GAAG,KAAK,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,KAAK,GAAG,KAAK,IAAI,GAAG,IAAI,GAAG,GAAG,KAAK,GAAG,GAAG,IAAI,KAAK,IAAI,IAAI,KAAK,IAAI,KAAK,GAAG,KAAK,IAAI,IAAI,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,GAAG,IAAI,KAAK,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,EAAE,IAAI,KAAK,GAAG,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,KAAK,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,IAAI,KAAK,KAAK,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,KAAK,IAAI,IAAI,KAAK,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,IAAI,KAAK,GAAG,IAAI,KAAK,GAAG,IAAI,KAAK,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,IAAI,KAAK,GAAG,IAAI,KAAK,GAAG,KAAK,IAAI,GAAG,KAAK,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,KAAK,IAAI,GAAG,KAAK,GAAG,GAAG,KAAK,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,KAAK,GAAG,KAAK,GAAG,GAAG,KAAK,IAAI,GAAG,IAAI,KAAK,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,KAAK,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,KAAK,GAAG,KAAK,KAAK,GAAG,IAAI,KAAK,GAAG,IAAI,KAAK,IAAI,IAAI,KAAK,IAAI,KAAK,KAAK,IAAI,GAAG,GAAG,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,KAAK,GAAG,GAAG,KAAK,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,KAAK,IAAI,EAAE,KAAK,IAAI,IAAI,GAAG,IAAI,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,IAAI,GAAG,KAAK,IAAI,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,IAAI,KAAK,GAAG,IAAI,IAAI,IAAI,IAAI,KAAK,GAAG,KAAK,IAAI,IAAI,KAAK,KAAK,GAAG,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,GAAG,KAAK,KAAK,GAAG,KAAK,KAAK,GAAG,KAAK,KAAK,IAAI,KAC33EgM,OAAQ,GAAG,IAAI,IAAI,EAAE,IAAI,IAAI,IAAI,GAAG,EAAE,EAAE,IAAI,GAAG,GAAG,IAAI,EAAE,EAAE,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,EAAE,IAAI,GAAG,GAAG,GAAG,EAAE,EAAE,IAAI,IAAI,IAAI,GAAG,EAAE,EAAE,IAAI,GAAG,GAAG,IAAI,EAAE,EAAE,IAAI,IAAI,EAAE,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,EAAE,EAAE,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,GAAG,GAAG,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,EAAE,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,EAAE,GAAG,IAAI,EAAE,EAAE,IAAI,GAAG,GAAG,IAAI,EAAE,GAAG,GAAG,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,EAAE,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI,EAAE,IAAI,IAAI,EAAE,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,IAAI,IAAI,EAAE,GAAG,IAAI,EAAE,GAAG,IAAI,EAAE,IAAI,GAAG,GAAG,IAAI,EAAE,EAAE,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI,GAAG,EAAE,EAAE,IAAI,IAAI,EAAE,IAAI,EAAE,EAAE,GAAG,EAAE,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,EAAE,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,EAAE,IAAI,GAAG,IAAI,EAAE,EAAE,IAAI,GAAG,IAAI,IAAI,IAAI,EAAE,IAAI,IAAI,IAAI,IAAI,EAAE,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,EAAE,GAAG,IAAI,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,GAAG,EAAE,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI,EAAE,IAAI,IAAI,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,GAAG,EAAE,IAAI,GAAG,IAAI,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,EAAE,GAAG,IAAI,IAAI,EAAE,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,GAAG,IAAI,EAAE,IAAI,IAAI,GAAG,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,EAAE,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,EAAE,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,IAAI,GAAG,IAAI,EAAE,GAAG,IAAI,EAAE,GAAG,IAAI,GAAG,EAAE,IAAI,GAAG,IAAI,EAAE,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,GAAG,GAAG,IAAI,IAAI,EAAE,IAAI,GAAG,IAAI,EAAE,GAAG,IAAI,OAGjqHC,SAEIha,KAAM,OACN+N,WAAY,IAAI,IAAI,GAAG,IAAI,KAAK,IAAI,IAAI,KAAK,GAAG,KAAK,IAAI,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,KAAK,KAAK,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,IAAI,GAAG,KAAK,GAAG,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,IAAI,IAAI,KAAK,GAAG,KAAK,IAAI,IAAI,KAAK,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,KAAK,KAAK,IAAI,KAAK,KAAK,IAAI,KAAK,KAAK,GAAG,KAAK,KAAK,GAAG,KAAK,IAAI,IAAI,IAAI,KAAK,GAAG,IAAI,IAAI,KAAK,KAAK,KAAK,GAAG,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,KAAK,IAAI,GAAG,KACtZgM,OAAQ,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,MAGxY/Z,KAAM,OACN+N,WAAY,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,IAAI,GAAG,KAAK,IAAI,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,GAAG,KAAK,IAAI,IAAI,KAAK,IAAI,GAAG,KAAK,IAAI,IAAI,KAAK,GAAG,IAAI,KAAK,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,KAAK,IAAI,GAAG,KAAK,IAAI,KAAK,IAAI,GAAG,KAAK,GAAG,IAAI,IAAI,KAAK,GAAG,KAAK,IAAI,EAAE,KAAK,GAAG,GAAG,KAAK,IAAI,IAAI,GAAG,GAAG,IAAI,KAAK,IAAI,IAAI,GAAG,GAAG,GAAG,IAAI,IAAI,GAAG,GAAG,KAAK,IAAI,KAAK,IAAI,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,EAAE,IAAI,KAAK,GAAG,KAAK,KAAK,IAAI,GAAG,GAAG,IAAI,KAAK,KAAK,GAAG,IAAI,IAAI,IAAI,IAAI,KAAK,GAAG,GAAG,GAAG,KAAK,IAAI,KAAK,GAAG,GAAG,IAAI,KAAK,IAAI,IAAI,GAAG,IAC1hBgM,OAAQ,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,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K,GAAG,IAAI,KAAK,GAAG,IAAI,KAAK,GAAG,IAAI,KAAK,GAAG,IAAI,KAAK,GAAG,EAAE,IAAI,GAAG,EAAE,IAAI,GAAG,EAAE,KAAK,GAAG,EAAE,KAAK,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,KAAK,GAAG,IAAI,KAAK,GAAG,KAAK,IAAI,GAAG,IAAI,KAAK,GAAG,KAAK,IAAI,GAAG,IAAI,KAAK,GAAG,KAAK,IAAI,GAAG,IAAI,KAAK,GAAG,KAAK,GAAG,EAAE,IAAI,IAAI,EAAE,KAAK,GAAG,GAAG,IAAI,IAAI,GAAG,KAAK,GAAG,GAAG,IAAI,IAAI,GAAG,KAAK,GAAG,GAAG,IAAI,IAAI,GAAG,KAAK,GAAG,GAAG,IAAI,IAAI,GAAG,KAAK,GAAG,GAAG,IAAI,IAAI,GAAG,KAAK,GAAG,EAAE,IAAI,IAAI,EAAE,KAAK,IAAI,GAAG,IAAI,KAAK,GAAG,KAAK,IAAI,GAAG,IAAI,KAAK,GAAG,EAAE,IAAI,GAAG,EAAE,IAAI,GAAG,IAAI,KAAK,GAAG,IAAI,KAAK,GAAG,IAAI,KAAK,GAAG,IAAI,KAAK,GAAG,IAAI,KAAK,GAAG,IAAI,KAAK,GAAG,IAAI,IAAI,EAAE,IAAI,IAAI,EAAE,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,EAAE,IAAI,IAAI,EAAE,IAAI,KAAK,GAAG,IAAI,KAAK,GAAG,IAAI,KAAK,GAAG,IAAI,KAAK,GAAG,EAAE,KAAK,GAAG,EAAE,KAAK,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,KAAK,GAAG,GAAG,KAAK,IACt6BgM,OAAQ,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/public/assets/js/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 32);\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = assertString;\nfunction assertString(input) {\n  var isString = typeof input === 'string' || input instanceof String;\n\n  if (!isString) {\n    throw new TypeError('This library (validator.js) validates strings only');\n  }\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = merge;\nfunction merge() {\n  var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var defaults = arguments[1];\n\n  for (var key in defaults) {\n    if (typeof obj[key] === 'undefined') {\n      obj[key] = defaults[key];\n    }\n  }\n  return obj;\n}\nmodule.exports = exports['default'];","module.exports = {\n  emit: (el, name, data)=> {\n    el.dispatchEvent( new CustomEvent(name, {detail: data}) );\n  }\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isEmail;\n\nvar _assertString = require('./util/assertString');\n\nvar _assertString2 = _interopRequireDefault(_assertString);\n\nvar _merge = require('./util/merge');\n\nvar _merge2 = _interopRequireDefault(_merge);\n\nvar _isByteLength = require('./isByteLength');\n\nvar _isByteLength2 = _interopRequireDefault(_isByteLength);\n\nvar _isFQDN = require('./isFQDN');\n\nvar _isFQDN2 = _interopRequireDefault(_isFQDN);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar default_email_options = {\n  allow_display_name: false,\n  require_display_name: false,\n  allow_utf8_local_part: true,\n  require_tld: true\n};\n\n/* eslint-disable max-len */\n/* eslint-disable no-control-regex */\nvar displayName = /^[a-z\\d!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~\\.\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+[a-z\\d!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~\\,\\.\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\s]*<(.+)>$/i;\nvar emailUserPart = /^[a-z\\d!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]+$/i;\nvar quotedEmailUser = /^([\\s\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f\\x21\\x23-\\x5b\\x5d-\\x7e]|(\\\\[\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]))*$/i;\nvar emailUserUtf8Part = /^[a-z\\d!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+$/i;\nvar quotedEmailUserUtf8 = /^([\\s\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f\\x21\\x23-\\x5b\\x5d-\\x7e\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|(\\\\[\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))*$/i;\n/* eslint-enable max-len */\n/* eslint-enable no-control-regex */\n\nfunction isEmail(str, options) {\n  (0, _assertString2.default)(str);\n  options = (0, _merge2.default)(options, default_email_options);\n\n  if (options.require_display_name || options.allow_display_name) {\n    var display_email = str.match(displayName);\n    if (display_email) {\n      str = display_email[1];\n    } else if (options.require_display_name) {\n      return false;\n    }\n  }\n\n  var parts = str.split('@');\n  var domain = parts.pop();\n  var user = parts.join('@');\n\n  var lower_domain = domain.toLowerCase();\n  if (lower_domain === 'gmail.com' || lower_domain === 'googlemail.com') {\n    user = user.replace(/\\./g, '').toLowerCase();\n  }\n\n  if (!(0, _isByteLength2.default)(user, { max: 64 }) || !(0, _isByteLength2.default)(domain, { max: 254 })) {\n    return false;\n  }\n\n  if (!(0, _isFQDN2.default)(domain, { require_tld: options.require_tld })) {\n    return false;\n  }\n\n  if (user[0] === '\"') {\n    user = user.slice(1, user.length - 1);\n    return options.allow_utf8_local_part ? quotedEmailUserUtf8.test(user) : quotedEmailUser.test(user);\n  }\n\n  var pattern = options.allow_utf8_local_part ? emailUserUtf8Part : emailUserPart;\n\n  var user_parts = user.split('.');\n  for (var i = 0; i < user_parts.length; i++) {\n    if (!pattern.test(user_parts[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\nmodule.exports = exports['default'];","import '../lib/FBXLoader';\n\n/**\n * fbx-model\n *\n * Loader for FBX format. Supports ASCII, but *not* binary, models.\n */\nAFRAME.registerComponent('fbx-model', {\n  schema: {\n    src:         { type: 'asset' },\n    crossorigin: { default: '' }\n  },\n\n  init: function () {\n    this.model = null;\n  },\n\n  update: function () {\n    const data = this.data;\n    if (!data.src) return;\n\n    this.remove();\n    const loader = new THREE.FBXLoader();\n    if (data.crossorigin) loader.setCrossOrigin(data.crossorigin);\n    loader.load(data.src, this.load.bind(this));\n  },\n\n  load: function (model) {\n    this.model = model;\n    this.el.setObject3D('mesh', model);\n    this.el.emit('model-loaded', {format: 'fbx', model: model});\n  },\n\n  remove: function () {\n    if (this.model) this.el.removeObject3D('mesh');\n  }\n});\n","export default class CameraTransition {\n\n  constructor(options={ duration: 420 }){\n    this.animationEnded = false;\n    this.duration = options.duration;\n    this.onFadeInEndBind = this.onFadeInEnd.bind(this);\n    this.onFadeOutEndBind = this.onFadeOutEnd.bind(this);\n    this.setUpUI();\n  }\n\n  setUpUI() {\n    let cameraEl = document.querySelector('a-camera');\n    let appEl = document.querySelector('.app');\n    appEl.classList.add('blink');\n\n    if (!cameraEl) {\n      throw new Error('No camera were found.');\n    }\n\n    //document.querySelector('#scene-camera-fade')\n    // Create a new sky that will wrap around the camera\n    this.el = document.createElement('a-sky');\n    this.el.setAttribute('id', 'scene-camera-fade');\n    this.el.setAttribute('color', '#000');\n    this.el.setAttribute('radius', 0.1);\n    this.el.setAttribute('opacity', 0);\n    this.el.setAttribute('fadein', `duration: ${ this.duration }`);\n    this.el.addEventListener('animationend', this.onFadeInEndBind);\n    cameraEl.appendChild(this.el);\n  }\n\n  /*\n    End the transition\n  */\n  end() {\n    // If animation has not finish yet, we wait..\n    if (!this.animationEnded) {\n      return setTimeout(this.end.bind(this), 50);\n    }\n\n    // Then we remove the event and add the fadeout attribute.\n    this.el.removeEventListener('animationend', this.onFadeInEndBind);\n    this.el.setAttribute('fadeout', {duration: this.duration/1.5, forceFade: true});\n    this.el.addEventListener('animationend', this.onFadeOutEndBind);\n\n\n    let appEl = document.querySelector('.app');\n    appEl.classList.remove('blink');\n  }\n\n  //----------------------------------------------------------------------------\n  // HANDLERS\n\n  onFadeInEnd() {\n    this.animationEnded = true;\n  }\n\n  onFadeOutEnd() {\n    this.el.removeEventListener('animationend', this.onFadeOutEndBind);\n    this.el.parentNode.removeChild(this.el);\n    this.el = null;\n  }\n\n}\n","import CameraBlink from './blink';\n\nvar ww = window.innerWidth;\nvar wh = window.innerHeight;\n\nlet rendererBuffer, bufferTexture, bufferCamera, bufferScene;\n\nAFRAME.registerComponent('tunnel', {\n  schema: {},\n  init() {\n    this.shouldRender = true;\n    this.shouldRun = false;\n    this.startT;\n\n    this.el.sceneEl.addEventListener('loaded', ()=>{\n      this.sceneEl = this.el.sceneEl;\n      this.scene = this.el.sceneEl.object3D;\n      setTimeout(()=>this.setUp(), 0);\n    });\n  },\n\n  tick(t) {\n    if (!this.startT) this.startT = t;\n    else t = t-this.startT+4000;\n    if (!this.tubeGeometry || !this.shouldRun) {\n      if (this.texturePlane) this.texturePlane.visible = false;\n      return;\n    }\n    else if (this.texturePlane) this.texturePlane.visible = true;\n\n    this.updateMaterialOffset();\n    this.updateCurve();\n\n    let sin = (Math.sin(t/1000)+1) / 2.0;\n    this.ratioX = sin;\n    this.ratioY = 1-sin;\n\n    this.renderToTexture();\n  },\n\n  remove() {\n    this.shouldRun = false;\n    this.el.object3D.remove(this.tubeMesh);\n    this.tubeMaterial.dispose();\n    this.tubeGeometry.dispose();\n    this.tubeGeometry = this.tubeMaterial = this.tubeMesh = undefined;\n  },\n\n  setUp() {\n    this.speed = 8;\n\n    this.mouse = {\n      position: new THREE.Vector2(ww * 0.5, wh * 0.5),\n      ratio: new THREE.Vector2(0, 0),\n      target: new THREE.Vector2(ww * 0.5, wh * 0.5)\n    };\n\n    this.ratioX = 0;\n    this.ratioY = 1;\n\n    var loader = new THREE.TextureLoader();\n    loader.crossOrigin = \"Anonymous\";\n    loader.load(\"/assets/textures/galaxyTexture.jpg\", this.createMesh.bind(this));\n\n    this.initAnimation();\n\n    let scene = this.sceneEl.object3D,\n        renderer = this.sceneEl.renderer;\n\n    renderer.setClearColor(0x003EFF);\n    bufferScene = new THREE.Scene();\n    bufferScene.fog = new THREE.Fog(0x003EFF, 1, 100);\n\n    bufferCamera = new THREE.PerspectiveCamera( 140, ww / wh, .1, 1000 );\n    bufferCamera.lookAt( new THREE.Vector3( 0, 0, -1 ) );\n    bufferCamera.position.y = 1;\n    bufferCamera.position.z = -8;\n\n    // Create texture\n    let dpr = window.devicePixelRatio, resolution = 256*dpr;\n    if (!AFRAME.utils.device.isMobile()) {\n      resolution = 256*dpr*2;\n    }\n\n    bufferTexture = new THREE.WebGLRenderTarget( resolution, resolution*2, { minFilter: THREE.LinearFilter, magFilter: THREE.NearestFilter});\n\n    var repeatX, repeatY;\n    bufferTexture.texture.wrapS = THREE.ClampToEdgeWrapping;\n    bufferTexture.texture.wrapT = THREE.RepeatWrapping;\n    repeatX = 2 / 4;\n    repeatY = 1;\n    bufferTexture.texture.repeat.set(repeatX, repeatY);\n    bufferTexture.texture.offset.x = (repeatX - 1) / 2 * -1;\n\n    // Texture plane\n    let planeGeometry = new THREE.PlaneGeometry( 2, 4 );\n    let planeMaterial = new THREE.MeshBasicMaterial( { color: 0xffffff, map: bufferTexture.texture } );\n    let plane = this.texturePlane = new THREE.Mesh( planeGeometry, planeMaterial );\n    plane.position.set(0,1.1,-4.01);\n    plane.visible = false;\n    document.querySelector('#mainScene').object3D.add( plane );\n\n    rendererBuffer = new THREE.WebGLRenderer( { antialias: false } );\n    rendererBuffer.setClearColor(0x000000)\n    rendererBuffer.setPixelRatio( window.devicePixelRatio );\n    rendererBuffer.setSize( resolution, resolution );\n    rendererBuffer.domElement.style.zIndex = 1000;\n    document.body.appendChild(rendererBuffer.domElement);\n  },\n\n\n  createMesh(texture) {\n    var points = [];\n    var i = 0;\n    var geometry = new THREE.Geometry();\n\n    //if (this.tubeMesh) this.scene.remove(this.tubeMesh);\n\n    for (i = 0; i < 10; i += 1) {\n      points.push(new THREE.Vector3(0, 0, 3 * (i / 4)));\n    }\n    points[4].y = -0.06;\n\n    this.curve = new THREE.CatmullRomCurve3(points);\n    this.curve.type = \"catmullrom\";\n\n    geometry = new THREE.Geometry();\n    geometry.vertices = this.curve.getPoints(90);\n    this.splineMesh = new THREE.Line(geometry, new THREE.LineBasicMaterial());\n\n    this.tubeMaterial = new THREE.MeshBasicMaterial({\n      side: THREE.BackSide,\n      map: texture,\n    });\n    this.tubeMaterial.map.wrapS = THREE.MirroredRepeatWrapping;\n    this.tubeMaterial.map.wrapT = THREE.MirroredRepeatWrapping;\n    this.tubeMaterial.map.repeat.set(\n      this.tubeMaterial.repx,\n      this.tubeMaterial.repy\n    );\n\n    this.tubeGeometry = new THREE.TubeGeometry(this.curve, 90, 0.04, 30, false);\n    this.tubeGeometry_o = this.tubeGeometry.clone();\n    this.tubeMesh = new THREE.Mesh(this.tubeGeometry, this.tubeMaterial);\n\n    this.tubeMesh.scale.set(300, 300, 300);\n    this.tubeMesh.position.set(65, 8, 690);\n    this.tubeMesh.rotation.set(0, -90-45, 45);\n\n    bufferScene.add(this.tubeMesh);\n\n    document.querySelector('#door').addEventListener('doorOpening', ()=>{\n      this.shouldRun = true;\n    });\n\n    document.querySelector('#door').addEventListener('doorOpenned', ()=>{\n      bufferScene.remove(this.tubeMesh);\n      this.el.object3D.add(this.tubeMesh);\n      this.sceneEl.setAttribute('fog', {far: 400});\n      this.shouldRender = false;\n\n      setTimeout(()=>{\n\n        // camera blink\n        CameraBlink(()=>{\n          const comingSoonEl = document.querySelector('#comingSoon');\n          comingSoonEl.setAttribute('position', '0 0 0');\n          comingSoonEl.setAttribute('visible', true);\n\n          const cameraEl = this.sceneEl.querySelector('a-camera');\n          cameraEl.setAttribute('position', '0 1.6 10');\n          cameraEl.children[0].setAttribute('visible', true);\n\n          const envAnimEl = document.createElement('a-animation');\n          envAnimEl.setAttribute('attribute', 'position');\n          envAnimEl.setAttribute('to', '0 1.6 -10');\n          envAnimEl.setAttribute('dur', '40000');\n          envAnimEl.setAttribute('easing', 'linear');\n          envAnimEl.setAttribute('direction', 'alternate');\n          envAnimEl.setAttribute('repeat', 'indefinite');\n          this.sceneEl.querySelector('a-camera').appendChild(envAnimEl);\n\n          this.el.parentNode.removeChild(this.el);\n        });\n\n      }, 4000);\n    });\n  },\n\n  initAnimation() {\n    // Timeline animation\n    this.textureParams = {\n      offsetX: 0,\n      offsetY: 0,\n      repeatX: 10,\n      repeatY: 4\n    };\n    this.cameraShake = {\n      x: 0,\n      y: 0\n    };\n    var self = this;\n    var hyperSpace = new TimelineMax({ repeat: -1 });\n    hyperSpace.to(this.textureParams, 4, {\n      repeatX: 0.3,\n      ease: Power1.easeInOut\n    });\n    hyperSpace.to(\n      this.textureParams,\n      12,\n      {\n        offsetX: 8,\n        ease: Power2.easeInOut\n      },\n      0\n    );\n    hyperSpace.to( this.textureParams, 6,\n      {\n        repeatX: 10,\n        ease: Power2.easeInOut\n      },\n      \"-=5\"\n    );\n  },\n\n  updateMaterialOffset() {\n    this.tubeMaterial.map.offset.x = this.textureParams.offsetX;\n    this.tubeMaterial.map.offset.y += 0.001;\n    this.tubeMaterial.map.repeat.set(\n      this.textureParams.repeatX,\n      this.textureParams.repeatY\n    );\n  },\n\n  updateCurve() {\n    var i = 0;\n    var index = 0;\n    var vertice_o = null;\n    var vertice = null;\n    for (i = 0; i < this.tubeGeometry.vertices.length; i += 1) {\n      vertice_o = this.tubeGeometry_o.vertices[i];\n      vertice = this.tubeGeometry.vertices[i];\n      index = Math.floor(i / 30);\n      vertice.x +=\n        (vertice_o.x + this.splineMesh.geometry.vertices[index].x - vertice.x) /\n        15;\n      vertice.y +=\n        (vertice_o.y + this.splineMesh.geometry.vertices[index].y - vertice.y) /\n        15;\n    }\n    this.tubeGeometry.verticesNeedUpdate = true;\n\n    this.curve.points[2].x = 0.6 * (1 - this.ratioX) - 0.3;\n    this.curve.points[3].x = 0;\n    this.curve.points[4].x = 0.6 * (1 - this.ratioX) - 0.3;\n\n    this.curve.points[2].y = 0.6 * (1 - this.ratioY) - 0.3;\n    this.curve.points[3].y = 0;\n    this.curve.points[4].y = 0.6 * (1 - this.ratioY) - 0.3;\n\n    this.splineMesh.geometry.verticesNeedUpdate = true;\n    this.splineMesh.geometry.vertices = this.curve.getPoints(90);\n  },\n\n  renderToTexture() {\n    if (!this.tubeGeometry || !this.shouldRun) return;\n\n    let scene = this.sceneEl.object3D,\n        renderer = this.sceneEl.renderer;\n\n    renderer.render(bufferScene, bufferCamera, bufferTexture);\n    renderer.setRenderTarget( null );\n    rendererBuffer.render(bufferScene, bufferCamera, bufferTexture)\n  }\n\n});\n","import CameraTransition from './transition';\n\nexport default function CameraBlink(callback) {\n  let transition = new CameraTransition({\n    duration: 210*2\n  });\n  setTimeout(function(){\n    if (transition) transition.end();\n    callback();\n  }, 320*2);\n}\n","import '../styles/confetti.css';\n\nexport default class Confetti {\n\n  constructor(el) {\n    this.el = el;\n    this.containerEl = null;\n\n    this.confettiFrequency = 3;\n    this.confettiColors = ['#fce18a', '#ff726d', '#b48def', '#f4306d'];\n    this.confettiAnimations = ['slow', 'medium', 'fast'];\n\n    this._setupElements();\n    this._renderConfetti();\n  }\n\n  stop() {\n    clearInterval(this.confettiInterval);\n    setTimeout(()=>{ this.el.removeChild(this.containerEl); }, 3000);\n  }\n\n  /* PRIVATE */\n  _setupElements() {\n    const containerEl = document.createElement('div');\n    const elPosition = this.el.style.position;\n\n    if (elPosition !== 'relative' || elPosition !== 'absolute') {\n      this.el.style.position = 'relative';\n    }\n\n    containerEl.classList.add('confetti-container');\n\n    this.el.appendChild(containerEl);\n\n    this.containerEl = containerEl;\n  }\n\n\n  _renderConfetti() {\n    this.confettiInterval = setInterval(() => {\n      const confettiEl = document.createElement('div');\n      const confettiSize = (Math.floor(Math.random() * 3) + 7) + 'px';\n      const confettiBackground = this.confettiColors[Math.floor(Math.random() * this.confettiColors.length)];\n      const confettiLeft = (Math.floor(Math.random() * this.el.offsetWidth)) + 'px';\n      const confettiAnimation = this.confettiAnimations[Math.floor(Math.random() * this.confettiAnimations.length)];\n\n      confettiEl.classList.add('confetti', 'confetti--animation-' + confettiAnimation);\n      confettiEl.style.left = confettiLeft;\n      confettiEl.style.width = confettiSize;\n      confettiEl.style.height = confettiSize;\n      confettiEl.style.backgroundColor = confettiBackground;\n\n      confettiEl.removeTimeout = setTimeout(function() {\n        confettiEl.parentNode.removeChild(confettiEl);\n      }, 3000);\n\n      this.containerEl.appendChild(confettiEl);\n    }, 25);\n  }\n\n}\n","import './lib/rounded';\nimport './loaders/animation-mixer';\nimport './loaders/fbx-model';\nimport './components/tunnel';\nimport './components/stars';\nimport './components/door';\nimport './components/fade';\nimport './components/environment';\nimport './components/particles';\nimport Confetti from './core/confetti';\nimport isEmail from 'validator/lib/isEmail';\n\nimport './styles/index.css';\nimport './styles/button.css';\nimport './styles/shake.css';\nimport './styles/vignette.css';\nimport './styles/modal.css';\nimport './styles/socials.css';\n\nconst API_URL = 'https://api.charlispaces.com';\nwindow.store = [];\n\nconst shakeEl = function(el) {\n  el.classList.add('shake');\n  setTimeout(function() {\n    el.classList.remove('shake');\n  }, 300);\n}\n\n// Remove right click\ndocument.addEventListener('contextmenu', event => event.preventDefault());\n\n// Ready\nlet sceneEl;\ndocument.addEventListener('DOMContentLoaded', function(){\n  sceneEl = document.querySelector('a-scene');\n  sceneEl.addEventListener('loaded', ()=>{\n    sceneEl.components.inspector.remove();\n    document.querySelector('.coming-soon-2d').classList.remove('hide');\n    new App();\n  });\n}, false);\n\nclass App {\n  constructor() {\n    if (!AFRAME.utils.device.isMobile()) {\n      sceneEl.setAttribute('cursor', { rayOrigin: 'mouse' });\n    }\n\n    this.setUpUI();\n  }\n\n  setUpUI() {\n    this.modal = document.querySelector('.modal-container');\n    this.modal.querySelector('.close-button').addEventListener('click', this.closeModal.bind(this));\n    document.querySelector('.notify-me').addEventListener('click', (e)=>{\n      e.preventDefault();\n      this.openModal();\n    });\n    document.querySelector('.let-me-know').addEventListener('click', (e)=>{\n      e.preventDefault();\n      this.validateEmail();\n    });\n  }\n\n  openModal() {\n    window.store.modalOpen = true;\n    this.modal.classList.remove('hide');\n    this.modal.querySelector('.email').focus();\n    setTimeout(()=> { this.modal.classList.remove('fadeIn'); }, 10);\n  }\n\n  closeModal() {\n    window.store.modalOpen = false;\n    this.modal.classList.add('closing');\n    this.modal.classList.add('fadeIn');\n    setTimeout(()=> {\n      this.modal.classList.remove('closing');\n      this.modal.classList.add('hide');\n    }, 600);\n  }\n\n  closeModalWithSuccess() {\n    window.store.modalOpen = false;\n    this.modal.classList.add('closing');\n    this.modal.classList.add('fadeOut');\n    setTimeout(()=> {\n      this.modal.classList.remove('closing');\n      this.modal.classList.add('hide');\n      this.modal.classList.remove('fadeOut');\n      this.modal.classList.add('fadeIn');\n      this.modal.querySelector('.email').value = '';\n      this.modal.querySelector('.wrapper').classList.remove('hide-opacity');\n      this.modal.querySelector('.done').classList.remove('show-opacity');\n      this.modal.querySelector('.done').classList.add('hide');\n      this.modal.querySelector('.pattern').classList.remove('show-opacity');\n      if (window.store.doorOpenned) {\n          setTimeout(()=>{\n            window.location.href = 'https://twitter.com/CharliSpaces';\n          }, 120);\n      }\n    }, 600);\n  }\n\n  isEmailValid(value) {\n    return (!value || !isEmail(value) || value.length > 120) ? false : true;\n  }\n\n  validateEmail() {\n    const inputValue = this.modal.querySelector('.email').value;\n    if (!this.isEmailValid(inputValue)) return this.invalidEmail();\n    this.sendEmailRequest(inputValue);\n  }\n\n  invalidEmail() {\n    shakeEl(this.modal.querySelector('.email'));\n  }\n\n  sendEmailRequest() {\n    const wrapperEl = this.modal.querySelector('.wrapper');\n    const doneEl = this.modal.querySelector('.done');\n    const patternEl = this.modal.querySelector('.pattern');\n    wrapperEl.classList.add('busy');\n\n    // Request...\n    const inputValue = this.modal.querySelector('.email').value;\n\n    var data = new FormData();\n    data.append(\"email\", inputValue);\n\n    fetch(`${API_URL}/newsletter`, {\n      method: 'POST',\n      body: JSON.stringify({ email: inputValue }),\n      headers: {\n        'content-type': 'application/json'\n      }\n    }).then((response)=> {\n      wrapperEl.classList.remove('busy');\n\n      if (response.status === 200 || response.status === 201) {\n        wrapperEl.classList.add('hide-opacity');\n        setTimeout(()=>{ doneEl.classList.remove('hide'); }, 300);\n        setTimeout(()=>{ doneEl.classList.add('show-opacity');\n                         patternEl.classList.add('show-opacity'); }, 310);\n        setTimeout(()=>{ this.closeModalWithSuccess(); }, 2200);\n\n        const confetti = new Confetti(document.body);\n        setTimeout(()=>{ confetti.stop(); }, 2000);\n        return;\n      }\n\n      return this.invalidEmail();\n    }).catch(this.invalidEmail.bind(this));\n  }\n\n}\n","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".socials {\\n  position: fixed;\\n  pointer-events: all;\\n  bottom: 14px;\\n  right: 12px;\\n  opacity: 0.85;\\n}\\n.socials li {\\n  display: inline-block;\\n}\\n.socials a {\\n  display: block;\\n  width: 24px;\\n  height: 24px;\\n}\\n.socials a.facebook {\\n  background: url('/assets/icons/facebook.svg') center no-repeat;\\n  background-size: 70%;\\n}\\n.socials a.twitter {\\n  background: url('/assets/icons/twitter.svg') center no-repeat;\\n  background-size: 70%;\\n}\\n.socials a.instagram {\\n  background: url('/assets/icons/instagram.svg') center no-repeat;\\n  background-size: 70%;\\n}\\n\\nfooter .copyright {\\n  position: fixed;\\n  right: 12px;\\n  font-size: 9px;\\n  color: white;\\n  opacity: 0.5;\\n}\\n\\n\\n/* IPHONE 8+ */\\n@media screen and (max-width: 440px) {\\n  footer {\\n    display: none;\\n  }\\n}\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!./socials.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./socials.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./socials.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".coming-soon-2d .modal {\\n  position: fixed;\\n  top: 50%;\\n  left: 50%;\\n  margin-left: -210px;\\n  margin-top: -150px;\\n  width: 420px;\\n  height: 300px;\\n  background: white;\\n  border-radius: 28px;\\n  z-index: 100;\\n  box-shadow: 0 0 64px rgba(0,0,0,0.3);\\n  box-sizing: border-box;\\n  padding: 0 28px;\\n  overflow: hidden;\\n  transition: transform .3s cubic-bezier(0.175, 0.885, 0.320, 1), margin .3s cubic-bezier(0.175, 0.885, 0.320, 1);\\n}\\n\\n/* IPHONE 8+ */\\n@media screen and (max-width: 440px) {\\n  .coming-soon-2d .modal {\\n    width: 380px;\\n    height: 271px;\\n    margin-left: -190px;\\n    margin-top: -135px;\\n    border-radius: 24px;\\n  }\\n}\\n\\n/* IPHONE 8 */\\n@media screen and (max-width: 390px) {\\n  .coming-soon-2d .modal {\\n    width: 320px;\\n    height: 228px;\\n    margin-left: -160px;\\n    margin-top: -114px;\\n    border-radius: 22px;\\n  }\\n}\\n\\n/* IPHONE 5 */\\n@media screen and (max-width: 330px) {\\n  .coming-soon-2d .modal {\\n    width: 280px;\\n    height: 200px;\\n    margin-left: -140px;\\n    margin-top: -100px;\\n    border-radius: 16px;\\n  }\\n}\\n\\n\\n/* OVERLAY */\\n.coming-soon-2d .modal-container {\\n  transition: opacity .25s ease-in;\\n}\\n.coming-soon-2d .modal-container::before {\\n  content: '';\\n  position: fixed;\\n  background: rgba(0,0,0,0.7);\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n}\\n\\n\\n\\n\\n/* FADE IN / OUT */\\n.coming-soon-2d .modal-container.fadeIn,\\n.coming-soon-2d .modal-container.fadeOut {\\n  opacity: 0;\\n}\\n.coming-soon-2d .modal-container.closing .modal {\\n  transition: transform .2s ease-in, margin .2s ease-in;\\n}\\n.coming-soon-2d .modal-container.fadeIn .modal {\\n  margin-top: 150px;\\n  transform: scale(0.9);\\n}\\n.coming-soon-2d .modal-container.fadeOut .modal {\\n  margin-top: -800px;\\n}\\n\\n\\n\\n.coming-soon-2d .modal .wrapper {\\n  position: relative;\\n  transition: opacity .2s ease-in;\\n}\\n\\n\\n/* CLOSE BUTTON */\\n.coming-soon-2d .modal .close-button {\\n  position: absolute;\\n  display: block;\\n  top: 0;\\n  right: -16px;\\n  width: 42px;\\n  height: 42px;\\n  background: #eff3ff;\\n  border-radius: 50%;\\n  transition: transform .1s ease-in, opacity .1s ease-in;\\n}\\n.coming-soon-2d .modal .close-button:active {\\n  transform: scale(0.98) translateY(2px);\\n  opacity: 0.8;\\n}\\n.coming-soon-2d .modal .close-button span {\\n  display: inline-block;\\n  width: 100%;\\n  height: 100%;\\n  background: url('/assets/icons/closeIcon.svg') center no-repeat;\\n  background-size: 35%;\\n}\\n\\n\\n/* IPHONE 8+ */\\n@media screen and (max-width: 440px) {\\n  .coming-soon-2d .modal .close-button {\\n    width: 40px;\\n    height: 40px;\\n  }\\n}\\n\\n/* IPHONE 8 */\\n@media screen and (max-width: 390px) {\\n  .coming-soon-2d .modal .close-button {\\n    right: -18px;\\n    top: -2px;\\n  }\\n}\\n\\n/* IPHONE 5 */\\n@media screen and (max-width: 330px) {\\n  .coming-soon-2d .modal .close-button {\\n    width: 36px;\\n    height: 36px;\\n    top: 12px;\\n  }\\n}\\n\\n\\n\\n/* TITLE / INPUT */\\n.coming-soon-2d .modal h1 {\\n  text-align: center;\\n  font-size: 20px;\\n  color: #333;\\n  font-weight: bold;\\n  padding-top: 48px;\\n}\\n.coming-soon-2d .modal .input-container {\\n  width: 100%;\\n  margin: auto;\\n  margin-top: 24px;\\n}\\n.coming-soon-2d .modal .input-container input {\\n  display: inline-block;\\n  border: none;\\n  font-size: 24px;\\n  text-align: left;\\n  width: 100%;\\n  font-family: 'Fredoka One', cursive;\\n  outline: none;\\n  caret-color: #003EFF;\\n  color: #003EFF;\\n  background: #F0F0F0;\\n  box-shadow: 0 6px 0 #CCC;\\n  border-radius: 12px;\\n  padding: 14px 20px;\\n  box-sizing: border-box;\\n}\\n\\n/* IPHONE 8+ */\\n@media screen and (max-width: 440px) {\\n  .coming-soon-2d .modal h1 {\\n    padding-top: 38px;\\n  }\\n  .coming-soon-2d .modal .input-container {\\n    margin-top: 16px;\\n  }\\n  .coming-soon-2d .modal .input-container input {\\n    font-size: 20px;\\n    padding: 12px 18px;\\n    box-shadow: 0 5px 0 #CCC;\\n  }\\n}\\n\\n/* IPHONE 8 */\\n@media screen and (max-width: 390px) {\\n  .coming-soon-2d .modal h1 {\\n    font-size: 16px;\\n  }\\n  .coming-soon-2d .modal .input-container {\\n    margin-top: 14px;\\n  }\\n  .coming-soon-2d .modal .input-container input {\\n    font-size: 18px;\\n    padding: 12px 16px;\\n    box-shadow: 0 4px 0 #CCC;\\n  }\\n}\\n\\n/* IPHONE 5 */\\n@media screen and (max-width: 330px) {\\n  .coming-soon-2d .modal h1 {\\n    font-size: 13px;\\n    max-width: 80%;\\n    margin: auto;\\n  }\\n  .coming-soon-2d .modal .input-container input {\\n    font-size: 16px;\\n    padding: 8px 14px;\\n    box-shadow: 0 3px 0 #CCC;\\n  }\\n}\\n\\n\\n\\n\\n/* DONE BUTTON */\\n.coming-soon-2d .modal .let-me-know {\\n  display: inline-block;\\n  margin-top: 28px;\\n  transform: scale(0.8);\\n  transform-origin: top;\\n}\\n.coming-soon-2d .modal .let-me-know::before {\\n  background: #eff3ff;\\n}\\n\\n/* IPHONE 8+ */\\n@media screen and (max-width: 440px) {\\n  .coming-soon-2d .modal .let-me-know  {\\n    margin-top: 22px;\\n    transform: scale(0.6);\\n  }\\n}\\n\\n/* IPHONE 8 */\\n@media screen and (max-width: 390px) {\\n  .coming-soon-2d .modal .let-me-know  {\\n    margin-top: 16px;\\n    transform: scale(0.5);\\n  }\\n}\\n\\n/* IPHONE 5 */\\n@media screen and (max-width: 330px) {\\n  .coming-soon-2d .modal .let-me-know  {\\n    margin-top: 14px;\\n  }\\n}\\n\\n\\n\\n\\n/* MODAL DONE */\\n.coming-soon-2d .done {\\n  opacity: 0;\\n  height: 100%;\\n  position: relative;\\n  transition: opacity .2s ease-in;\\n}\\n.coming-soon-2d .done .content {\\n  position: absolute;\\n  z-index: 10;\\n  top: 0;\\n  left: 0;\\n}\\n.coming-soon-2d .done h1 {\\n  font-size: 42px;\\n  padding-top: 54px;\\n  color: #003EFF;\\n}\\n\\n\\n\\n/* IPHONE 8+ */\\n@media screen and (max-width: 440px) {\\n  .coming-soon-2d .done h1 {\\n    font-size: 36px;\\n    padding-top: 64px;\\n  }\\n}\\n\\n/* IPHONE 8 */\\n@media screen and (max-width: 390px) {\\n  .coming-soon-2d .done h1 {\\n    font-size: 32px;\\n    padding-top: 48px;\\n  }\\n}\\n\\n/* IPHONE 5 */\\n@media screen and (max-width: 330px) {\\n  .coming-soon-2d .done h1 {\\n    font-size: 26px;\\n    padding-top: 72px;\\n  }\\n}\\n\\n\\n\\n\\n\\n.coming-soon-2d .pattern {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  opacity: 0;\\n  transition: opacity .2s ease-in;\\n}\\n\\n/* MODAL DONE */\\n.coming-soon-2d .pattern::before,\\n.coming-soon-2d .pattern::after {\\n  content: '';\\n  position: absolute;\\n  z-index: -1;\\n  width: 100%;\\n  height: 100%;\\n  left: 0;\\n  top: 0;\\n  background: white url('/assets/images/pattern.png') center repeat;\\n  background-size: 65%;\\n  opacity: 0.12;\\n}\\n.coming-soon-2d .pattern::after {\\n  background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,1));\\n  opacity: 1;\\n}\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!./modal.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./modal.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./modal.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".coming-soon-2d {\\n  position: fixed;\\n  z-index: 1000;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  pointer-events: none;\\n}\\n.coming-soon-2d .vignette {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  box-shadow: inset 0 0 140px #0030c5;\\n  transition: opacity 0.2s linear;\\n}\\n.coming-soon-2d .content {\\n  position: fixed;\\n  bottom: 28px;\\n  width: 100%;\\n  text-align: center;\\n}\\n.coming-soon-2d .content .notify-me,\\n.coming-soon-2d .content .modal {\\n  pointer-events: all;\\n}\\n\\n@media screen and (max-width: 720px) {\\n  .coming-soon-2d button {\\n    transform: scale(0.8);\\n  }\\n}\\n\\n@media screen and (max-width: 520px) {\\n  .coming-soon-2d {\\n    box-shadow: inset 0 0 100px #0030c5;\\n  }\\n}\\n\\n@media screen and (max-width: 420px) {\\n  .coming-soon-2d {\\n    box-shadow: inset 0 0 64px #0030c5;\\n  }\\n}\\n\\n.app.blink .coming-soon-2d .vignette {\\n  opacity: 0;\\n}\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!./vignette.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./vignette.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./vignette.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/* SHAKE EFFECT */\\n.shake {\\n  position: relative;\\n  animation: shake .1s linear;\\n  animation-iteration-count: 3;\\n}\\n@keyframes shake {\\n  0% { left: -5px; }\\n  100% { right: -5px; }\\n}\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!./shake.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./shake.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./shake.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"button {\\n  outline: none;\\n  position: relative;\\n  border: none;\\n  background: none;\\n  font-family: 'Fredoka One', cursive;\\n  padding: 6px;\\n  transform-origin: bottom;\\n}\\nbutton::before {\\n  content: '';\\n  display: block;\\n  position: absolute;\\n  z-index: -1;\\n  background: rgba(0,0,0,.12);\\n  width: 100%;\\n  height: 100%;\\n  top: 1px;\\n  left: -4px;\\n  border-radius: 28px;\\n  padding: 4px;\\n  transition: transform .1s ease-in;\\n}\\nbutton:hover .inner {\\n  opacity: .95;\\n}\\n\\nbutton:active::before {\\n  transform: scale(0.98) translateY(2px);\\n}\\nbutton:active .outer {\\n  box-shadow: 0 10px 10px rgba(0,0,0,.3);\\n  -webkit-animation-play-state: paused;\\n  -moz-animation-play-state: paused;\\n  -o-animation-play-state: paused;\\n  animation-play-state: paused;\\n}\\nbutton:active .inner {\\n  opacity: 1;\\n  box-shadow: 0 2px 0 #022ba9;\\n  transform: translateY(4px);\\n}\\nbutton .outer  {\\n  display: block;\\n  border-radius: 24px;\\n  box-shadow: 0 10px 20px rgba(0,0,0,.6);\\n  animation-name: buttonAnimation;\\n  animation-duration: 1.2s;\\n  animation-iteration-count: infinite;\\n  animation-direction: reverse;\\n  animation-timing-function: linear;\\n}\\nbutton .inner {\\n  display: block;\\n  color: white;\\n  background: #003EFF;\\n  box-shadow: 0 6px 0 #022ba9;\\n  border-radius: 24px;\\n  padding: 12px 42px;\\n  font-weight: bold;\\n  font-size: 26px;\\n  text-transform: uppercase;\\n  transition: all .1s ease-in;\\n}\\n\\n@keyframes buttonAnimation {\\n  0% {\\n    transform: rotate(1.5deg);\\n  }\\n\\n  50% {\\n    transform: rotate(-1.5deg);\\n  }\\n\\n  100% {\\n    transform: rotate(1.5deg);\\n  }\\n}\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!./button.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./button.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./button.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.app {\\n  position: fixed;\\n  width: 100%;\\n  height: 100%;\\n  cursor: -webkit-image-set(url(/assets/cursors/cursor.png) 1x,url(/assets/cursors/cursor@2x.png) 2x) 0 0,default;\\n}\\nbutton, .click, a {\\n  cursor:-webkit-image-set(url(/assets/cursors/cursorButton.png) 1x,url(/assets/cursors/cursorButton@2x.png) 2x) 0 0,pointer;\\n}\\ninput {\\n  cursor:-webkit-image-set(url(/assets/cursors/cursorInput.png) 1x,url(/assets/cursors/cursorInput@2x.png) 2x) 0 0,pointer;\\n}\\n\\n.hide {\\n  display: none !important;\\n}\\n\\n.hide-opacity {\\n  opacity: 0 !important;\\n  pointer-events: none;\\n}\\n\\n.show-opacity {\\n  opacity: 1 !important;\\n}\\n\\n.busy {\\n  opacity: 0.6;\\n  pointer-events: none;\\n}\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!./index.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./index.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./index.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isFQDN;\n\nvar _assertString = require('./util/assertString');\n\nvar _assertString2 = _interopRequireDefault(_assertString);\n\nvar _merge = require('./util/merge');\n\nvar _merge2 = _interopRequireDefault(_merge);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar default_fqdn_options = {\n  require_tld: true,\n  allow_underscores: false,\n  allow_trailing_dot: false\n};\n\nfunction isFQDN(str, options) {\n  (0, _assertString2.default)(str);\n  options = (0, _merge2.default)(options, default_fqdn_options);\n\n  /* Remove the optional trailing dot before checking validity */\n  if (options.allow_trailing_dot && str[str.length - 1] === '.') {\n    str = str.substring(0, str.length - 1);\n  }\n  var parts = str.split('.');\n  if (options.require_tld) {\n    var tld = parts.pop();\n    if (!parts.length || !/^([a-z\\u00a1-\\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(tld)) {\n      return false;\n    }\n    // disallow spaces\n    if (/[\\s\\u2002-\\u200B\\u202F\\u205F\\u3000\\uFEFF\\uDB40\\uDC20]/.test(tld)) {\n      return false;\n    }\n  }\n  for (var part, i = 0; i < parts.length; i++) {\n    part = parts[i];\n    if (options.allow_underscores) {\n      part = part.replace(/_/g, '');\n    }\n    if (!/^[a-z\\u00a1-\\uffff0-9-]+$/i.test(part)) {\n      return false;\n    }\n    // disallow full-width chars\n    if (/[\\uff01-\\uff5e]/.test(part)) {\n      return false;\n    }\n    if (part[0] === '-' || part[part.length - 1] === '-') {\n      return false;\n    }\n  }\n  return true;\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.default = isByteLength;\n\nvar _assertString = require('./util/assertString');\n\nvar _assertString2 = _interopRequireDefault(_assertString);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable prefer-rest-params */\nfunction isByteLength(str, options) {\n  (0, _assertString2.default)(str);\n  var min = void 0;\n  var max = void 0;\n  if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {\n    min = options.min || 0;\n    max = options.max;\n  } else {\n    // backwards compatibility: isByteLength(str, min [, max])\n    min = arguments[1];\n    max = arguments[2];\n  }\n  var len = encodeURI(str).split(/%..|./).length - 1;\n  return len >= min && (typeof max === 'undefined' || len <= max);\n}\nmodule.exports = exports['default'];","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"@keyframes confetti-slow {\\n  0% {\\n    transform: translate3d(0, 0, 0) rotateX(0) rotateY(0);\\n  }\\n  100% {\\n    transform: translate3d(25px, 105vh, 0) rotateX(360deg) rotateY(180deg);\\n  }\\n}\\n@keyframes confetti-medium {\\n  0% {\\n    transform: translate3d(0, 0, 0) rotateX(0) rotateY(0);\\n  }\\n  100% {\\n    transform: translate3d(100px, 105vh, 0) rotateX(100deg) rotateY(360deg);\\n  }\\n}\\n@keyframes confetti-fast {\\n  0% {\\n    transform: translate3d(0, 0, 0) rotateX(0) rotateY(0);\\n  }\\n  100% {\\n    transform: translate3d(-50px, 105vh, 0) rotateX(10deg) rotateY(250deg);\\n  }\\n}\\n\\n.confetti-container {\\n  perspective: 700px;\\n  position: absolute;\\n  overflow: hidden;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n}\\n\\n.confetti {\\n  position: absolute;\\n  z-index: 1;\\n  top: -10px;\\n  border-radius: 0%;\\n}\\n.confetti--animation-slow {\\n  animation: confetti-slow 2.25s linear 1 forwards;\\n}\\n.confetti--animation-medium {\\n  animation: confetti-medium 1.75s linear 1 forwards;\\n}\\n.confetti--animation-fast {\\n  animation: confetti-fast 1.25s linear 1 forwards;\\n}\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!./confetti.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./confetti.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./confetti.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","const texture = new THREE.TextureLoader().load('/assets/textures/ghostParticle.png');\nlet mainSceneObject = null;\n\nvar ww = window.innerWidth;\nvar wh = window.innerHeight;\n\nvar isMobile = ww < 500;\n\nclass Particle {\n\n  constructor(scene, burst, time) {\n    var radius = this.radius = Math.random()*0.1 + 0.09;\n\n    this.color = new THREE.Color(\"hsl(\"+(Math.random()*50+180)+\",100%,75%)\");\n\n    var mat = new THREE.MeshBasicMaterial({\n      color: this.color,\n      transparent: true,\n      map: texture,\n      side: THREE.DoubleSide,\n      flatShading: true,\n      transparent: true,\n      depthTest: false\n    });\n    this.mesh = new THREE.Mesh(new THREE.PlaneGeometry(1, 1), mat);\n    this.mesh.scale.set(radius*8, radius, radius);\n    this.percent = Math.random();\n    this.speed = Math.random()*0.003 + 0.01;\n    this.setRotation();\n    scene.add(this.mesh);\n  }\n\n  setRotation() {\n    // Get random angle\n    let angle = Math.random()*360;\n\n    // Align particle to circle\n    let displacement = new THREE.Vector2(Math.sin(angle), Math.cos(angle));\n    this.mesh.position.set(Math.sin(angle), Math.cos(angle),-1.5-Math.random()*0.1);\n    this.mesh.rotation.z = 80-angle;\n  }\n\n  update() {\n    this.percent += this.speed;\n    if (this.percent > 1) {\n      this.percent = 0;\n      this.setRotation();\n    }\n\n    this.mesh.scale.y = this.radius+(this.radius*this.percent);\n    if (this.percent < 0.5) {\n      this.mesh.material.opacity = (this.percent*2)*.28;\n    }\n    else {\n      this.mesh.material.opacity = (1-(this.percent-0.5)*2)*.28;\n    }\n  }\n}\n\n\nAFRAME.registerComponent('ghostparticles', {\n  schema: {},\n\n  init() {\n    this.particles = [];\n    this.el.sceneEl.addEventListener('loaded', ()=>{\n      this.sceneEl = this.el.sceneEl;\n      this.scene = this.el.sceneEl.object3D;\n      setTimeout(()=>this.setUp(), 0);\n    });\n  },\n\n  tick(t) {\n    if (!this.el.parentNode.object3D.visible) return;\n    for (var i = 0; i < this.particles.length; i++){\n       this.particles[i].update(this);\n    }\n  },\n\n  setUp() {\n    this.particles = [];\n    for(var i = 0; i < 70; i++){\n      this.particles.push(new Particle( this.el.object3D ));\n    }\n  }\n\n});\n","/* global AFRAME, THREE */\n\nif (typeof AFRAME === 'undefined') {\n  throw new Error('Component attempted to register before AFRAME was available.');\n}\n\n/**\n * enviroGetSettings() - console function for printing out the current environment settings\n */\nfunction enviroGetSettings () {\n  document.querySelector('[environment]').components['environment'].logPreset();\n}\n\nAFRAME.registerComponent('environment', {\n  schema: {\n    active: {default: false},\n    preset: {default: 'default', oneOf: ['none', 'default', 'contact', 'egypt', 'checkerboard', 'forest', 'goaland', 'yavapai', 'goldmine', 'arches', 'threetowers', 'poison', 'tron', 'japan', 'dream', 'volcano', 'starry', 'osiris']},\n    seed: {type: 'int', default: 1, min: 0, max: 1000},\n\n    skyType: {default: 'color', oneOf:['none', 'color', 'gradient', 'atmosphere']},\n    skyColor: {type: 'color'},\n    horizonColor: {type: 'color'},\n    lighting: {default: 'distant', oneOf: ['none', 'distant', 'point']},\n    shadow: {default: false},\n    shadowSize: { default: 10},\n    lightPosition: {type:'vec3', default: {x: 0, y: 1, z: -0.2}},\n    fog: {type:'float', default: 0, min: 0, max: 1},\n\n    flatShading: {default: false},\n    playArea: {type: 'float', default: 1, min: 1, max: 100},\n\n    ground: {default: 'hills', oneOf:['none', 'flat', 'hills', 'canyon', 'spikes', 'noise']},\n    groundYScale: {type: 'float', default: 3, min: 0, max: 50},\n    groundTexture: {default: 'none', oneOf:['none', 'checkerboard', 'squares', 'walkernoise']},\n    groundColor:  {type: 'color', default: '#553e35'},\n    groundColor2: {type: 'color', default: '#694439'},\n\n    dressing: {default: 'none', oneOf:['none', 'cubes', 'pyramids', 'cylinders', 'hexagons', 'stones', 'trees', 'mushrooms', 'towers', 'apparatus', 'arches', 'torii']},\n    dressingAmount: {type: 'int', default: 10, min: 0, max: 1000},\n    dressingColor:  {type: 'color', default: '#795449'},\n    dressingScale: {type: 'float', default: 5, min: 0, max: 100},\n    dressingVariance: {type: 'vec3', default: {x: 1, y: 1, z: 1}},\n    dressingUniformScale: {default: true},\n    dressingOnPlayArea: {type: 'float', default: 0, min: 0, max: 1},\n\n    grid: {default:'none', oneOf:['none', '1x1', '2x2', 'crosses', 'dots', 'xlines', 'ylines']},\n    gridColor: {type: 'color', default: '#ccc'}\n  },\n\n  multiple: false,\n\n  presets: {\n    'none' : {},\n    'default' : {active: true, seed: 1, skyType: 'atmosphere', skyColor: '#88c', horizonColor: '#ddd', lighting: 'distant', lightPosition: { x: -0.11, y: 1, z: 0.33}, fog: 0.78, flatShading: false, playArea: 1, ground: 'hills', groundYScale: 3, groundTexture: 'checkerboard', groundColor: '#454545', groundColor2: '#5d5d5d', dressing: 'none', dressingAmount: 10, dressingColor: '#795449', dressingScale: 1, dressingVariance: { x: 0, y: 0, z: 0}, dressingUniformScale: true, dressingOnPlayArea: 0, grid: 'none', gridColor: '#ccc', shadow: false},\n    'contact': {active: true, seed: 14, skyType: 'gradient', skyColor: '#478d54', horizonColor: '#b696cb', lighting: 'distant', lightPosition: { x: 0, y: 2.01, z: -1}, fog: 0.8, flatShading: false, playArea: 1, ground: 'spikes', groundYScale: 4.91, groundTexture: 'none', groundColor: '#2e455f', groundColor2: '#694439', dressing: 'apparatus', dressingAmount: 7, dressingColor: '#657067', dressingScale: 20, dressingVariance: { x: 20, y: 20, z: 20}, dressingUniformScale: true, dressingOnPlayArea: 0, grid: '1x1', gridColor: '#478d54', shadow: false},\n    'egypt': {active: true, seed: 26, skyType: 'gradient', skyColor: '#1b7660', horizonColor: '#e4b676', lighting: 'distant', lightPosition: { x: 0, y: 1.65, z: -1}, fog: 0.75, flatShading: false, playArea: 1, ground: 'hills', groundYScale: 5, groundTexture: 'walkernoise', groundColor: '#664735', groundColor2: '#6c4b39', dressing: 'pyramids', dressingAmount: 10, dressingColor: '#7c5c45', dressingScale: 5, dressingVariance: { x: 20, y: 20, z: 20}, dressingUniformScale: true, dressingOnPlayArea: 0, grid: 'spots', gridColor: '#e4b676', shadow: false},\n    'checkerboard': {active: true, seed: 1, skyType: 'gradient', skyColor: '#0d0d0d', horizonColor: '#404040', lighting: 'distant', lightPosition: { x: 0, y: 1, z: -0.2}, fog: 0.81, flatShading: true, playArea: 1, ground: 'hills', groundYScale: 4.81, groundTexture: 'checkerboard', groundColor: '#252525', groundColor2: '#111111', dressing: 'cubes', dressingAmount: 10, dressingColor: '#9f9f9f', dressingScale: 1.51, dressingVariance: { x: 5, y: 20, z: 5}, dressingUniformScale: true, dressingOnPlayArea: 0, grid: 'dots', gridColor: '#ccc', shadow: false},\n    'forest': {active: true, seed: 8, skyType: 'gradient', skyColor: '#24b59f', horizonColor: '#eff9b7', lighting: 'distant', lightPosition: { x: -1.2, y: 0.88, z: -0.55}, fog: 0.8, flatShading: false, playArea: 1, ground: 'noise', groundYScale: 4.18, groundTexture: 'squares', groundColor: '#937a24', groundColor2: '#987d2e', dressing: 'trees', dressingAmount: 500, dressingColor: '#888b1d', dressingScale: 1, dressingVariance: { x: 10, y: 10, z: 10}, dressingUniformScale: true, dressingOnPlayArea: 0, grid: 'none', gridColor: '#c5a543', shadow: false},\n    'goaland': {active: true, seed: 17, skyType: 'gradient', skyColor: '#14645f', horizonColor: '#a3dab8', lighting: 'point', lightPosition: { x: 0.1, y: 4, z: 0.56}, fog: 0.73, flatShading: false, playArea: 1, ground: 'noise', groundYScale: 0.81, groundTexture: 'none', groundColor: '#ae3241', groundColor2: '#db4453', dressing: 'mushrooms', dressingAmount: 150, dressingColor: '#a9313d', dressingScale: 5, dressingVariance: { x: 5, y: 10, z: 5}, dressingUniformScale: true, dressingOnPlayArea: 0, grid: 'dots', gridColor: '#239893', shadow: false},\n    'yavapai': {active: true, seed: 11, skyType: 'gradient', skyColor: '#239849', horizonColor: '#cfe0af', lighting: 'distant', lightPosition: { x: 0.5, y: 1, z: 0}, fog: 0.8, flatShading: true, playArea: 1, ground: 'canyon', groundYScale: 9.76, groundTexture: 'walkernoise', groundColor: '#C66344', groundColor2: '#c96b4b', dressing: 'stones', dressingAmount: 500, dressingColor: '#C66344', dressingScale: 0.06, dressingVariance: { x: 0.2, y: 0.1, z: 0.2}, dressingUniformScale: true, dressingOnPlayArea: 1, grid: 'none', gridColor: '#239893', shadow: false},\n    'goldmine': {active: true, seed: 53, skyType: 'gradient', skyColor: '#1e1c1a', horizonColor: '#8c7964', lighting: 'point', lightPosition: { x: -0.09, y: 3, z: 0.33}, fog: 0.43, flatShading: true, playArea: 1.08, ground: 'canyon', groundYScale: 50, groundTexture: 'none', groundColor: '#353535', groundColor2: '#454545', dressing: 'hexagons', dressingAmount: 300, dressingColor: '#fe921b', dressingScale: 0.5, dressingVariance: { x: 2, y: 8, z: 2}, dressingUniformScale: true, dressingOnPlayArea: 0.03, grid: 'none', gridColor: '#ccc', shadow: false},\n    'threetowers': {active: true, seed: 5, skyType: 'gradient', skyColor: '#23a06b', horizonColor: '#f5e170', lighting: 'distant', lightPosition: { x: 0.5, y: 1, z: 0}, fog: 0.8, flatShading: false, playArea: 1, ground: 'spikes', groundYScale: 4.26, groundTexture: 'walkernoise', groundColor: '#273a49', groundColor2: '#2b464f', dressing: 'towers', dressingAmount: 3, dressingColor: '#5f6d94', dressingScale: 50, dressingVariance: { x: 10, y: 100, z: 10}, dressingUniformScale: true, dressingOnPlayArea: 0, grid: 'none', gridColor: '#239893', shadow: false},\n    'poison': {active: true, seed: 92, skyType: 'gradient', skyColor: '#1ea84a', horizonColor: '#177132', lighting: 'distant', lightPosition: { x: 0.5, y: 1, z: 0}, fog: 0.8, flatShading: false, playArea: 1, ground: 'canyon', groundYScale: 9.76, groundTexture: 'none', groundColor: '#851f31', groundColor2: '#912235', dressing: 'hexagons', dressingAmount: 20, dressingColor: '#c7415b', dressingScale: 20, dressingVariance: { x: 20, y: 200, z: 20}, dressingUniformScale: false, dressingOnPlayArea: 0, grid: 'crosses', gridColor: '#1ea84a', shadow: false},\n    'arches': {active: true, seed: 19, skyType: 'atmosphere', skyColor: '#8cbdc8', horizonColor: '#ddd', lighting: 'distant', lightPosition: { x: -0.11, y: 0.16, z: 0.33}, fog: 0.67, flatShading: true, playArea: 1, ground: 'canyon', groundYScale: 10, groundTexture: 'walkernoise', groundColor: '#a87d6f', groundColor2: '#795449', dressing: 'arches', dressingAmount: 6, dressingColor: '#795449', dressingScale: 26, dressingVariance: { x: 20, y: 40, z: 20}, dressingUniformScale: true, dressingOnPlayArea: 0.04, grid: 'none', gridColor: '#ccc', shadow: false},\n    'tron': {active: true, seed: 14, skyType: 'gradient', skyColor: '#091b39', horizonColor: '#284a9e', lighting: 'distant', lightPosition: { x: -0.72, y: 0.62, z: 0.4}, fog: 0.8, flatShading: false, playArea: 1, ground: 'spikes', groundYScale: 4.91, groundTexture: 'none', groundColor: '#061123', groundColor2: '#694439', dressing: 'towers', dressingAmount: 5, dressingColor: '#fb000e', dressingScale: 15, dressingVariance: { x: 20, y: 20, z: 20}, dressingUniformScale: true, dressingOnPlayArea: 0, grid: '1x1', gridColor: '#fb000e', shadow: false},\n    'japan': {active: true, seed: 14, skyType: 'gradient', skyColor: '#7e5db5', horizonColor: '#b4adda', lighting: 'distant', lightPosition: { x: 1.33, y: 1, z: 0.24}, fog: 0.9, flatShading: false, playArea: 1, ground: 'hills', groundYScale: 25, groundTexture: 'walkernoise', groundColor: '#7e5db5', groundColor2: '#cabdf5', dressing: 'torii', dressingAmount: 4, dressingColor: '#bc5e7c', dressingScale: 15, dressingVariance: { x: 0, y: 0, z: 0}, dressingUniformScale: true, dressingOnPlayArea: 0, grid: 'spots', gridColor: '#e4b676', shadow: false},\n    'dream': {active: true, seed: 17, skyType: 'gradient', skyColor: '#87faf4', horizonColor: '#b34093', lighting: 'distant', lightPosition: { x: -0.72, y: 0.53, z: 0.97}, fog: 0.8, flatShading: false, playArea: 1, ground: 'hills', groundYScale: 20, groundTexture: 'checkerboard', groundColor: '#b34093', groundColor2: '#c050a2', dressing: 'mushrooms', dressingAmount: 300, dressingColor: '#3cf7ed', dressingScale: 0.2, dressingVariance: { x: 0.2, y: 0.2, z: 0.2}, dressingUniformScale: true, dressingOnPlayArea: 1, grid: 'none', gridColor: '#239893', shadow: false},\n    'volcano': {active: true, seed: 92, skyType: 'gradient', skyColor: '#4a070f', horizonColor: '#f62300', lighting: 'point', lightPosition: { x: 0.5, y: 2.25, z: 0}, fog: 0.87, flatShading: false, playArea: 1, ground: 'canyon', groundYScale: 9.76, groundTexture: 'walkernoise', groundColor: '#fb0803', groundColor2: '#510000', dressing: 'arches', dressingAmount: 15, dressingColor: '#fb0803', dressingScale: 3, dressingVariance: { x: 10, y: 100, z: 10}, dressingUniformScale: false, dressingOnPlayArea: 0.2, grid: 'none', gridColor: '#fa0e00', shadow: false},\n    'starry': {active: true, seed: 1, skyType: 'atmosphere', skyColor: '#88c', horizonColor: '#ddd', lighting: 'distant', lightPosition: { x: 0, y: -0.01, z: -0.46}, fog: 0.7, flatShading: false, playArea: 1, ground: 'hills', groundYScale: 3, groundTexture: 'none', groundColor: '#553e35', groundColor2: '#694439', dressing: 'none', dressingAmount: 100, dressingColor: '#795449', dressingScale: 5, dressingVariance: { x: 1, y: 1, z: 1}, dressingUniformScale: true, grid: '1x1', dressingOnPlayArea: 0, gridColor: '#39d2f2', shadow: false},\n    'osiris': {active: true, seed: 46, skyType: 'atmosphere', skyColor: '#88c', horizonColor: '#ddd', lighting: 'distant', lightPosition: { x: 0, y: 0.02, z: -0.46}, fog: 0, flatShading: false, playArea: 1, ground: 'hills', groundYScale: 3, groundTexture: 'none', groundColor: '#9e7b47', groundColor2: '#9e7b47', dressing: 'pyramids', dressingAmount: 7, dressingColor: '#9e7b47', dressingScale: 5, dressingVariance: { x: 30, y: 30, z: 30}, dressingUniformScale: true, grid: 'dots', dressingOnPlayArea: 0, gridColor: '#daa452', shadow: false}\n  },\n\n  init: function () {\n    // stage ground diameter (and sky radius)\n    this.STAGE_SIZE = 200;\n\n    // data for dressing meshes\n    this.assets = {\n      'arches': [\n        {\n          type: 'mesh',\n          vertices: [409,268,4,351,228,36,336,236,-57,-152,391,69,-135,358,88,-119,330,43,-20,358,-35,-153,357,-47,37,413,-26,-20,411,-14,-302,148,154,-339,121,-126,-389,200,-88,-477,193,-76,-314,346,-19,-314,306,-30,-250,296,-73,-267,237,-82,-212,303,-68,-245,200,-67,-223,304,108,-329,299,107,-289,350,76,-320,342,69,119,373,-39,38,370,8,113,367,52,492,202,-31,462,83,-104,447,71,-80,426,112,25,482,189,-7,222,372,6,121,402,41,87,382,67,221,346,55,559,93,-13,528,47,39,505,21,-111,528,54,-101,616,31,-53,442,256,-15,300,338,19,257,308,-79,408,256,-74,312,352,-26,384,297,-31,437,257,-47,-29,415,53,-232,377,59,-139,335,77,-132,344,2,-18,377,-37,-171,387,-28,-254,384,18,-651,-27,27,-435,-28,179,-345,149,165,-272,-28,23,-215,146,-2,-279,-29,-59,-211,145,-55,-337,-28,-128,-413,247,0,-293,363,24,-214,254,-36,-164,290,33,-284,150,94,-218,362,105,75,369,29,518,147,-63,447,190,-70,445,56,-105,391,185,-60,431,49,-33,459,83,26,470,162,42,130,390,53,167,341,-30,125,394,-45,239,368,-17,91,414,10,450,18,2,449,-27,-9,436,-28,-58,496,-27,-110,582,-28,-140,647,-27,-56,325,325,-45,-307,297,-56,-647,-28,-45,-188,310,-54,-264,197,113,-367,175,139,8,387,82,426,45,-55,114,359,-28,500,27,44,461,-29,13,-512,-27,-151,-152,376,-38,-490,-28,148,12,370,-28,442,160,42,465,194,32,381,183,-33,649,-27,-34,444,16,29,616,-28,25,417,267,-66,-132,352,-34,-322,-27,130,-271,86,-115,-635,-28,-121,-291,203,-99,176,405,-10,561,52,-93,371,305,9,311,237,-22,377,200,-81,-129,406,46,-154,371,99,-82,361,71,-21,354,26,-91,363,-27,-165,413,-12,-414,215,110,-238,127,26,-408,-28,-128,-674,-28,-94,-446,232,-39,-311,226,-90,-255,210,-61,-235,192,-11,-217,218,58,-269,299,124,-386,276,78,-399,281,42,15,373,58,16,393,75,549,107,-46,481,188,-68,409,120,-41,541,81,12,230,368,41,194,350,-50,224,361,-50,604,-28,-10,602,-27,35,486,56,-121,502,69,-120,457,-27,-110,226,317,-40,-584,-28,-124,439,-26,-30,467,-26,39,547,-27,-146,21,368,14,466,229,-29,578,-27,44,609,-27,-96,291,356,-15,290,306,34,255,321,28,231,311,-5,-251,386,50,-183,307,87,-152,307,24,-264,373,-12,-392,-27,190,-333,-28,84,-281,-27,54,-270,-28,-23,-308,-28,-101,-687,-27,-59,39,418,39,413,163,25,404,206,-90,54,400,-31,121,352,8,-454,41,148,-426,9,182,-564,115,3,-427,27,-107,-548,118,-32,-556,122,-53,-517,91,-101,-475,54,140,-461,52,-134,-558,119,-71,-434,286,59,-687,-31,52,-595,146,22,-670,-28,164,-537,166,122,-575,-28,217,-566,159,65,-470,152,136,-712,-29,102,-639,-29,211,-532,-30,181,-442,-30,-100],\n          faces: [76,104,162,1,176,103,103,76,1,2,119,73,73,105,2,2,118,152,45,161,46,46,109,45,3,120,49,49,68,3,3,121,139,139,48,3,4,122,94,94,121,4,6,123,124,9,175,81,10,169,111,10,67,92,88,43,146,11,131,114,11,128,183,13,130,15,90,184,174,90,182,184,130,184,63,14,130,63,15,130,14,16,131,12,15,168,53,18,91,17,131,16,17,65,133,132,65,132,91,67,134,166,166,92,67,20,135,92,20,166,4,4,121,20,22,135,68,25,102,96,25,157,102,69,138,157,69,157,25,39,150,71,71,141,39,28,150,149,149,72,28,142,176,105,36,140,27,27,143,36,32,115,81,32,144,161,161,80,32,77,35,144,34,26,77,78,179,96,145,152,78,178,79,145,80,146,79,147,140,36,143,108,36,143,37,148,74,95,154,154,83,74,72,149,151,151,95,72,38,150,156,40,147,106,70,140,40,40,116,70,42,162,0,35,163,162,43,145,146,46,117,41,47,158,27,48,139,175,122,138,94,157,138,123,52,178,102,52,102,6,52,124,7,7,100,52,53,125,8,57,93,181,56,169,181,59,127,58,60,173,61,62,128,11,11,112,62,65,91,167,65,167,66,126,93,21,22,68,49,72,95,29,142,29,74,74,82,142,75,107,97,75,97,103,76,97,37,104,143,31,78,152,164,78,164,179,79,178,8,97,155,159,107,98,155,83,98,82,154,95,84,39,116,86,86,156,39,87,160,116,24,145,96,162,104,0,105,118,2,43,177,119,44,177,43,91,51,167,44,88,109,46,161,117,3,68,121,3,48,120,4,166,50,50,122,4,5,123,122,123,138,122,110,124,51,170,10,111,110,91,7,7,124,110,8,125,9,9,81,8,186,12,188,92,135,10,11,114,112,64,63,137,13,15,89,89,53,100,64,168,14,14,168,15,89,100,16,16,12,89,100,18,16,17,91,132,112,19,61,18,7,91,19,17,132,133,127,59,133,59,61,136,21,22,134,127,133,20,92,166,121,135,20,158,31,27,21,135,22,23,137,136,24,102,178,178,145,24,25,179,69,26,94,138,27,140,70,27,70,141,150,177,71,28,177,150,29,142,73,73,119,29,142,82,30,30,176,142,107,75,82,31,143,27,33,81,175,31,41,104,115,79,8,32,33,144,80,115,32,33,175,139,35,162,42,77,139,34,163,26,179,163,179,164,78,96,145,177,29,119,108,143,148,148,37,159,97,159,37,74,83,82,38,149,150,156,150,39,40,106,87,87,116,40,140,147,40,161,144,42,42,117,161,41,0,104,41,117,0,0,117,42,164,118,163,1,163,118,118,176,1,118,105,176,152,118,164,43,152,145,43,119,2,71,109,141,47,41,158,44,71,177,45,109,88,45,88,146,46,47,109,141,47,27,167,50,166,49,120,165,139,121,94,5,122,50,123,51,124,157,6,102,157,123,6,100,8,178,5,167,51,6,124,52,100,178,52,53,168,125,125,165,120,54,125,168,9,48,175,120,9,125,93,10,135,181,101,56,57,169,10,59,172,61,67,170,171,67,171,127,58,127,171,129,186,113,60,61,172,61,173,112,62,112,173,174,189,129,165,64,23,64,137,23,165,22,49,64,54,168,17,114,131,17,112,114,66,133,65,19,132,133,19,133,61,134,133,66,166,134,66,166,66,167,93,135,21,68,135,121,23,136,22,94,34,139,25,96,179,26,138,69,69,179,26,30,103,176,116,141,70,39,141,116,73,142,105,143,76,37,26,35,77,103,97,76,77,144,33,33,139,77,38,151,149,80,161,45,80,45,146,81,115,8,107,155,97,82,98,107,95,151,84,38,156,85,86,116,160,96,102,24,72,29,28,29,95,74,75,30,82,108,147,36,88,44,43,91,110,51,170,67,10,11,183,131,64,14,63,89,15,53,100,7,18,112,17,19,127,134,67,136,126,21,158,41,31,33,32,81,115,80,79,177,28,29,43,2,152,71,44,109,47,46,41,141,109,47,167,5,50,123,5,51,100,53,8,125,54,165,9,120,48,93,57,10,59,58,172,174,185,189,165,54,64,165,23,22,94,26,34,30,75,103,143,104,76,26,163,35,38,85,151,192,182,191,183,128,201,12,13,89,181,169,57,186,153,113,188,183,99,184,182,63,185,13,189,180,181,93,186,99,153,189,186,129,185,184,130,186,13,12,187,93,126,193,199,194,194,196,193,200,187,195,187,197,195,187,126,197,197,190,194,190,136,137,190,196,194,63,182,192,63,192,196,192,198,196,191,182,55,193,196,198,194,199,197,195,197,199,136,197,126,190,137,63,190,63,196,197,136,190,192,191,198,201,99,183,90,55,182,181,180,101,185,130,13,186,188,99,186,189,13,187,180,93,200,101,187,183,188,131,184,185,174,180,187,101,16,18,17,12,131,188,35,42,144,163,1,162,76,162,1,79,146,145]\n        }\n      ],\n      'stones': [\n        {\n          type: 'mesh',\n          vertices: [-376,189,42,230,223,-310,353,162,-62,414,-23,-67,256,90,-475,24,85,-526,-418,-16,57,-432,66,-40,-199,151,-376,-155,49,467,-91,289,201,293,197,91,81,-17,-480,42,108,431,-359,-17,-250,383,-19,-243,194,-15,270,-272,180,293,-86,212,262,234,54,297,395,97,-302,-123,-21,-444,-416,-19,-123,-323,-18,267,-100,-16,429,-300,96,-361,163,-19,409,118,201,-431,-241,-18,391,-130,274,-309,306,-19,-399,-221,96,404],\n          faces: [31,18,17,0,17,18,3,20,2,18,11,10,29,27,8,27,29,1,0,18,10,10,29,0,16,19,26,11,2,1,20,30,4,20,3,15,30,12,4,4,12,5,5,27,4,4,27,20,21,25,5,7,8,25,22,7,14,7,25,14,23,28,31,0,7,17,24,26,9,31,28,9,8,27,5,2,20,1,13,19,18,10,11,1,19,13,26,3,11,19,19,16,3,11,3,2,11,18,19,20,15,30,29,10,1,25,21,14,8,5,25,5,12,21,6,7,22,7,6,23,8,0,29,8,7,0,23,31,7,13,31,9,18,31,13,9,28,24,26,13,9,27,1,20,7,31,17]\n        },\n        {\n          type: 'mesh',\n          vertices: [-217,34,-153,198,90,20,212,85,169,-131,93,171,197,113,30,173,121,164,315,29,-16,219,24,189,282,50,-102,232,38,-181,-195,-9,-166,-156,30,-207,-51,-9,-231,-180,91,-173,-19,73,-204,-280,23,96,-242,100,107,3,158,-82,109,88,221,275,-10,-40,236,-10,-135,-178,49,184,-1,-10,-243,265,-11,109,-12,-9,237,-36,46,251,-233,86,-81,93,77,-171,-163,133,69,18,16,263,296,44,93,131,-12,-226,-89,-10,-201,-273,-10,-51,-240,-9,110,190,-12,192,-253,-11,-92,42,43,-258,-115,-11,238,168,99,-88,-285,-10,24,71,124,-158,298,-10,10,116,150,-24,-282,44,39],\n          faces: [44,16,26,13,26,16,0,26,13,27,14,41,4,5,1,7,30,2,28,5,43,41,39,27,17,43,41,43,4,39,13,28,17,17,41,13,28,43,17,24,29,38,29,35,7,18,25,29,5,18,2,18,5,3,30,42,6,30,35,23,19,20,8,8,20,9,9,39,8,1,30,8,31,37,9,11,14,37,14,27,37,32,11,12,11,37,12,11,0,13,33,40,44,44,26,33,33,0,36,34,38,15,44,40,15,21,3,16,27,39,9,2,30,1,21,25,3,16,3,28,28,3,5,4,43,5,41,43,39,13,16,28,25,21,38,38,29,25,7,18,29,29,24,35,18,7,2,18,3,25,30,23,42,30,7,35,8,30,6,6,19,8,6,42,19,8,39,1,37,31,22,27,9,37,9,20,31,10,11,32,11,10,0,12,37,22,14,13,41,14,11,13,33,26,0,36,0,10,21,44,15,16,44,21,15,40,34,38,21,15,4,1,39,5,2,1]\n        },\n        {\n          type: 'mesh',\n          vertices: [-101,102,57,99,35,102,40,72,80,59,14,-168,-186,22,45,-176,25,-30,66,-7,146,153,-7,53,-110,47,-96,-90,-8,-146,150,-7,-12,-200,-7,8,-173,-7,-55,55,46,-60,125,-7,110,136,30,-10,-149,58,68,-15,82,-71,98,-7,-86,-34,-6,-194,-33,-7,171,-36,65,137,38,-8,-192,-103,-9,147,-12,62,-152],\n          faces: [2,17,0,17,8,0,17,24,8,19,24,22,5,11,4,2,13,17,17,13,24,21,23,20,1,2,21,7,15,1,7,10,15,5,9,12,15,18,13,0,5,16,0,8,5,1,15,2,10,18,15,3,13,18,24,3,22,11,23,4,4,16,5,16,4,23,24,13,3,15,13,2,6,1,21,6,21,20,6,14,1,2,0,21,1,14,7,3,18,22,8,24,19,8,19,9,12,11,5,5,8,9,16,23,21,16,21,0]\n        },\n        {\n          type: 'mesh',\n          vertices: [86,55,-18,58,38,73,97,-12,79,135,7,10,-93,-11,-72,-133,5,33,13,68,-32,94,-11,-57,-90,52,53,-24,-11,-106,-13,-10,104,-75,49,-69,-12,18,114,49,-12,-96,-46,-11,-85,-119,-11,-26,48,5,-111,-58,-11,105,-117,-12,52,-5,35,-93,123,-11,7],\n          faces: [5,8,11,2,3,1,8,1,6,11,8,6,6,19,11,10,12,17,20,7,3,3,7,16,16,0,3,16,9,19,14,4,9,15,18,5,5,11,15,18,17,5,19,0,16,1,3,0,0,6,1,19,6,0,12,8,17,2,1,12,12,10,2,1,8,12,3,2,20,16,13,9,16,7,13,19,4,11,15,11,4,17,8,5,9,4,19]\n        }\n      ],\n      'torii': [\n        {\n          type: 'mesh',\n          mirror: true,\n          flatShading: true,\n          vertices: [692,966,-52,661,834,-52,692,966,52,661,834,52,0,894,-52,0,776,-52,0,894,52,0,776,52,518,935,52,345,913,52,170,899,52,162,779,52,328,790,52,494,808,52,170,899,-52,345,913,-52,518,935,-52,494,808,-52,328,790,-52,162,779,-52,0,618,16,0,697,16,0,618,-16,0,697,-16,586,618,16,586,697,16,586,618,-16,586,697,-16,331,-29,-75,331,766,-52,369,-29,-65,357,766,-45,396,-29,-37,377,766,-26,406,-29,0,384,766,0,396,-29,37,377,766,26,369,-29,65,357,766,45,331,-29,75,331,766,52,294,-29,65,305,766,45,267,-29,37,286,766,26,257,-29,0,279,766,0,267,-29,-37,286,766,-26,294,-29,-65,305,766,-45,0,777,85,0,681,33,333,762,-75,333,806,-75,371,762,-65,371,806,-65,398,762,-37,398,806,-37,408,762,0,408,806,0,398,762,37,398,806,37,371,762,65,371,806,65,333,762,75,333,806,75,296,762,65,296,806,65,268,762,37,268,806,37,258,762,0,258,806,0,268,762,-37,268,806,-37,296,762,-65,296,806,-65,0,681,-33,0,777,-85,52,681,33,52,777,85,52,681,-33,52,777,-85],\n          faces: [4,10,14,1,13,17,11,6,7,0,3,1,16,1,17,4,19,5,14,18,19,15,17,18,3,8,13,13,9,12,12,10,11,19,7,5,19,12,11,18,13,12,16,2,0,15,8,16,14,9,15,23,26,22,27,24,26,25,20,24,26,20,22,23,25,27,29,30,28,31,32,30,33,34,32,35,36,34,37,38,36,39,40,38,41,42,40,43,44,42,45,46,44,47,48,46,49,50,48,51,28,50,55,56,54,57,58,56,59,60,58,61,62,60,63,64,62,79,81,83,65,66,64,82,53,78,67,68,66,81,53,80,69,70,68,83,80,82,71,72,70,79,82,78,73,74,72,75,63,59,75,76,74,77,54,76,60,68,76,4,6,10,1,3,13,11,10,6,0,2,3,16,0,1,4,14,19,14,15,18,15,16,17,3,2,8,13,8,9,12,9,10,19,11,7,19,18,12,18,17,13,16,8,2,15,9,8,14,10,9,23,27,26,27,25,24,25,21,20,26,24,20,23,21,25,29,31,30,31,33,32,33,35,34,35,37,36,37,39,38,39,41,40,41,43,42,43,45,44,45,47,46,47,49,48,49,51,50,51,29,28,55,57,56,57,59,58,59,61,60,61,63,62,63,65,64,79,52,81,65,67,66,82,80,53,67,69,68,81,52,53,69,71,70,83,81,80,71,73,72,79,83,82,73,75,74,59,57,55,55,77,75,75,73,71,71,69,75,67,65,63,63,61,59,59,55,75,75,69,67,67,63,75,75,77,76,77,55,54,76,54,56,56,58,76,60,62,68,64,66,68,68,70,72,72,74,68,76,58,60,62,64,68,68,74,76]\n        }\n      ],\n      'hexagons': [\n        {type: 'extrude', vertices: [-0.198, -0.302, 0.197, -0.3, 0.372, 0, 0.199, 0.298, -0.202, 0.298, -0.368, 0] }\n      ],\n      'towers': [\n        {type: 'extrude', vertices:  [-0.054, -0.178, -0.007, -0.182, 0.069, -0.027, 0.189, 0.079, 0.178, 0.124, -0.007, 0.097, -0.145, 0.182, -0.178, 0.144, -0.079, -0.021]},\n        {type: 'lathe', segments: 4, vertices: [0.004, 0.02, 0.012, 0.092, 0.042, 0.166, 0.067, 0.55, 0.101, 0.594, 0.105, 0.838, 0.193, 0.934, 0.18, 0.994]},\n        {type: 'lathe', segments: 5, vertices: [0.069, 0.216, 0.067, 0.562, 0.126, 0.562, 0.128, 0.774, 0.191, 0.774, 0.193, 0.986]}\n      ],\n      'trees': [\n        {type: 'lathe', noise: 0.015, segments: 6, vertices: [0.000001, 0.826, 0.054, 0.832, 0.105, 0.854, 0.136, 0.9, 0.136, 0.958, 0.118, 0.994]},\n        {type: 'lathe', noise: 0.015, segments: 14, vertices:  [0.000001, 0.01, 0.069, 0.022, 0.13, 0.068, 0.178, 0.18, 0.189, 0.32, 0.191, 0.59, 0.193, 0.75, 0.138, 0.79, 0.018, 0.808, 0.018, 0.996]},\n        {type: 'lathe', noise: 0.015, segments: 14, vertices: [0.000001, 0.436, 0.126, 0.46, 0.201, 0.57, 0.219, 0.72, 0.154, 0.846, 0.028, 0.884, 0.034, 0.996]}\n      ],\n      'apparatus': [\n        {type: 'lathe', segments: 10, vertices: [0.000001, 0.23, 0.042, 0.23, 0.069, 0.36, 0.038, 0.362, 0.038, 0.372, 0.06, 0.372, 0.073, 0.572, 0.024, 0.572, 0.024, 0.67, 0.069, 0.67, 0.075, 0.722, 0.097, 0.724, 0.105, 0.852, 0.083, 0.902, 0.065, 0.902, 0.065, 0.924, 0.128, 0.924, 0.146, 0.996]},\n        {type: 'lathe', segments: 16, vertices: [0.000001, 0.232, 0.229, 0.182, 0.486, 0.07, 0.356, 0.182, 0.213, 0.242, 0.154, 0.242, 0.144, 0.262, 0.178, 0.262, 0.126, 0.314, 0.04, 0.328, 0.038, 0.374, 0.058, 0.374, 0.071, 0.408, 0.026, 0.406, 0.03, 0.42, 0.091, 0.418, 0.034, 0.496, 0.01, 0.498, 0.03, 0.506, 0.014, 0.998]},\n      ],\n      'mushrooms': [\n        {type: 'lathe', noise: 0.02, segments: 14, vertices:  [0.000001, 0.006, 0.13, 0.018, 0.341, 0.084, 0.437, 0.144, 0.492, 0.234, 0.484, 0.246, 0.276, 0.232, 0.107, 0.284, 0.046, 0.346, 0.062, 0.852, 0.097, 0.956, 0.166, 0.998]},\n        {type: 'lathe', noise: 0.02, segments: 10, vertices:  [0.000001, 0.562, 0.091, 0.572, 0.172, 0.61, 0.223, 0.666, 0.256, 0.74, 0.258, 0.806, 0.246, 0.824, 0.062, 0.826, 0.065, 0.948, 0.097, 0.998]},\n        {type: 'lathe', noise: 0.02, segments: 10, vertices:  [0.000001, 0.768, 0.099, 0.772, 0.219, 0.802, 0.306, 0.844, 0.352, 0.886, 0.352, 0.908, 0.118, 0.904, 0.107, 0.93, 0.115, 0.966, 0.14, 0.996]}\n      ]\n    };\n\n    // scale down dressing meshes (coordinates were saved in integers for better compression)\n    for (var i in this.assets){\n      for (var j = 0; j < this.assets[i].length; j++) {\n        var asset = this.assets[i][j];\n        if (asset.type != 'mesh') continue;\n        for (var v = 0, len = asset.vertices.length; v < len; v++) {\n          asset.vertices[v] /= 1000.0;\n        }\n      }\n    }\n\n    // save current scene fog\n    this.userFog = this.el.sceneEl.getAttribute('fog');\n\n    // create sky\n    this.sky = document.createElement('a-sky');\n    this.sky.setAttribute('radius', this.STAGE_SIZE);\n    this.sky.setAttribute('theta-length', 110);\n\n    // stars are created when needed\n    this.stars = null;\n\n    // create ground\n    this.groundMaterial = null;\n    this.ground = document.createElement('a-entity');\n    this.ground.setAttribute('rotation', '-90 0 0');\n    this.ground.classList.add('environmentGround');\n    this.groundCanvas = null;\n    this.groundTexture = null;\n    this.groundMaterial = null;\n    this.groundGeometry = null;\n\n    this.dressing = document.createElement('a-entity');\n    this.dressing.classList.add('environmentDressing');\n\n    this.gridCanvas = null;\n    this.gridTexture = null;\n\n    // create lights (one ambient hemisphere light, and one directional for the sun)\n    this.hemilight = document.createElement('a-entity');\n    this.hemilight.setAttribute('position', '0 50 0');\n    this.hemilight.setAttribute('light', {\n      type: 'hemisphere',\n      color: '#CEE4F0',\n      intensity: 0.4\n    });\n    this.sunlight = document.createElement('a-entity');\n    this.sunlight.setAttribute('position', this.data.lightPosition);\n    this.sunlight.setAttribute('light', {intensity: 0.6});\n\n    // add everything to the scene\n    this.el.appendChild(this.hemilight);\n    this.el.appendChild(this.sunlight);\n    this.el.appendChild(this.ground);\n    this.el.appendChild(this.dressing);\n    this.el.appendChild(this.sky);\n  },\n\n  // returns a fog color from a specific sky type and sun height\n  getFogColor: function (skyType, sunHeight) {\n\n    var fogColor;\n    if (skyType == 'color' || skyType == 'none'){\n      fogColor = new THREE.Color(this.data.skyColor);\n    }\n    else if (skyType == 'gradient'){\n      fogColor = new THREE.Color(this.data.horizonColor);\n    }\n    else if (skyType == 'atmosphere')\n    {\n      var fogRatios = [        1,       0.5,      0.22,       0.1,      0.05,     0];\n      var fogColors = ['#C0CDCF', '#81ADC5', '#525e62', '#2a2d2d', '#141616', '#000'];\n\n      if (sunHeight <= 0) return '#000';\n\n      sunHeight = Math.min(1, sunHeight);\n\n      for (var i = 0; i < fogRatios.length; i++){\n        if (sunHeight > fogRatios[i]){\n          var c1 = new THREE.Color(fogColors[i - 1]);\n          var c2 = new THREE.Color(fogColors[i]);\n          var a = (sunHeight - fogRatios[i]) / (fogRatios[i - 1] - fogRatios[i]);\n          c2.lerp(c1, a);\n          fogColor = c2;\n          break;\n        }\n      }\n    }\n    // dim down the color\n    fogColor.multiplyScalar(0.9);\n    // mix it a bit with ground color\n    fogColor.lerp(new THREE.Color(this.data.groundColor), 0.3);\n\n    return '#' + fogColor.getHexString();\n  },\n\n  update: function (oldData) {\n    // preset changed\n    if (!oldData || (oldData.preset === undefined || oldData.preset !== this.data.preset)) {\n      var newData = Object.assign({}, this.presets[this.data.preset]);\n      if (!oldData || oldData.preset === undefined) {\n        Object.assign(newData, this.el.components.environment.attrValue);\n      }\n      this.el.setAttribute('environment', newData);\n      if (oldData) { return; } else { oldData = {}; }\n    }\n\n    var skyType = this.data.skyType;\n    var sunPos = new THREE.Vector3(this.data.lightPosition.x, this.data.lightPosition.y, this.data.lightPosition.z);\n    sunPos.normalize();\n\n    // update light colors and intensities\n    if (this.sunlight) {\n      this.sunlight.setAttribute('position', this.data.lightPosition);\n      if (skyType != 'atmosphere') {\n        // dim down the sky color for the light\n        var skycol = new THREE.Color(this.data.skyColor);\n        skycol.r = (skycol.r + 1.0) / 2.0;\n        skycol.g = (skycol.g + 1.0) / 2.0;\n        skycol.b = (skycol.b + 1.0) / 2.0;\n        this.hemilight.setAttribute('light', {'color': '#' + skycol.getHexString()});\n        this.sunlight.setAttribute('light', {'intensity': 0.6});\n        this.hemilight.setAttribute('light', {'intensity': 0.6});\n      }\n      else {\n        this.sunlight.setAttribute('light', {'intensity': 0.1 + sunPos.y * 0.5});\n        this.hemilight.setAttribute('light', {'intensity': 0.1 + sunPos.y * 0.5});\n      }\n\n      this.sunlight.setAttribute('light', {\n        castShadow: this.data.shadow,\n        shadowCameraLeft: -this.data.shadowSize,\n        shadowCameraBottom: -this.data.shadowSize,\n        shadowCameraRight: this.data.shadowSize,\n        shadowCameraTop: this.data.shadowSize\n      });\n    }\n\n    // update sky colors\n    if (skyType != oldData.skyType ||\n      this.data.skyColor != oldData.skyColor ||\n      this.data.horizonColor != oldData.horizonColor) {\n\n      this.sky.removeAttribute('material');\n\n      var mat = {};\n      mat.shader = {'none': 'flat', 'color': 'flat', 'gradient': 'gradientshader', 'atmosphere': 'skyshader'}[skyType];\n      if (this.stars) {\n        this.stars.setAttribute('visible', skyType == 'atmosphere');\n      }\n      if (skyType == 'color') {\n        mat.color = this.data.skyColor;\n        mat.fog = false;\n      }\n      else if (skyType == 'gradient') {\n        mat.topColor = this.data.skyColor;\n        mat.bottomColor = this.data.horizonColor;\n      }\n      this.sky.setAttribute('material', mat);\n    }\n\n    // set atmosphere sun position and stars\n    if (skyType == 'atmosphere') {\n      this.sky.setAttribute('material', {'sunPosition': sunPos});\n      this.setStars((1 - Math.max(0, (sunPos.y + 0.08) * 8)) * 2000 );\n    }\n\n    // // set fog color\n    // if (this.data.fog > 0) {\n    //   this.el.sceneEl.setAttribute('fog', {\n    //     color: this.getFogColor(skyType, sunPos.y),\n    //     far: (1.01 - this.data.fog) * this.STAGE_SIZE * 2\n    //   });\n    // }\n    // else {\n    //   this.el.sceneEl.removeAttribute('fog');\n    // }\n\n    // scene lights\n    if (this.data.lighting !== oldData.lighting) {\n      this.sunlight.setAttribute('light', {type: this.data.lighting == 'point' ? 'point' : 'directional'});\n      this.sunlight.setAttribute('visible', this.data.lighting !== 'none');\n      this.hemilight.setAttribute('visible', this.data.lighting !== 'none');\n    }\n\n\n    // check if ground geometry needs to be calculated\n    var updateGroundGeometry =\n      !this.groundGeometry ||\n      this.data.seed != oldData.seed ||\n      this.data.ground != oldData.ground ||\n      this.data.playArea != oldData.playArea ||\n      this.data.flatShading != oldData.flatShading;\n\n    // check if any parameter of the ground was changed, and update it\n    if (updateGroundGeometry ||\n        this.data.groundColor != oldData.groundColor ||\n        this.data.groundColor2 != oldData.groundColor2 ||\n        this.data.groundYScale != oldData.groundYScale ||\n        this.data.groundTexture != oldData.groundTexture ||\n        this.data.gridColor != oldData.gridColor ||\n        this.data.grid != oldData.grid\n        )\n    {\n      this.updateGround(updateGroundGeometry);\n      // set bounce light color to ground color\n      if (this.hemilight) this.hemilight.setAttribute('light', {'groundColor': this.data.groundColor});\n    }\n\n    // update dressing\n    if (this.data.seed != oldData.seed ||\n        this.data.dressingOnPlayArea != oldData.dressingOnPlayArea ||\n        this.data.dressing != oldData.dressing ||\n        this.data.flatShading != oldData.flatShading ||\n        this.data.dressingAmount != oldData.dressingAmount ||\n        this.data.dressingScale != oldData.dressingScale ||\n        this.data.dressingColor != oldData.dressingColor  ||\n        this.data.dressingVariance.x != oldData.dressingVariance.x ||\n        this.data.dressingVariance.y != oldData.dressingVariance.y ||\n        this.data.dressingVariance.z != oldData.dressingVariance.z ||\n        this.data.dressingUniformScale != oldData.dressingUniformScale\n      ) {\n      this.updateDressing();\n    }\n\n    this.sky.setAttribute('visible', skyType !== 'none');\n\n    this.el.setAttribute('visible', this.data.active);\n    if (!this.data.active) {\n      if (this.userFog) {\n        this.el.sceneEl.setAttribute('fog', this.userFog);\n      }\n      else {\n        this.el.sceneEl.removeAttribute('fog');\n      }\n    }\n\n    // dump current component settings to console\n    this.dumpParametersDiff();\n  },\n\n  // logs current parameters to console, for saving to a preset\n  logPreset: function () {\n    var str = '{';\n    for (var i in this.schema){\n      if (i == 'preset') continue;\n      str += i + ': ';\n      var type = this.schema[i].type;\n      if (type == 'vec3') {\n        str += '{ x: ' + this.data[i].x + ', y: ' + this.data[i].y + ', z: ' + this.data[i].z + '}';\n      }\n      else if (type == 'string' || type == 'color') {\n        str += '\"' + this.data[i] + '\"';\n      }\n      else {\n        str += this.data[i];\n      }\n      str += ', ';\n    }\n    str += '}';\n  },\n\n  // dumps current component settings to console.\n  dumpParametersDiff: function () {\n\n    // trim number to 3 decimals\n    function dec3 (v) {\n      return Math.floor(v * 1000) / 1000;\n    }\n\n    var params = [];\n    var usingPreset = this.data.preset != 'none' ? this.presets[this.data.preset] : false;\n\n    if (usingPreset) {\n      params.push('preset: ' + this.data.preset);\n    }\n\n    for (var i in this.schema) {\n      if (i == 'preset' || (usingPreset && usingPreset[i] === undefined)) {\n        continue;\n      }\n      var def = usingPreset ? usingPreset[i] : this.schema[i].default;\n      var data = this.data[i];\n      var type = this.schema[i].type;\n      if (type == 'vec3') {\n        var coords = def;\n        if (typeof(def) == 'string') {\n          def = def.split(' ');\n          coords = {x: def[0], y: def[1], z: def[2]};\n        }\n        if (dec3(coords.x) != dec3(data.x) || dec3(coords.y) != dec3(data.y) || dec3(coords.z) != dec3(data.z)) {\n          params.push(i + ': ' + dec3(data.x) + ' ' + dec3(data.y) + ' ' + dec3(data.z));\n        }\n      }\n      else {\n        if (def != data) {\n          if (this.schema[i].type == 'number') {\n            data = dec3(data);\n          }\n          params.push(i + ': ' + data);\n        }\n      }\n    }\n  },\n\n  // Custom Math.random() with seed. Given this.data.seed and x, it always returns the same \"random\" number\n  random: function (x) {\n    return parseFloat('0.' + Math.sin(this.data.seed * 9999 * x).toString().substr(7));\n  },\n\n\n  // updates ground attributes, and geometry if required\n  updateGround: function (updateGeometry) {\n\n    var resolution = 64; // number of divisions of the ground mesh\n\n    if (updateGeometry) {\n      var visibleground = this.data.ground != 'none';\n      this.ground.setAttribute('visible', visibleground);\n      if (!visibleground) {\n        return;\n      }\n\n      if (!this.groundGeometry) {\n        this.groundGeometry = new THREE.PlaneGeometry(this.STAGE_SIZE + 2, this.STAGE_SIZE + 2, resolution - 1, resolution - 1);\n      }\n      var perlin = new PerlinNoise();\n      var verts = this.groundGeometry.vertices;\n      var numVerts = this.groundGeometry.vertices.length;\n      var frequency = 10;\n      var inc = frequency / resolution;\n\n      for (var i = 0, x = 0, y = 0; i < numVerts; i++) {\n        if (this.data.ground == 'flat') {\n          verts[i].z = 0;\n          continue;\n        }\n\n        var h;\n        switch (this.data.ground) {\n          case 'hills': {\n            h = Math.max(0, perlin.noise(x, y, 0));\n            break;\n          }\n          case 'canyon': {\n            h = 0.2 + perlin.noise(x, y, 0) * 0.8;\n            h = Math.min(1, Math.pow(h, 2) * 10);\n            break;\n          }\n          case 'spikes': {\n            h = this.random(i) < 0.02 ? this.random(i + 1) : 0;\n            break;\n          }\n          case 'noise': {\n            h = this.random(i) < 0.35 ? this.random(i + 1) : 0;\n            break;\n          }\n        }\n\n        h += this.random(i + 2) * 0.1; // add some randomness\n\n        // flat ground in the center\n        var xx = x * 2 / frequency - 1;\n        var yy = y * 2 / frequency - 1;\n        var pa = this.data.playArea;\n        xx = Math.max(0, Math.min(1, (Math.abs(xx) - (pa - 0.9)) * (1 / pa) ));\n        yy = Math.max(0, Math.min(1, (Math.abs(yy) - (pa - 0.9)) * (1 / pa) ));\n        h *= xx > yy ? xx : yy;\n\n        // set height\n        verts[i].z = h;\n\n        // calculate next x,y ground coordinates\n        x += inc;\n        if (x >= 10) {\n          x = 0;\n          y += inc;\n        }\n      }\n\n      this.groundGeometry.computeFaceNormals();\n      if (this.data.flatShading) {\n        this.groundGeometry.computeFlatVertexNormals();\n      }\n      else {\n        this.groundGeometry.computeVertexNormals();\n      }\n\n      this.groundGeometry.verticesNeedUpdate = true;\n      this.groundGeometry.normalsNeedUpdate = true;\n    }\n\n    // apply Y scale. There's no need to recalculate the geometry for this. Just change scale\n    this.ground.setAttribute('scale', {z: this.data.groundYScale});\n\n    // update ground, playarea and grid textures.\n    var groundResolution = 2048;\n    var texMeters = 20; // ground texture of 20 x 20 meters\n    var texRepeat = this.STAGE_SIZE / texMeters;\n\n    if (!this.groundCanvas || this.groundCanvas.width != groundResolution) {\n      this.gridCanvas = document.createElement('canvas');\n      this.gridCanvas.width = groundResolution;\n      this.gridCanvas.height = groundResolution;\n      this.gridTexture = new THREE.Texture(this.gridCanvas);\n      this.gridTexture.wrapS = THREE.RepeatWrapping;\n      this.gridTexture.wrapT = THREE.RepeatWrapping;\n      this.gridTexture.repeat.set(texRepeat, texRepeat);\n\n      this.groundCanvas = document.createElement('canvas');\n      this.groundCanvas.width = groundResolution;\n      this.groundCanvas.height = groundResolution;\n      this.groundTexture = new THREE.Texture(this.groundCanvas);\n      this.groundTexture.wrapS = THREE.RepeatWrapping;\n      this.groundTexture.wrapT = THREE.RepeatWrapping;\n      this.groundTexture.repeat.set(texRepeat, texRepeat);\n\n      // ground material diffuse map is the regular ground texture and the grid texture\n      // is used in the emissive map. This way, the grid is always equally visible, even at night.\n      this.groundMaterial = new THREE.MeshLambertMaterial({\n        map: this.groundTexture,\n        emissive: new THREE.Color(0xFFFFFF),\n        emissiveMap: this.gridTexture,\n        flatShading: this.data.flatShading ? THREE.FlatShading : THREE.SmoothShading\n      });\n    }\n\n    var groundctx = this.groundCanvas.getContext('2d');\n    var gridctx = this.gridCanvas.getContext('2d');\n\n    this.drawTexture(groundctx, groundResolution, texMeters);\n\n    gridctx.fillStyle = '#000000';\n    gridctx.fillRect(0, 0, groundResolution, groundResolution);\n    this.drawGrid(gridctx, groundResolution, texMeters);\n\n    this.groundTexture.needsUpdate = true;\n    this.gridTexture.needsUpdate = true;\n\n    if (updateGeometry) {\n      var mesh = new THREE.Mesh(this.groundGeometry, this.groundMaterial);\n      this.ground.setObject3D('mesh', mesh);\n    }\n    else {\n      this.ground.getObject3D('mesh').material = this.groundMaterial;\n    }\n\n    this.ground.setAttribute('shadow', {\n      cast: false,\n      receive: this.data.shadow\n    });\n  },\n\n  // draw grid to a canvas context\n  drawGrid: function (ctx, size, texMeters) {\n\n    if (this.data.grid == 'none') return;\n\n    // one grid feature each 2 meters\n\n    var num = Math.floor(texMeters / 2);\n    var step = size / (texMeters / 2); // 2 meters == <step> pixels\n    var i, j, ii;\n\n    ctx.fillStyle = this.data.gridColor;\n\n    switch (this.data.grid) {\n      case '1x1':\n      case '2x2': {\n        if (this.data.grid == '1x1') {\n          num = num * 2;\n          step = size / texMeters;\n        }\n        for (i = 0; i < num; i++) {\n          ii = Math.floor(i * step);\n          ctx.fillRect(0, ii, size, 1);\n          ctx.fillRect(ii, 0, 1, size);\n        }\n        break;\n      }\n      case 'crosses': {\n        var l = Math.floor(step / 20);\n        for (i = 0; i < num + 1; i++) {\n          ii = Math.floor(i * step);\n          for (j = 0; j < num + 1; j++) {\n            var jj = Math.floor(-l + j * step);\n            ctx.fillRect(jj, ii, l * 2, 1);\n            ctx.fillRect(ii, jj, 1, l * 2);\n          }\n        }\n        break;\n      }\n      case 'dots': {\n        for (i = 0; i < num + 1; i++) {\n          for (j = 0; j < num + 1; j++) {\n            ctx.beginPath(); ctx.arc(Math.floor(j * step), Math.floor(i * step), 4, 0, Math.PI * 2); ctx.fill();\n          }\n        }\n        break;\n      }\n      case 'xlines': {\n        for (i = 0; i < num; i++) {\n          ctx.fillRect(Math.floor(i * step), 0, 1, size);\n        }\n        break;\n      }\n      case 'ylines': {\n        for (i = 0; i < num; i++) {\n          ctx.fillRect(0, Math.floor(i * step), size, 1);\n        }\n        break;\n      }\n    }\n  },\n\n  // draw ground texture to a canvas context\n  drawTexture: function(ctx, size, texMeters) {\n    // fill all with ground Color\n    ctx.fillStyle = this.data.groundColor;\n    ctx.fillRect(0, 0, size, size);\n\n    var i, col, col1, col2, im, imdata, numpixels;\n\n    if (this.data.groundTexture == 'none') return;\n    switch(this.data.groundTexture) {\n      case 'checkerboard': {\n        ctx.fillStyle = this.data.groundColor2;\n        var num = Math.floor(texMeters / 2);\n        var step = size / (texMeters / 2); // 2 meters == <step> pixels\n        for (i = 0; i < num + 1; i += 2) {\n          for (var j = 0; j < num + 1; j ++) {\n            ctx.fillRect(Math.floor((i + j % 2) * step), Math.floor(j * step), Math.floor(step), Math.floor(step));\n          }\n        }\n        break;\n      }\n      case 'squares': {\n        var numSquares = 16;\n        var squareSize = size / numSquares;\n        col1 = new THREE.Color(this.data.groundColor);\n        col2 = new THREE.Color(this.data.groundColor2);\n        for (i = 0; i < numSquares * numSquares; i++) {\n          col = this.random(i + 3) > 0.5 ? col1.clone() : col2.clone();\n          col.addScalar(this.random(i + 3) * 0.1 - 0.05);\n          ctx.fillStyle = '#' + col.getHexString();\n          ctx.fillRect((i % numSquares) * squareSize, Math.floor(i / numSquares) * squareSize, squareSize, squareSize);\n        }\n        break;\n      }\n      case 'noise': {\n      // TODO: fix\n        imdata = ctx.getImageData(0, 0, size, size);\n        im = imdata.data;\n        col1 = new THREE.Color(this.data.groundColor);\n        col2 = new THREE.Color(this.data.groundColor2);\n        var diff = new THREE.Color(col2.r - col1.r, col2.g - col1.g, col2.b - col1.b);\n        var perlin = new PerlinNoise();\n        for (i = 0, j = 0, numpixels = im.length; i < numpixels; i += 4, j++){\n          //console.log( (j % size) / size, j / size)\n          var rnd = perlin.noise((j % size) / size * 3, j / size / size * 3, 0);\n          im[i + 0] = Math.floor((col1.r + diff.r * rnd) * 255);\n          im[i + 1] = Math.floor((col1.g + diff.g * rnd) * 255);\n          im[i + 2] = Math.floor((col1.b + diff.b * rnd) * 255);\n        }\n        ctx.putImageData(imdata, 0, 0);\n        break;\n      }\n      case 'walkernoise': {\n        var s = Math.floor(size / 2);\n        var tex = document.createElement('canvas');\n        tex.width = s;\n        tex.height = s;\n        var texctx = tex.getContext('2d');\n        texctx.fillStyle = this.data.groundColor;\n        texctx.fillRect(0, 0, s, s);\n        imdata = texctx.getImageData(0, 0, s, s);\n        im = imdata.data;\n        col1 = new THREE.Color(this.data.groundColor);\n        col2 = new THREE.Color(this.data.groundColor2);\n        var walkers = [];\n        var numwalkers = 1000;\n        for (i = 0; i < numwalkers; i++) {\n          col = col1.clone().lerp(col2, Math.random());\n          walkers.push({\n            x: Math.random() * s,\n            y: Math.random() * s,\n            r: Math.floor(col.r * 255),\n            g: Math.floor(col.g * 255),\n            b: Math.floor(col.b * 255)\n          });\n        }\n        var iterations = 5000;\n        for (var it = 0; it< iterations; it++){\n          for (i = 0; i < numwalkers; i++) {\n            var walker = walkers[i];\n            var pos = Math.floor((walker.y * s + walker.x)) * 4;\n            im[pos + 0] = walker.r;\n            im[pos + 1] = walker.g;\n            im[pos + 2] = walker.b;\n            walker.x += Math.floor(Math.random() * 3) - 1;\n            walker.y += Math.floor(Math.random() * 3) - 1;\n            if (walker.x >= s) walker.x = walker.x - s;\n            if (walker.y >= s) walker.y = walker.y - s;\n            if (walker.x < 0) walker.x = s + walker.x;\n            if (walker.y < 0) walker.y = s + walker.y;\n          }\n        }\n        texctx.putImageData(imdata, 0, 0);\n        ctx.drawImage(tex, 0, 0, size, size);\n        break;\n      }\n    }\n  },\n\n  // returns an array of THREE.Geometry for set dressing\n  getAssetGeometry: function(data) {\n    if (!data) return null;\n    var geoset = [];\n    var self = this;\n\n    function applyNoise(geo, noise) {\n      var n = new THREE.Vector3();\n      for (var i = 0, numVerts = geo.vertices.length; i < numVerts; i++) {\n        n.x = (self.random(i) - 0.5) * noise;\n        n.y = (self.random(i + numVerts) - 0.5) * noise;\n        n.z = (self.random(i + numVerts * 2) - 0.5) * noise;\n        geo.vertices[i].add(n);\n      }\n    }\n\n    var i, geo, verts;\n\n    for (var j = 0; j < data.length; j++) {\n\n      if (data[j].type == 'lathe') {\n        var maxy = -99999;\n        var points = [];\n        verts = data[j].vertices;\n        for (i = 0; i < verts.length; i += 2) {\n          points.push(new THREE.Vector2(verts[i], verts[i + 1]));\n          if (verts[i + 1] > maxy) {\n            maxy = verts[i + 1];\n          }\n        }\n        geo = new THREE.LatheGeometry(points, data[j]['segments'] || 8);\n        geo.applyMatrix(new THREE.Matrix4().makeRotationFromEuler(new THREE.Euler(-Math.PI, 0, 0)));\n        geo.applyMatrix(new THREE.Matrix4().makeTranslation(0, maxy, 0));\n        if (data[j]['noise']) applyNoise(geo, data[j].noise);\n        geoset.push(geo);\n      }\n\n      else if (data[j].type == 'extrude') {\n        var shape = new THREE.Shape();\n        verts = data[j].vertices;\n        for (i = 0; i < verts.length; i+= 2) {\n          if (i == 0) shape.moveTo(verts[i], verts[i + 1]);\n          else shape.lineTo(verts[i], verts[i + 1]);\n        }\n        geo = new THREE.ExtrudeGeometry(shape, {amount: 1, bevelEnabled: false});\n        geo.applyMatrix(new THREE.Matrix4().makeRotationFromEuler(new THREE.Euler(-Math.PI / 2, 0, 0)));\n        if (data[j]['noise']) applyNoise(geo, data[j].noise);\n        geoset.push(geo);\n      }\n\n      else if (data[j].type == 'mesh') {\n        geo = new THREE.Geometry();\n        verts = data[j].vertices;\n        var faces = data[j].faces;\n        for (var v = 0; v < verts.length; v += 3) {\n          geo.vertices.push(new THREE.Vector3(verts[v], verts[v + 1], verts[v + 2]));\n        }\n        for (var f = 0; f < faces.length; f += 3) {\n          geo.faces.push(new THREE.Face3(faces[f], faces[f + 1], faces[f + 2]));\n        }\n        if (this.data.flatShading || data[j]['flatShading']) {\n          geo.computeFaceNormals();\n        }\n        else {\n          geo.computeVertexNormals();\n        }\n\n        if (data[j]['mirror']) {\n          geo.merge(geo, new THREE.Matrix4().makeRotationFromEuler(new THREE.Euler(0, Math.PI, 0)));\n        }\n\n        if (data[j]['noise']) applyNoise(geo, data[j].noise);\n        geoset.push(geo);\n      }\n    }\n    return geoset;\n  },\n\n  // updates set dressing\n  updateDressing: function () {\n    var dressing = new THREE.Object3D();\n    this.dressing.setAttribute('visible', this.data.dressing != 'none');\n    if (this.data.dressing == 'none') {\n      return;\n    }\n    var geometry = new THREE.Geometry(); // mother geometry that will hold all instances\n\n    // get array of geometries\n    var geoset;\n    switch (this.data.dressing){\n      case 'cubes': {\n        geoset = [new THREE.BoxGeometry(1, 1, 1)];\n        geoset[0].applyMatrix(new THREE.Matrix4().makeTranslation(0, 0.5, 0));\n        break;\n      }\n      case 'pyramids': {\n        geoset = [new THREE.ConeGeometry(1, 1, 4, 1, true)];\n        geoset[0].applyMatrix(new THREE.Matrix4().makeTranslation(0, 0.5, 0));\n        break;\n      }\n      case 'cylinders': {\n        geoset = [new THREE.CylinderGeometry(0.5, 0.5, 1, 8, 1, true)];\n        geoset[0].applyMatrix(new THREE.Matrix4().makeTranslation(0, 0.5, 0));\n        break;\n      }\n      default: {\n        geoset = this.getAssetGeometry(this.assets[this.data.dressing]);\n        if (!geoset) return;\n        break;\n      }\n    }\n\n    for (var i = 0, r = 88343; i < this.data.dressingAmount; i++, r++) {\n\n      var geo = geoset[Math.floor(this.random(33 + i) * geoset.length)];\n/*\n      // change vertex colors\n      var color = new THREE.Color(0xFFFFFF).multiplyScalar(1 - this.random(66 + i) * 0.3);\n\n      for (var f = 0, fl = geo.faces.length; f < fl; f++) {\n        var face = geo.faces[f];\n        for (var v = 0; v < 3; v++) {\n          p = geo.vertices[face[faceindex[v]]]; // get vertex position\n          var floorao =  p.y / 4 + 0.75;\n          face.vertexColors[v] = new THREE.Color(color.r * floorao, color.g * floorao, color.b * floorao);\n        }\n      }\n*/\n      // set random position, rotation and scale\n      var ds = this.data.dressingScale;\n      var dv = new THREE.Vector3(this.data.dressingVariance.x, this.data.dressingVariance.y, this.data.dressingVariance.z);\n      var distance;\n      var onPlayArea = this.random(r) < this.data.dressingOnPlayArea;\n      if (onPlayArea) {\n        distance = this.random(r + 1) * 15;\n      }\n      else {\n        distance = 10 + Math.max(dv.x, dv.z) + 10 * this.random(r + 1) + this.random(r + 2) * this.STAGE_SIZE / 3;\n      }\n\n      var direction = this.random(r + 3) * Math.PI * 2;\n      var matrix = new THREE.Matrix4();\n      var scale = this.random(r + 4);\n      var uniformScale = this.data.dressingUniformScale;\n\n      matrix.compose(\n        // position\n        new THREE.Vector3(\n          Math.cos(direction) * distance,\n          0,\n          Math.sin(direction) * distance\n          ),\n        // rotation\n        new THREE.Quaternion().setFromAxisAngle(\n          new THREE.Vector3(0, 1, 0),\n          (this.random(r + 5) - 0.5) * dv.length() * Math.PI * 2\n          ),\n        // scale\n        new THREE.Vector3(\n           ds + (uniformScale ? scale : this.random(r + 6)) * dv.x,\n           ds + (uniformScale ? scale : this.random(r + 7)) * dv.y,\n           ds + (uniformScale ? scale : this.random(r + 8)) * dv.z\n          )\n        );\n\n      // merge with mother geometry\n      geometry.merge(geo, matrix);\n    }\n\n    // convert geometry to buffergeometry\n    var bufgeo = new THREE.BufferGeometry();\n    bufgeo.fromGeometry(geometry);\n\n    // setup material\n    var material = new THREE.MeshLambertMaterial({\n      color: new THREE.Color(this.data.dressingColor),\n      vertexColors: THREE.VertexColors\n    });\n\n    if (this.data.flatShading) {\n      bufgeo.computeVertexNormals();\n    }\n\n    // create mesh\n    var mesh = new THREE.Mesh(bufgeo, material);\n    dressing.add(mesh);\n    // add to scene\n    this.dressing.setObject3D('mesh', dressing);\n  },\n\n  // initializes the BufferGeometry for the stars\n  createStars: function() {\n    var numStars = 2000;\n    var geometry = new THREE.BufferGeometry();\n    var positions = new Float32Array( numStars * 3 );\n    var radius = this.STAGE_SIZE - 1;\n    var v = new THREE.Vector3();\n    for (var i = 0; i < positions.length; i += 3) {\n      v.set(this.random(i + 23) - 0.5, this.random(i + 24), this.random(i + 25) - 0.5);\n      v.normalize();\n      v.multiplyScalar(radius);\n      positions[i  ] = v.x;\n      positions[i+1] = v.y;\n      positions[i+2] = v.z;\n    }\n    geometry.addAttribute('position', new THREE.BufferAttribute(positions, 3));\n    geometry.setDrawRange(0, 0); // don't draw any yet\n    var material = new THREE.PointsMaterial({size: 0.01, color: 0xCCCCCC, fog: false});\n    this.stars.setObject3D('mesh', new THREE.Points(geometry, material));\n  },\n\n  // Sets the number of stars visible. Calls createStars() to initialize if needed.\n  setStars: function (numStars) {\n    if (!this.stars){\n      this.stars = document.createElement('a-entity');\n      this.stars.id= 'stars';\n      this.createStars();\n      this.el.appendChild(this.stars);\n    }\n    numStars = Math.floor(Math.min(2000, Math.max(0, numStars)));\n    this.stars.getObject3D('mesh').geometry.setDrawRange(0, numStars);\n  }\n});\n\n// atmosphere sky shader. From https://github.com/aframevr/aframe/blob/master/examples/test/shaders/shaders/sky.js\nAFRAME.registerShader('skyshader', {\n  schema: {\n    luminance: { type: 'number', default: 1, min: 0, max: 2, is: 'uniform' },\n    turbidity: { type: 'number', default: 2, min: 0, max: 20, is: 'uniform' },\n    reileigh: { type: 'number', default: 1, min: 0, max: 4, is: 'uniform' },\n    mieCoefficient: { type: 'number', default: 0.005, min: 0, max: 0.1, is: 'uniform' },\n    mieDirectionalG: { type: 'number', default: 0.8, min: 0, max: 1, is: 'uniform' },\n    sunPosition: { type: 'vec3', default: {x: 0, y: 0, z: -1}, is: 'uniform' },\n    color: {type: 'color', default: '#fff'} //placeholder to remove warning\n  },\n\n  vertexShader: [\n    'varying vec3 vWorldPosition;',\n    'void main() {',\n    'vec4 worldPosition = modelMatrix * vec4( position, 1.0 );',\n    'vWorldPosition = worldPosition.xyz;',\n    'gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\n    '}'\n  ].join('\\n'),\n\n  fragmentShader: [\n    'uniform sampler2D skySampler;',\n    'uniform vec3 sunPosition;',\n    'varying vec3 vWorldPosition;',\n\n    'vec3 cameraPos = vec3(0., 0., 0.);',\n\n    'uniform float luminance;',\n    'uniform float turbidity;',\n    'uniform float reileigh;',\n    'uniform float mieCoefficient;',\n    'uniform float mieDirectionalG;',\n\n    // constants for atmospheric scattering'\n    'const float e = 2.71828182845904523536028747135266249775724709369995957;',\n    'const float pi = 3.141592653589793238462643383279502884197169;',\n\n    // refractive index of air\n    'const float n = 1.0003;',\n    // number of molecules per unit volume for air at'\n    'const float N = 2.545E25;' ,\n    // 288.15K and 1013mb (sea level -45 celsius)\n    // depolatization factor for standard air\n    'const float pn = 0.035;',\n    // wavelength of used primaries, according to preetham\n    'const vec3 lambda = vec3(680E-9, 550E-9, 450E-9);',\n\n    // mie stuff\n    // K coefficient for the primaries\n    'const vec3 K = vec3(0.686, 0.678, 0.666);',\n    'const float v = 4.0;',\n\n    // optical length at zenith for molecules\n    'const float rayleighZenithLength = 8.4E3;',\n    'const float mieZenithLength = 1.25E3;',\n    'const vec3 up = vec3(0.0, 1.0, 0.0);',\n\n    'const float EE = 1000.0;',\n    'const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;',\n    // 66 arc seconds -> degrees, and the cosine of that\n\n    // earth shadow hack'\n    'const float cutoffAngle = pi/1.95;',\n    'const float steepness = 1.5;',\n\n    'vec3 totalRayleigh(vec3 lambda)',\n    '{',\n    'return (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn));',\n    '}',\n\n    // see http://blenderartists.org/forum/showthread.php?321110-Shaders-and-Skybox-madness\n    // A simplied version of the total Rayleigh scattering to works on browsers that use ANGLE\n    'vec3 simplifiedRayleigh()',\n    '{',\n    'return 0.0005 / vec3(94, 40, 18);',\n    '}',\n\n    'float rayleighPhase(float cosTheta)',\n    '{   ',\n    'return (3.0 / (16.0*pi)) * (1.0 + pow(cosTheta, 2.0));',\n    '}',\n\n    'vec3 totalMie(vec3 lambda, vec3 K, float T)',\n    '{',\n    'float c = (0.2 * T ) * 10E-18;',\n    'return 0.434 * c * pi * pow((2.0 * pi) / lambda, vec3(v - 2.0)) * K;',\n    '}',\n\n    'float hgPhase(float cosTheta, float g)',\n    '{',\n    'return (1.0 / (4.0*pi)) * ((1.0 - pow(g, 2.0)) / pow(1.0 - 2.0*g*cosTheta + pow(g, 2.0), 1.5));',\n    '}',\n\n    'float sunIntensity(float zenithAngleCos)',\n    '{',\n    'return EE * max(0.0, 1.0 - exp(-((cutoffAngle - acos(zenithAngleCos))/steepness)));',\n    '}',\n\n    '// Filmic ToneMapping http://filmicgames.com/archives/75',\n    'float A = 0.15;',\n    'float B = 0.50;',\n    'float C = 0.10;',\n    'float D = 0.20;',\n    'float E = 0.02;',\n    'float F = 0.30;',\n    'float W = 1000.0;',\n\n    'vec3 Uncharted2Tonemap(vec3 x)',\n    '{',\n    'return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;',\n    '}',\n\n    'void main() ',\n    '{',\n    'float sunfade = 1.0-clamp(1.0-exp((sunPosition.y/450000.0)),0.0,1.0);',\n\n    'float reileighCoefficient = reileigh - (1.0* (1.0-sunfade));',\n\n    'vec3 sunDirection = normalize(sunPosition);',\n\n    'float sunE = sunIntensity(dot(sunDirection, up));',\n\n    // extinction (absorbtion + out scattering)\n    // rayleigh coefficients\n\n    'vec3 betaR = simplifiedRayleigh() * reileighCoefficient;',\n\n    // mie coefficients\n    'vec3 betaM = totalMie(lambda, K, turbidity) * mieCoefficient;',\n\n    // optical length\n    // cutoff angle at 90 to avoid singularity in next formula.\n    'float zenithAngle = acos(max(0.0, dot(up, normalize(vWorldPosition - cameraPos))));',\n    'float sR = rayleighZenithLength / (cos(zenithAngle) + 0.15 * pow(93.885 - ((zenithAngle * 180.0) / pi), -1.253));',\n    'float sM = mieZenithLength / (cos(zenithAngle) + 0.15 * pow(93.885 - ((zenithAngle * 180.0) / pi), -1.253));',\n\n    // combined extinction factor\n    'vec3 Fex = exp(-(betaR * sR + betaM * sM));',\n\n    // in scattering\n    'float cosTheta = dot(normalize(vWorldPosition - cameraPos), sunDirection);',\n\n    'float rPhase = rayleighPhase(cosTheta*0.5+0.5);',\n    'vec3 betaRTheta = betaR * rPhase;',\n\n    'float mPhase = hgPhase(cosTheta, mieDirectionalG);',\n    'vec3 betaMTheta = betaM * mPhase;',\n\n    'vec3 Lin = pow(sunE * ((betaRTheta + betaMTheta) / (betaR + betaM)) * (1.0 - Fex),vec3(1.5));',\n    'Lin *= mix(vec3(1.0),pow(sunE * ((betaRTheta + betaMTheta) / (betaR + betaM)) * Fex,vec3(1.0/2.0)),clamp(pow(1.0-dot(up, sunDirection),5.0),0.0,1.0));',\n\n    //nightsky\n    'vec3 direction = normalize(vWorldPosition - cameraPos);',\n    'float theta = acos(direction.y); // elevation --> y-axis, [-pi/2, pi/2]',\n    'float phi = atan(direction.z, direction.x); // azimuth --> x-axis [-pi/2, pi/2]',\n    'vec2 uv = vec2(phi, theta) / vec2(2.0*pi, pi) + vec2(0.5, 0.0);',\n    // vec3 L0 = texture2D(skySampler, uv).rgb+0.1 * Fex;\n    'vec3 L0 = vec3(0.1) * Fex;',\n\n    // composition + solar disc\n    'float sundisk = smoothstep(sunAngularDiameterCos,sunAngularDiameterCos+0.00002,cosTheta);',\n    'L0 += (sunE * 19000.0 * Fex)*sundisk;',\n\n    'vec3 whiteScale = 1.0/Uncharted2Tonemap(vec3(W));',\n\n    'vec3 texColor = (Lin+L0);   ',\n    'texColor *= 0.04 ;',\n    'texColor += vec3(0.0,0.001,0.0025)*0.3;',\n\n    'float g_fMaxLuminance = 1.0;',\n    'float fLumScaled = 0.1 / luminance;     ',\n    'float fLumCompressed = (fLumScaled * (1.0 + (fLumScaled / (g_fMaxLuminance * g_fMaxLuminance)))) / (1.0 + fLumScaled); ',\n\n    'float ExposureBias = fLumCompressed;',\n\n    'vec3 curr = Uncharted2Tonemap((log2(2.0/pow(luminance,4.0)))*texColor);',\n    'vec3 color = curr*whiteScale;',\n\n    'vec3 retColor = pow(color,vec3(1.0/(1.2+(1.2*sunfade))));',\n\n    'gl_FragColor.rgb = retColor;',\n\n    'gl_FragColor.a = 1.0;',\n    '}'\n  ].join('\\n')\n});\n\n\n// gradient sky shader\n\nAFRAME.registerShader('gradientshader', {\n  schema: {\n    topColor: {type: 'color', default: '1 0 0', is: 'uniform'},\n    bottomColor: {type: 'color', default: '0 0 1', is: 'uniform'}\n  },\n\n  vertexShader: [\n    'varying vec3 vWorldPosition;',\n    'void main() {',\n    ' vec4 worldPosition = modelMatrix * vec4( position, 1.0 );',\n    ' vWorldPosition = worldPosition.xyz;',\n    ' gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );',\n    '}'\n  ].join('\\n'),\n\n  fragmentShader: [\n    'uniform vec3 bottomColor;',\n    'uniform vec3 topColor;',\n    'uniform float offset;',\n    'varying vec3 vWorldPosition;',\n    'void main() {',\n    ' float h = normalize( vWorldPosition ).y;',\n    ' gl_FragColor = vec4( mix( bottomColor, topColor, max( pow( max(h, 0.0 ), 0.8 ), 0.0 ) ), 1.0 );',\n    '}'\n  ].join('\\n')\n});\n\n// perlin noise generator\n// from https://gist.github.com/banksean/304522\n\nvar PerlinNoise = function(r) {\n  if (r == undefined) r = Math;\n  this.grad3 = [[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]];\n  this.p = [];\n  var i;\n  for (i=0; i<256; i++) {\n    this.p[i] = Math.floor(r.random(666)*256);\n  }\n  // To remove the need for index wrapping, double the permutation table length\n  this.perm = [];\n  for(i=0; i<512; i++) {\n    this.perm[i]=this.p[i & 255];\n  }\n};\n\nPerlinNoise.prototype.dot = function(g, x, y, z) {\n  return g[0]*x + g[1]*y + g[2]*z;\n};\n\nPerlinNoise.prototype.mix = function(a, b, t) {\n  return (1.0-t)*a + t*b;\n};\n\nPerlinNoise.prototype.fade = function(t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n};\n\n// Classic Perlin noise, 3D version\nPerlinNoise.prototype.noise = function(x, y, z) {\n  // Find unit grid cell containing point\n  var X = Math.floor(x);\n  var Y = Math.floor(y);\n  var Z = Math.floor(z);\n\n  // Get relative xyz coordinates of point within that cell\n  x = x - X;\n  y = y - Y;\n  z = z - Z;\n\n  // Wrap the integer cells at 255 (smaller integer period can be introduced here)\n  X = X & 255;\n  Y = Y & 255;\n  Z = Z & 255;\n\n  // Calculate a set of eight hashed gradient indices\n  var gi000 = this.perm[X+this.perm[Y+this.perm[Z]]] % 12;\n  var gi001 = this.perm[X+this.perm[Y+this.perm[Z+1]]] % 12;\n  var gi010 = this.perm[X+this.perm[Y+1+this.perm[Z]]] % 12;\n  var gi011 = this.perm[X+this.perm[Y+1+this.perm[Z+1]]] % 12;\n  var gi100 = this.perm[X+1+this.perm[Y+this.perm[Z]]] % 12;\n  var gi101 = this.perm[X+1+this.perm[Y+this.perm[Z+1]]] % 12;\n  var gi110 = this.perm[X+1+this.perm[Y+1+this.perm[Z]]] % 12;\n  var gi111 = this.perm[X+1+this.perm[Y+1+this.perm[Z+1]]] % 12;\n\n  // The gradients of each corner are now:\n  // g000 = grad3[gi000];\n  // g001 = grad3[gi001];\n  // g010 = grad3[gi010];\n  // g011 = grad3[gi011];\n  // g100 = grad3[gi100];\n  // g101 = grad3[gi101];\n  // g110 = grad3[gi110];\n  // g111 = grad3[gi111];\n  // Calculate noise contributions from each of the eight corners\n  var n000= this.dot(this.grad3[gi000], x, y, z);\n  var n100= this.dot(this.grad3[gi100], x-1, y, z);\n  var n010= this.dot(this.grad3[gi010], x, y-1, z);\n  var n110= this.dot(this.grad3[gi110], x-1, y-1, z);\n  var n001= this.dot(this.grad3[gi001], x, y, z-1);\n  var n101= this.dot(this.grad3[gi101], x-1, y, z-1);\n  var n011= this.dot(this.grad3[gi011], x, y-1, z-1);\n  var n111= this.dot(this.grad3[gi111], x-1, y-1, z-1);\n  // Compute the fade curve value for each of x, y, z\n  var u = this.fade(x);\n  var v = this.fade(y);\n  var w = this.fade(z);\n   // Interpolate along x the contributions from each of the corners\n  var nx00 = this.mix(n000, n100, u);\n  var nx01 = this.mix(n001, n101, u);\n  var nx10 = this.mix(n010, n110, u);\n  var nx11 = this.mix(n011, n111, u);\n  // Interpolate the four results along y\n  var nxy0 = this.mix(nx00, nx10, v);\n  var nxy1 = this.mix(nx01, nx11, v);\n  // Interpolate the two last results along z\n  var nxyz = this.mix(nxy0, nxy1, w);\n\n  return nxyz;\n};\n","const Event = require('../core/event');\n\nvar opacityUpdate = function(opacity) {\n  this.el.object3D.traverse(function (o) {\n    if (o.material) {\n      o.material.transparent = true;\n      o.material.opacity = opacity;\n    }\n  });\n  for (let text of this.textEntities) {\n    text.setAttribute('opacity', opacity);\n  }\n}\n\n// -----------------------------------------------------------------------------\n// FADEIN\n\nAFRAME.registerComponent('fadein', {\n  schema: {\n    duration: { type: 'int', default: 200 },\n  },\n  init: function() {\n    this.textEntities = this.el.querySelectorAll('a-text');\n    this.opacityUpdate(0);\n    this.start = null;\n  },\n  tick: function (t) {\n    if (!this.start) { this.start = t; }\n    var opacity = Math.min((t - this.start) / this.data.duration, 1);\n    this.opacityUpdate(opacity);\n    if (opacity === 1) {\n      this.el.removeAttribute('fadein');\n      Event.emit(this.el, 'animationend');\n    }\n  },\n  opacityUpdate: opacityUpdate\n});\n\n// -----------------------------------------------------------------------------\n// FADEOUT\n\nAFRAME.registerComponent('fadeout', {\n  schema: {\n    duration: { type: 'int', default: 200 },\n    forceFade: { type: 'bool', default: false }\n  },\n  init: function() {\n    this.textEntities = this.el.querySelectorAll('a-text');\n    this.opacity = (this.data.forceFade) ? 1 : (this.el.getAttribute('opacity') || 1);\n\n    this.opacityUpdate(this.opacity);\n    this.start = null;\n  },\n  tick: function (t) {\n    if (!this.start) { this.start = t; }\n    var opacity = this.opacity-Math.min((t - this.start) / this.data.duration, this.opacity);\n    this.opacityUpdate(opacity);\n\n    if (opacity === 0) {\n      this.el.removeAttribute('fadeout');\n      Event.emit(this.el, 'animationend');\n    }\n  },\n  opacityUpdate: opacityUpdate\n});\n\n// -----------------------------------------------------------------------------\n// SHOW\n\nAFRAME.registerComponent('show', {\n  init: function() {\n    this.textEntities = this.el.querySelectorAll('a-text');\n    this.opacityUpdate(1);\n    this.el.removeAttribute('show');\n  },\n  opacityUpdate: opacityUpdate\n});\n\n// -----------------------------------------------------------------------------\n// HIDE\n\nAFRAME.registerComponent('hide', {\n  init: function() {\n    this.textEntities = this.el.querySelectorAll('a-text');\n    this.opacityUpdate(0);\n    this.el.removeAttribute('hide');\n  },\n  opacityUpdate: opacityUpdate\n});\n","const Event = require('../core/event');\n\nAFRAME.registerComponent('app-door', {\n  schema: {},\n\n  init() {\n    const model = this.el.getObject3D('mesh');\n    this.cameraEl = document.querySelector('a-camera');\n    this.doorOpenned = false;\n    this.cameraSpeed = 0;\n    this.emitted = false;\n    this.clicked = false;\n\n    if (AFRAME.utils.device.isMobile()) {\n      this.el.sceneEl.canvas.addEventListener('click', this.doorMouseClick.bind(this));\n    }\n    else {\n      this.el.addEventListener('mouseenter', this.doorMouseEnter.bind(this));\n      this.el.addEventListener('mouseleave', this.doorMouseLeave.bind(this));\n      this.el.addEventListener('click', this.doorMouseClick.bind(this));\n    }\n\n    if (model) this.loadDoorAnimation(model);\n    else {\n      this.el.addEventListener('model-loaded', (e) => {\n        this.loadDoorAnimation(e.detail.model);\n      });\n    }\n  },\n\n  tick(t, dt) {\n    if (this.emitted) return;\n\n    if (this.mixer && !isNaN(dt)) this.mixer.update(dt / 1000);\n\n    // Camera dolly\n    if (!this.doorOpenned) return;\n    const currentPos = this.cameraEl.object3D.position;\n    if (currentPos.z < -3.9) {\n      this.emitted = true;\n      const mainScene = document.querySelector('#mainScene');\n      mainScene.parentNode.removeChild(mainScene);\n      Event.emit(this.el, 'doorOpenned');\n      return;\n    }\n    currentPos.z -= this.cameraSpeed;\n    if (this.cameraSpeed > 0.08) return;\n    this.cameraSpeed += 0.002;\n  },\n\n  loadDoorAnimation(model) {\n    const layers = model.children[0];\n    const doorLayer = layers.children[1];\n    const doorMat = doorLayer.material[2];\n    doorMat.transparent = true;\n    doorMat.flatShading = true;\n\n    doorLayer.material[2] = new THREE.MeshBasicMaterial({ map: doorMat.map, transparent: true, flatShading: true});\n\n    console.log(doorMat)\n\n    this.mixer = new THREE.AnimationMixer( model );\n    const action = this.action = this.mixer.clipAction( model.animations[0] );\n    action.setLoop(THREE.LoopOnce);\n    action.clampWhenFinished = true;\n  },\n\n  // ---------------------------------------------------------------------------\n  // EVENTS\n\n  doorMouseEnter() {\n    if (window.store.modalOpen) return;\n    const appEl = document.querySelector('.app');\n    appEl.classList.add('click');\n  },\n\n  doorMouseLeave() {\n    const appEl = document.querySelector('.app');\n    appEl.classList.remove('click');\n  },\n\n  doorMouseClick() {\n    if (!this.action || this.clicked) return;\n    this.clicked = true;\n\n    if (AFRAME.utils.device.isMobile()) {\n      setTimeout(()=>{this.action.play();}, 1200);\n    }\n    else {\n      this.action.play();\n    }\n\n    const shadowEl = document.querySelector('#doorShadow');\n    shadowEl.setAttribute('fadeout', { duration: 2300 });\n\n    setTimeout(()=>{\n      this.doorOpenned = window.store.doorOpenned = true;\n    }, 500);\n\n    Event.emit(this.el, 'doorOpening');\n  },\n\n\n});\n","const texture = new THREE.TextureLoader().load('/assets/textures/star.png');\n\nvar ww = window.innerWidth;\nvar wh = window.innerHeight;\n\nvar isMobile = ww < 500;\n\nAFRAME.registerComponent('stars', {\n  schema: {},\n\n  init() {\n    this.particles = [];\n    this.el.sceneEl.addEventListener('loaded', ()=>{\n      this.el.setAttribute(\"position\", '-2.5 -1 0');\n      this.sceneEl = this.el.sceneEl;\n      this.scene = this.el.sceneEl.object3D;\n      setTimeout(()=>this.setUp(), 0);\n    });\n  },\n\n  tick(t) {\n    if (!this.el.parentNode.object3D.visible) return;\n    for (var i = 0; i < this.particles.length; i++){\n       this.particles[i].update(this);\n    }\n  },\n\n  setUp() {\n    this.particles = [];\n    for(var i = 0; i < (isMobile?70:100); i++){\n      this.particles.push(new Particle( this.el.object3D ));\n    }\n  }\n\n});\n\nclass Particle {\n\n  constructor(scene, burst, time) {\n    var radius = this.radius = Math.random()*0.1 + 0.08;\n\n    this.color = new THREE.Color(\"hsl(\"+(Math.random()*50+180)+\",100%,90%)\");\n\n    var mat = new THREE.MeshBasicMaterial({\n      color: this.color,\n      transparent: true,\n      map: texture,\n      side: THREE.DoubleSide,\n      flatShading: true,\n      transparent: true,\n      depthTest: false\n    });\n    this.mesh = new THREE.Mesh(new THREE.PlaneGeometry(1, 1), mat);\n    this.mesh.scale.set(radius, radius, radius);\n    this.percent = Math.random();\n    this.speed = Math.random()*0.003 + 0.006;\n    this.setPosition();\n    scene.add(this.mesh);\n  }\n\n  setPosition() {\n    this.posZ = -10+Math.random()*10;\n    this.mesh.position.set(Math.random()*5, Math.random()*5, this.posZ);\n  }\n\n  update() {\n    this.percent += this.speed;\n    if (this.percent > 1) {\n      this.percent = 0;\n      this.setPosition();\n    }\n\n    if (this.percent < 0.5) {\n      this.mesh.material.opacity = (this.percent*2);\n    }\n    else {\n      this.mesh.material.opacity = (1-(this.percent-0.5)*2);\n    }\n\n    this.mesh.position.z = this.posZ+(6*this.percent);\n  }\n}\n","\n/**\n * @author Kyle-Larson https://github.com/Kyle-Larson\n * @author Takahiro https://github.com/takahirox\n * @author Lewy Blue https://github.com/looeee\n *\n * Loader loads FBX file and generates Group representing FBX scene.\n * Requires FBX file to be >= 7.0 and in ASCII or to be any version in Binary format.\n *\n * Supports:\n *  Mesh Generation (Positional Data)\n *  Normal Data (Per Vertex Drawing Instance)\n *  UV Data (Per Vertex Drawing Instance)\n *  Skinning\n *  Animation\n *  - Separated Animations based on stacks.\n *  - Skeletal & Non-Skeletal Animations\n *  NURBS (Open, Closed and Periodic forms)\n *\n * Needs Support:\n *  Euler rotation order\n *\n *\n * FBX format references:\n *  https://wiki.blender.org/index.php/User:Mont29/Foundation/FBX_File_Structure\n *\n *  Binary format specification:\n *    https://code.blender.org/2013/08/fbx-binary-file-format-specification/\n *    https://wiki.rogiken.org/specifications/file-format/fbx/ (more detail but Japanese)\n */\n\n// Monkeypatch for <r89\nTHREE.LoaderUtils = {\n  extractUrlBase: THREE.Loader.prototype.extractUrlBase,\n  decodeText: function (array) {\n    return new TextDecoder().decode(array);\n  }\n};\n\n( function () {\n\n  THREE.FBXLoader = function ( manager ) {\n\n    this.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n  };\n\n  Object.assign( THREE.FBXLoader.prototype, {\n\n    load: function ( url, onLoad, onProgress, onError ) {\n\n      var self = this;\n\n      var resourceDirectory = THREE.LoaderUtils.extractUrlBase( url );\n\n      var loader = new THREE.FileLoader( this.manager );\n      loader.setResponseType( 'arraybuffer' );\n      loader.load( url, function ( buffer ) {\n\n        try {\n\n          var scene = self.parse( buffer, resourceDirectory );\n          onLoad( scene );\n\n        } catch ( error ) {\n\n          window.setTimeout( function () {\n\n            if ( onError ) onError( error );\n\n            self.manager.itemError( url );\n\n          }, 0 );\n\n        }\n\n      }, onProgress, onError );\n\n    },\n\n    parse: function ( FBXBuffer, resourceDirectory ) {\n\n      var FBXTree;\n\n      if ( isFbxFormatBinary( FBXBuffer ) ) {\n\n        FBXTree = new BinaryParser().parse( FBXBuffer );\n\n      } else {\n\n        var FBXText = convertArrayBufferToString( FBXBuffer );\n\n        if ( ! isFbxFormatASCII( FBXText ) ) {\n\n          throw new Error( 'THREE.FBXLoader: Unknown format.' );\n\n        }\n\n        if ( getFbxVersion( FBXText ) < 7000 ) {\n\n          throw new Error( 'THREE.FBXLoader: FBX version not supported, FileVersion: ' + getFbxVersion( FBXText ) );\n\n        }\n\n        FBXTree = new TextParser().parse( FBXText );\n\n      }\n\n      // console.log( FBXTree );\n\n      var connections = parseConnections( FBXTree );\n      var images = parseImages( FBXTree );\n      var textures = parseTextures( FBXTree, new THREE.TextureLoader( this.manager ).setPath( resourceDirectory ), images, connections );\n      var materials = parseMaterials( FBXTree, textures, connections );\n      var skeletons = parseDeformers( FBXTree, connections );\n      var geometryMap = parseGeometries( FBXTree, connections, skeletons );\n      var sceneGraph = parseScene( FBXTree, connections, skeletons, geometryMap, materials );\n\n      return sceneGraph;\n\n    }\n\n  } );\n\n  // Parses FBXTree.Connections which holds parent-child connections between objects (e.g. material -> texture, model->geometry )\n  // and details the connection type\n  function parseConnections( FBXTree ) {\n\n    var connectionMap = new Map();\n\n    if ( 'Connections' in FBXTree ) {\n\n      var rawConnections = FBXTree.Connections.connections;\n\n      rawConnections.forEach( function ( rawConnection ) {\n\n        var fromID = rawConnection[ 0 ];\n        var toID = rawConnection[ 1 ];\n        var relationship = rawConnection[ 2 ];\n\n        if ( ! connectionMap.has( fromID ) ) {\n\n          connectionMap.set( fromID, {\n            parents: [],\n            children: []\n          } );\n\n        }\n\n        var parentRelationship = { ID: toID, relationship: relationship };\n        connectionMap.get( fromID ).parents.push( parentRelationship );\n\n        if ( ! connectionMap.has( toID ) ) {\n\n          connectionMap.set( toID, {\n            parents: [],\n            children: []\n          } );\n\n        }\n\n        var childRelationship = { ID: fromID, relationship: relationship };\n        connectionMap.get( toID ).children.push( childRelationship );\n\n      } );\n\n    }\n\n    return connectionMap;\n\n  }\n\n  // Parse FBXTree.Objects.Video for embedded image data\n  // These images are connected to textures in FBXTree.Objects.Textures\n  // via FBXTree.Connections.\n  function parseImages( FBXTree ) {\n\n    var images = {};\n    var blobs = {};\n\n    if ( 'Video' in FBXTree.Objects ) {\n\n      var videoNodes = FBXTree.Objects.Video;\n\n      for ( var nodeID in videoNodes ) {\n\n        var videoNode = videoNodes[ nodeID ];\n\n        var id = parseInt( nodeID );\n\n        images[ id ] = videoNode.Filename;\n\n        // raw image data is in videoNode.Content\n        if ( 'Content' in videoNode ) {\n\n          var arrayBufferContent = ( videoNode.Content instanceof ArrayBuffer ) && ( videoNode.Content.byteLength > 0 );\n          var base64Content = ( typeof videoNode.Content === 'string' ) && ( videoNode.Content !== '' );\n\n          if ( arrayBufferContent || base64Content ) {\n\n            var image = parseImage( videoNodes[ nodeID ] );\n\n            blobs[ videoNode.Filename ] = image;\n\n          }\n\n        }\n\n      }\n\n    }\n\n    for ( var id in images ) {\n\n      var filename = images[ id ];\n\n      if ( blobs[ filename ] !== undefined ) images[ id ] = blobs[ filename ];\n      else images[ id ] = images[ id ].split( '\\\\' ).pop();\n\n    }\n\n    return images;\n\n  }\n\n  // Parse embedded image data in FBXTree.Video.Content\n  function parseImage( videoNode ) {\n\n    var content = videoNode.Content;\n    var fileName = videoNode.RelativeFilename || videoNode.Filename;\n    var extension = fileName.slice( fileName.lastIndexOf( '.' ) + 1 ).toLowerCase();\n\n    var type;\n\n    switch ( extension ) {\n\n      case 'bmp':\n\n        type = 'image/bmp';\n        break;\n\n      case 'jpg':\n      case 'jpeg':\n\n        type = 'image/jpeg';\n        break;\n\n      case 'png':\n\n        type = 'image/png';\n        break;\n\n      case 'tif':\n\n        type = 'image/tiff';\n        break;\n\n      default:\n\n        console.warn( 'FBXLoader: Image type \"' + extension + '\" is not supported.' );\n        return;\n\n    }\n\n    if ( typeof content === 'string' ) { // ASCII format\n\n      return 'data:' + type + ';base64,' + content;\n\n    } else { // Binary Format\n\n      var array = new Uint8Array( content );\n      return window.URL.createObjectURL( new Blob( [ array ], { type: type } ) );\n\n    }\n\n  }\n\n  // Parse nodes in FBXTree.Objects.Texture\n  // These contain details such as UV scaling, cropping, rotation etc and are connected\n  // to images in FBXTree.Objects.Video\n  function parseTextures( FBXTree, loader, images, connections ) {\n\n    var textureMap = new Map();\n\n    if ( 'Texture' in FBXTree.Objects ) {\n\n      var textureNodes = FBXTree.Objects.Texture;\n      for ( var nodeID in textureNodes ) {\n\n        var texture = parseTexture( textureNodes[ nodeID ], loader, images, connections );\n        textureMap.set( parseInt( nodeID ), texture );\n\n      }\n\n    }\n\n    return textureMap;\n\n  }\n\n  // Parse individual node in FBXTree.Objects.Texture\n  function parseTexture( textureNode, loader, images, connections ) {\n\n    var texture = loadTexture( textureNode, loader, images, connections );\n\n    texture.ID = textureNode.id;\n\n    texture.name = textureNode.attrName;\n\n    var wrapModeU = textureNode.WrapModeU;\n    var wrapModeV = textureNode.WrapModeV;\n\n    var valueU = wrapModeU !== undefined ? wrapModeU.value : 0;\n    var valueV = wrapModeV !== undefined ? wrapModeV.value : 0;\n\n    // http://download.autodesk.com/us/fbx/SDKdocs/FBX_SDK_Help/files/fbxsdkref/class_k_fbx_texture.html#889640e63e2e681259ea81061b85143a\n    // 0: repeat(default), 1: clamp\n\n    texture.wrapS = valueU === 0 ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n    texture.wrapT = valueV === 0 ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n\n    if ( 'Scaling' in textureNode ) {\n\n      var values = textureNode.Scaling.value;\n\n      texture.repeat.x = values[ 0 ];\n      texture.repeat.y = values[ 1 ];\n\n    }\n\n    return texture;\n\n  }\n\n  // load a texture specified as a blob or data URI, or via an external URL using THREE.TextureLoader\n  function loadTexture( textureNode, loader, images, connections ) {\n\n    var fileName;\n\n    var currentPath = loader.path;\n\n    var children = connections.get( textureNode.id ).children;\n\n    if ( children !== undefined && children.length > 0 && images[ children[ 0 ].ID ] !== undefined ) {\n\n      fileName = images[ children[ 0 ].ID ];\n\n      if ( fileName.indexOf( 'blob:' ) === 0 || fileName.indexOf( 'data:' ) === 0 ) {\n\n        loader.setPath( undefined );\n\n      }\n\n    }\n\n    var texture = loader.load( fileName );\n\n    loader.setPath( currentPath );\n\n    return texture;\n\n  }\n\n  // Parse nodes in FBXTree.Objects.Material\n  function parseMaterials( FBXTree, textureMap, connections ) {\n\n    var materialMap = new Map();\n\n    if ( 'Material' in FBXTree.Objects ) {\n\n      var materialNodes = FBXTree.Objects.Material;\n\n      for ( var nodeID in materialNodes ) {\n\n        var material = parseMaterial( FBXTree, materialNodes[ nodeID ], textureMap, connections );\n\n        if ( material !== null ) materialMap.set( parseInt( nodeID ), material );\n\n      }\n\n    }\n\n    return materialMap;\n\n  }\n\n  // Parse single node in FBXTree.Objects.Material\n  // Materials are connected to texture maps in FBXTree.Objects.Textures\n  // FBX format currently only supports Lambert and Phong shading models\n  function parseMaterial( FBXTree, materialNode, textureMap, connections ) {\n\n    var ID = materialNode.id;\n    var name = materialNode.attrName;\n    var type = materialNode.ShadingModel;\n\n    //Case where FBX wraps shading model in property object.\n    if ( typeof type === 'object' ) {\n\n      type = type.value;\n\n    }\n\n    // Ignore unused materials which don't have any connections.\n    if ( ! connections.has( ID ) ) return null;\n\n    var parameters = parseParameters( FBXTree, materialNode, textureMap, ID, connections );\n\n    var material;\n\n    switch ( type.toLowerCase() ) {\n\n      case 'phong':\n        material = new THREE.MeshPhongMaterial();\n        break;\n      case 'lambert':\n        material = new THREE.MeshLambertMaterial();\n        break;\n      default:\n        console.warn( 'THREE.FBXLoader: unknown material type \"%s\". Defaulting to MeshPhongMaterial.', type );\n        material = new THREE.MeshPhongMaterial( { color: 0x3300ff } );\n        break;\n\n    }\n\n    material.setValues( parameters );\n    material.name = name;\n\n    return material;\n\n  }\n\n  // Parse FBX material and return parameters suitable for a three.js material\n  // Also parse the texture map and return any textures associated with the material\n  function parseParameters( FBXTree, properties, textureMap, ID, connections ) {\n\n    var parameters = {};\n\n    if ( properties.BumpFactor ) {\n\n      parameters.bumpScale = properties.BumpFactor.value;\n\n    }\n    if ( properties.Diffuse ) {\n\n      parameters.color = new THREE.Color().fromArray( properties.Diffuse.value );\n\n    }\n    if ( properties.DisplacementFactor ) {\n\n      parameters.displacementScale = properties.DisplacementFactor.value;\n\n    }\n    if ( properties.ReflectionFactor ) {\n\n      parameters.reflectivity = properties.ReflectionFactor.value;\n\n    }\n    if ( properties.Specular ) {\n\n      parameters.specular = new THREE.Color().fromArray( properties.Specular.value );\n\n    }\n    if ( properties.Shininess ) {\n\n      parameters.shininess = properties.Shininess.value;\n\n    }\n    if ( properties.Emissive ) {\n\n      parameters.emissive = new THREE.Color().fromArray( properties.Emissive.value );\n\n    }\n    if ( properties.EmissiveFactor ) {\n\n      parameters.emissiveIntensity = parseFloat( properties.EmissiveFactor.value );\n\n    }\n    if ( properties.Opacity ) {\n\n      parameters.opacity = parseFloat( properties.Opacity.value );\n\n    }\n    if ( parameters.opacity < 1.0 ) {\n\n      parameters.transparent = true;\n\n    }\n\n    connections.get( ID ).children.forEach( function ( child ) {\n\n      var type = child.relationship;\n\n      switch ( type ) {\n\n        case 'Bump':\n          parameters.bumpMap = textureMap.get( child.ID );\n          break;\n\n        case 'DiffuseColor':\n          parameters.map = getTexture( FBXTree, textureMap, child.ID, connections );\n          break;\n\n        case 'DisplacementColor':\n          parameters.displacementMap = getTexture( FBXTree, textureMap, child.ID, connections );\n          break;\n\n\n        case 'EmissiveColor':\n          parameters.emissiveMap = getTexture( FBXTree, textureMap, child.ID, connections );\n          break;\n\n        case 'NormalMap':\n          parameters.normalMap = getTexture( FBXTree, textureMap, child.ID, connections );\n          break;\n\n        case 'ReflectionColor':\n          parameters.envMap = getTexture( FBXTree, textureMap, child.ID, connections );\n          parameters.envMap.mapping = THREE.EquirectangularReflectionMapping;\n          break;\n\n        case 'SpecularColor':\n          parameters.specularMap = getTexture( FBXTree, textureMap, child.ID, connections );\n          break;\n\n        case 'TransparentColor':\n          parameters.alphaMap = getTexture( FBXTree, textureMap, child.ID, connections );\n          parameters.transparent = true;\n          break;\n\n        case 'AmbientColor':\n        case 'ShininessExponent': // AKA glossiness map\n        case 'SpecularFactor': // AKA specularLevel\n        case 'VectorDisplacementColor': // NOTE: Seems to be a copy of DisplacementColor\n        default:\n          console.warn( 'THREE.FBXLoader: %s map is not supported in three.js, skipping texture.', type );\n          break;\n\n      }\n\n    } );\n\n    return parameters;\n\n  }\n\n  // get a texture from the textureMap for use by a material.\n  function getTexture( FBXTree, textureMap, id, connections ) {\n\n    // if the texture is a layered texture, just use the first layer and issue a warning\n    if ( 'LayeredTexture' in FBXTree.Objects && id in FBXTree.Objects.LayeredTexture ) {\n\n      console.warn( 'THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer.' );\n      id = connections.get( id ).children[ 0 ].ID;\n\n    }\n\n    return textureMap.get( id );\n\n  }\n\n  // Parse nodes in FBXTree.Objects.Deformer\n  // Deformer node can contain skinning or Vertex Cache animation data, however only skinning is supported here\n  // Generates map of Skeleton-like objects for use later when generating and binding skeletons.\n  function parseDeformers( FBXTree, connections ) {\n\n    var skeletons = {};\n\n    if ( 'Deformer' in FBXTree.Objects ) {\n\n      var DeformerNodes = FBXTree.Objects.Deformer;\n\n      for ( var nodeID in DeformerNodes ) {\n\n        var deformerNode = DeformerNodes[ nodeID ];\n\n        if ( deformerNode.attrType === 'Skin' ) {\n\n          var relationships = connections.get( parseInt( nodeID ) );\n\n          var skeleton = parseSkeleton( relationships, DeformerNodes );\n          skeleton.ID = nodeID;\n\n          if ( relationships.parents.length > 1 ) console.warn( 'THREE.FBXLoader: skeleton attached to more than one geometry is not supported.' );\n          skeleton.geometryID = relationships.parents[ 0 ].ID;\n\n          skeletons[ nodeID ] = skeleton;\n\n        }\n\n      }\n\n    }\n\n    return skeletons;\n\n  }\n\n  // Parse single nodes in FBXTree.Objects.Deformer\n  // The top level deformer nodes have type 'Skin' and subDeformer nodes have type 'Cluster'\n  // Each skin node represents a skeleton and each cluster node represents a bone\n  function parseSkeleton( connections, deformerNodes ) {\n\n    var rawBones = [];\n\n    connections.children.forEach( function ( child ) {\n\n      var subDeformerNode = deformerNodes[ child.ID ];\n\n      if ( subDeformerNode.attrType !== 'Cluster' ) return;\n\n      var rawBone = {\n\n        ID: child.ID,\n        indices: [],\n        weights: [],\n        transform: new THREE.Matrix4().fromArray( subDeformerNode.Transform.a ),\n        transformLink: new THREE.Matrix4().fromArray( subDeformerNode.TransformLink.a ),\n        linkMode: subDeformerNode.Mode,\n\n      };\n\n      if ( 'Indexes' in subDeformerNode ) {\n\n        rawBone.indices = subDeformerNode.Indexes.a;\n        rawBone.weights = subDeformerNode.Weights.a;\n\n      }\n\n      rawBones.push( rawBone );\n\n    } );\n\n    return {\n\n      rawBones: rawBones,\n      bones: []\n\n    };\n\n  }\n\n  // Parse nodes in FBXTree.Objects.Geometry\n  function parseGeometries( FBXTree, connections, skeletons ) {\n\n    var geometryMap = new Map();\n\n    if ( 'Geometry' in FBXTree.Objects ) {\n\n      var geometryNodes = FBXTree.Objects.Geometry;\n\n\n\n      for ( var nodeID in geometryNodes ) {\n\n        var relationships = connections.get( parseInt( nodeID ) );\n        var geo = parseGeometry( FBXTree, relationships, geometryNodes[ nodeID ], skeletons );\n\n        geometryMap.set( parseInt( nodeID ), geo );\n\n      }\n\n    }\n\n    return geometryMap;\n\n  }\n\n  // Parse single node in FBXTree.Objects.Geometry\n  function parseGeometry( FBXTree, relationships, geometryNode, skeletons ) {\n\n    switch ( geometryNode.attrType ) {\n\n      case 'Mesh':\n        return parseMeshGeometry( FBXTree, relationships, geometryNode, skeletons );\n        break;\n\n      case 'NurbsCurve':\n        return parseNurbsGeometry( geometryNode );\n        break;\n\n    }\n\n  }\n\n\n  // Parse single node mesh geometry in FBXTree.Objects.Geometry\n  function parseMeshGeometry( FBXTree, relationships, geometryNode, skeletons ) {\n\n    var modelNodes = relationships.parents.map( function ( parent ) {\n\n      return FBXTree.Objects.Model[ parent.ID ];\n\n    } );\n\n    // don't create geometry if it is not associated with any models\n    if ( modelNodes.length === 0 ) return;\n\n    var skeleton = relationships.children.reduce( function ( skeleton, child ) {\n\n      if ( skeletons[ child.ID ] !== undefined ) skeleton = skeletons[ child.ID ];\n\n      return skeleton;\n\n    }, null );\n\n    var preTransform = new THREE.Matrix4();\n\n    // TODO: if there is more than one model associated with the geometry, AND the models have\n    // different geometric transforms, then this will cause problems\n    // if ( modelNodes.length > 1 ) { }\n\n    // For now just assume one model and get the preRotations from that\n    var modelNode = modelNodes[ 0 ];\n\n    if ( 'GeometricRotation' in modelNode ) {\n\n      var array = modelNode.GeometricRotation.value.map( THREE.Math.degToRad );\n      array[ 3 ] = 'ZYX';\n\n      preTransform.makeRotationFromEuler( new THREE.Euler().fromArray( array ) );\n\n    }\n\n    if ( 'GeometricTranslation' in modelNode ) {\n\n      preTransform.setPosition( new THREE.Vector3().fromArray( modelNode.GeometricTranslation.value ) );\n\n    }\n\n    return genGeometry( FBXTree, relationships, geometryNode, skeleton, preTransform );\n\n  }\n\n  // Generate a THREE.BufferGeometry from a node in FBXTree.Objects.Geometry\n  function genGeometry( FBXTree, relationships, geometryNode, skeleton, preTransform ) {\n\n    var vertexPositions = geometryNode.Vertices.a;\n    var vertexIndices = geometryNode.PolygonVertexIndex.a;\n\n    // create arrays to hold the final data used to build the buffergeometry\n    var vertexBuffer = [];\n    var normalBuffer = [];\n    var colorsBuffer = [];\n    var uvsBuffer = [];\n    var materialIndexBuffer = [];\n    var vertexWeightsBuffer = [];\n    var weightsIndicesBuffer = [];\n\n    if ( geometryNode.LayerElementColor ) {\n\n      var colorInfo = getColors( geometryNode.LayerElementColor[ 0 ] );\n\n    }\n\n    if ( geometryNode.LayerElementMaterial ) {\n\n      var materialInfo = getMaterials( geometryNode.LayerElementMaterial[ 0 ] );\n\n    }\n\n    if ( geometryNode.LayerElementNormal ) {\n\n      var normalInfo = getNormals( geometryNode.LayerElementNormal[ 0 ] );\n\n    }\n\n    if ( geometryNode.LayerElementUV ) {\n\n      var uvInfo = [];\n      var i = 0;\n      while ( geometryNode.LayerElementUV[ i ] ) {\n\n        uvInfo.push( getUVs( geometryNode.LayerElementUV[ i ] ) );\n        i ++;\n\n      }\n\n    }\n\n    var weightTable = {};\n\n    if ( skeleton !== null ) {\n\n      skeleton.rawBones.forEach( function ( rawBone, i ) {\n\n        // loop over the bone's vertex indices and weights\n        rawBone.indices.forEach( function ( index, j ) {\n\n          if ( weightTable[ index ] === undefined ) weightTable[ index ] = [];\n\n          weightTable[ index ].push( {\n\n            id: i,\n            weight: rawBone.weights[ j ],\n\n          } );\n\n        } );\n\n      } );\n\n    }\n\n    var polygonIndex = 0;\n    var faceLength = 0;\n    var displayedWeightsWarning = false;\n\n    // these will hold data for a single face\n    var vertexPositionIndexes = [];\n    var faceNormals = [];\n    var faceColors = [];\n    var faceUVs = [];\n    var faceWeights = [];\n    var faceWeightIndices = [];\n\n    vertexIndices.forEach( function ( vertexIndex, polygonVertexIndex ) {\n\n      var endOfFace = false;\n\n      // Face index and vertex index arrays are combined in a single array\n      // A cube with quad faces looks like this:\n      // PolygonVertexIndex: *24 {\n      //  a: 0, 1, 3, -3, 2, 3, 5, -5, 4, 5, 7, -7, 6, 7, 1, -1, 1, 7, 5, -4, 6, 0, 2, -5\n      //  }\n      // Negative numbers mark the end of a face - first face here is 0, 1, 3, -3\n      // to find index of last vertex multiply by -1 and subtract 1: -3 * - 1 - 1 = 2\n      if ( vertexIndex < 0 ) {\n\n        vertexIndex = vertexIndex ^ - 1; // equivalent to ( x * -1 ) - 1\n        vertexIndices[ polygonVertexIndex ] = vertexIndex;\n        endOfFace = true;\n\n      }\n\n      var weightIndices = [];\n      var weights = [];\n\n      vertexPositionIndexes.push( vertexIndex * 3, vertexIndex * 3 + 1, vertexIndex * 3 + 2 );\n\n      if ( colorInfo ) {\n\n        var data = getData( polygonVertexIndex, polygonIndex, vertexIndex, colorInfo );\n\n        faceColors.push( data[ 0 ], data[ 1 ], data[ 2 ] );\n\n      }\n\n      if ( skeleton ) {\n\n        if ( weightTable[ vertexIndex ] !== undefined ) {\n\n          weightTable[ vertexIndex ].forEach( function ( wt ) {\n\n            weights.push( wt.weight );\n            weightIndices.push( wt.id );\n\n          } );\n\n\n        }\n\n        if ( weights.length > 4 ) {\n\n          if ( ! displayedWeightsWarning ) {\n\n            console.warn( 'THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights.' );\n            displayedWeightsWarning = true;\n\n          }\n\n          var wIndex = [ 0, 0, 0, 0 ];\n          var Weight = [ 0, 0, 0, 0 ];\n\n          weights.forEach( function ( weight, weightIndex ) {\n\n            var currentWeight = weight;\n            var currentIndex = weightIndices[ weightIndex ];\n\n            Weight.forEach( function ( comparedWeight, comparedWeightIndex, comparedWeightArray ) {\n\n              if ( currentWeight > comparedWeight ) {\n\n                comparedWeightArray[ comparedWeightIndex ] = currentWeight;\n                currentWeight = comparedWeight;\n\n                var tmp = wIndex[ comparedWeightIndex ];\n                wIndex[ comparedWeightIndex ] = currentIndex;\n                currentIndex = tmp;\n\n              }\n\n            } );\n\n          } );\n\n          weightIndices = wIndex;\n          weights = Weight;\n\n        }\n\n        // if the weight array is shorter than 4 pad with 0s\n        while ( weights.length < 4 ) {\n\n          weights.push( 0 );\n          weightIndices.push( 0 );\n\n        }\n\n        for ( var i = 0; i < 4; ++ i ) {\n\n          faceWeights.push( weights[ i ] );\n          faceWeightIndices.push( weightIndices[ i ] );\n\n        }\n\n      }\n\n      if ( normalInfo ) {\n\n        var data = getData( polygonVertexIndex, polygonIndex, vertexIndex, normalInfo );\n\n        faceNormals.push( data[ 0 ], data[ 1 ], data[ 2 ] );\n\n      }\n\n      if ( materialInfo && materialInfo.mappingType !== 'AllSame' ) {\n\n        var materialIndex = getData( polygonVertexIndex, polygonIndex, vertexIndex, materialInfo )[ 0 ];\n\n      }\n\n      if ( uvInfo ) {\n\n        uvInfo.forEach( function ( uv, i ) {\n\n          var data = getData( polygonVertexIndex, polygonIndex, vertexIndex, uv );\n\n          if ( faceUVs[ i ] === undefined ) {\n\n            faceUVs[ i ] = [];\n\n          }\n\n          faceUVs[ i ].push( data[ 0 ] );\n          faceUVs[ i ].push( data[ 1 ] );\n\n        } );\n\n      }\n\n      faceLength ++;\n\n      // we have reached the end of a face - it may have 4 sides though\n      // in which case the data is split to represent two 3 sided faces\n      if ( endOfFace ) {\n\n        for ( var i = 2; i < faceLength; i ++ ) {\n\n          vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ 0 ] ] );\n          vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ 1 ] ] );\n          vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ 2 ] ] );\n\n          vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ ( i - 1 ) * 3 ] ] );\n          vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ ( i - 1 ) * 3 + 1 ] ] );\n          vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ ( i - 1 ) * 3 + 2 ] ] );\n\n          vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ i * 3 ] ] );\n          vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ i * 3 + 1 ] ] );\n          vertexBuffer.push( vertexPositions[ vertexPositionIndexes[ i * 3 + 2 ] ] );\n\n          if ( skeleton ) {\n\n            vertexWeightsBuffer.push( faceWeights[ 0 ] );\n            vertexWeightsBuffer.push( faceWeights[ 1 ] );\n            vertexWeightsBuffer.push( faceWeights[ 2 ] );\n            vertexWeightsBuffer.push( faceWeights[ 3 ] );\n\n            vertexWeightsBuffer.push( faceWeights[ ( i - 1 ) * 4 ] );\n            vertexWeightsBuffer.push( faceWeights[ ( i - 1 ) * 4 + 1 ] );\n            vertexWeightsBuffer.push( faceWeights[ ( i - 1 ) * 4 + 2 ] );\n            vertexWeightsBuffer.push( faceWeights[ ( i - 1 ) * 4 + 3 ] );\n\n            vertexWeightsBuffer.push( faceWeights[ i * 4 ] );\n            vertexWeightsBuffer.push( faceWeights[ i * 4 + 1 ] );\n            vertexWeightsBuffer.push( faceWeights[ i * 4 + 2 ] );\n            vertexWeightsBuffer.push( faceWeights[ i * 4 + 3 ] );\n\n            weightsIndicesBuffer.push( faceWeightIndices[ 0 ] );\n            weightsIndicesBuffer.push( faceWeightIndices[ 1 ] );\n            weightsIndicesBuffer.push( faceWeightIndices[ 2 ] );\n            weightsIndicesBuffer.push( faceWeightIndices[ 3 ] );\n\n            weightsIndicesBuffer.push( faceWeightIndices[ ( i - 1 ) * 4 ] );\n            weightsIndicesBuffer.push( faceWeightIndices[ ( i - 1 ) * 4 + 1 ] );\n            weightsIndicesBuffer.push( faceWeightIndices[ ( i - 1 ) * 4 + 2 ] );\n            weightsIndicesBuffer.push( faceWeightIndices[ ( i - 1 ) * 4 + 3 ] );\n\n            weightsIndicesBuffer.push( faceWeightIndices[ i * 4 ] );\n            weightsIndicesBuffer.push( faceWeightIndices[ i * 4 + 1 ] );\n            weightsIndicesBuffer.push( faceWeightIndices[ i * 4 + 2 ] );\n            weightsIndicesBuffer.push( faceWeightIndices[ i * 4 + 3 ] );\n\n          }\n\n          if ( colorInfo ) {\n\n            colorsBuffer.push( faceColors[ 0 ] );\n            colorsBuffer.push( faceColors[ 1 ] );\n            colorsBuffer.push( faceColors[ 2 ] );\n\n            colorsBuffer.push( faceColors[ ( i - 1 ) * 3 ] );\n            colorsBuffer.push( faceColors[ ( i - 1 ) * 3 + 1 ] );\n            colorsBuffer.push( faceColors[ ( i - 1 ) * 3 + 2 ] );\n\n            colorsBuffer.push( faceColors[ i * 3 ] );\n            colorsBuffer.push( faceColors[ i * 3 + 1 ] );\n            colorsBuffer.push( faceColors[ i * 3 + 2 ] );\n\n          }\n\n          if ( materialInfo && materialInfo.mappingType !== 'AllSame' ) {\n\n            materialIndexBuffer.push( materialIndex );\n            materialIndexBuffer.push( materialIndex );\n            materialIndexBuffer.push( materialIndex );\n\n          }\n\n          if ( normalInfo ) {\n\n            normalBuffer.push( faceNormals[ 0 ] );\n            normalBuffer.push( faceNormals[ 1 ] );\n            normalBuffer.push( faceNormals[ 2 ] );\n\n            normalBuffer.push( faceNormals[ ( i - 1 ) * 3 ] );\n            normalBuffer.push( faceNormals[ ( i - 1 ) * 3 + 1 ] );\n            normalBuffer.push( faceNormals[ ( i - 1 ) * 3 + 2 ] );\n\n            normalBuffer.push( faceNormals[ i * 3 ] );\n            normalBuffer.push( faceNormals[ i * 3 + 1 ] );\n            normalBuffer.push( faceNormals[ i * 3 + 2 ] );\n\n          }\n\n          if ( uvInfo ) {\n\n            uvInfo.forEach( function ( uv, j ) {\n\n              if ( uvsBuffer[ j ] === undefined ) uvsBuffer[ j ] = [];\n\n              uvsBuffer[ j ].push( faceUVs[ j ][ 0 ] );\n              uvsBuffer[ j ].push( faceUVs[ j ][ 1 ] );\n\n              uvsBuffer[ j ].push( faceUVs[ j ][ ( i - 1 ) * 2 ] );\n              uvsBuffer[ j ].push( faceUVs[ j ][ ( i - 1 ) * 2 + 1 ] );\n\n              uvsBuffer[ j ].push( faceUVs[ j ][ i * 2 ] );\n              uvsBuffer[ j ].push( faceUVs[ j ][ i * 2 + 1 ] );\n\n            } );\n\n          }\n\n        }\n\n        polygonIndex ++;\n        faceLength = 0;\n\n        // reset arrays for the next face\n        vertexPositionIndexes = [];\n        faceNormals = [];\n        faceColors = [];\n        faceUVs = [];\n        faceWeights = [];\n        faceWeightIndices = [];\n\n      }\n\n    } );\n\n    var geo = new THREE.BufferGeometry();\n    geo.name = geometryNode.name;\n\n    var positionAttribute = new THREE.Float32BufferAttribute( vertexBuffer, 3 );\n\n    preTransform.applyToBufferAttribute( positionAttribute );\n\n    geo.addAttribute( 'position', positionAttribute );\n\n    if ( colorsBuffer.length > 0 ) {\n\n      geo.addAttribute( 'color', new THREE.Float32BufferAttribute( colorsBuffer, 3 ) );\n\n    }\n\n    if ( skeleton ) {\n\n      geo.addAttribute( 'skinIndex', new THREE.Float32BufferAttribute( weightsIndicesBuffer, 4 ) );\n\n      geo.addAttribute( 'skinWeight', new THREE.Float32BufferAttribute( vertexWeightsBuffer, 4 ) );\n\n      // used later to bind the skeleton to the model\n      geo.FBX_Deformer = skeleton;\n\n    }\n\n    if ( normalBuffer.length > 0 ) {\n\n      var normalAttribute = new THREE.Float32BufferAttribute( normalBuffer, 3 );\n\n      var normalMatrix = new THREE.Matrix3().getNormalMatrix( preTransform );\n      normalMatrix.applyToBufferAttribute( normalAttribute );\n\n      geo.addAttribute( 'normal', normalAttribute );\n\n    }\n\n    uvsBuffer.forEach( function ( uvBuffer, i ) {\n\n      // subsequent uv buffers are called 'uv1', 'uv2', ...\n      var name = 'uv' + ( i + 1 ).toString();\n\n      // the first uv buffer is just called 'uv'\n      if ( i === 0 ) {\n\n        name = 'uv';\n\n      }\n\n      geo.addAttribute( name, new THREE.Float32BufferAttribute( uvsBuffer[ i ], 2 ) );\n\n    } );\n\n    if ( materialInfo && materialInfo.mappingType !== 'AllSame' ) {\n\n      // Convert the material indices of each vertex into rendering groups on the geometry.\n      var prevMaterialIndex = materialIndexBuffer[ 0 ];\n      var startIndex = 0;\n\n      materialIndexBuffer.forEach( function ( currentIndex, i ) {\n\n        if ( currentIndex !== prevMaterialIndex ) {\n\n          geo.addGroup( startIndex, i - startIndex, prevMaterialIndex );\n\n          prevMaterialIndex = currentIndex;\n          startIndex = i;\n\n        }\n\n      } );\n\n      // the loop above doesn't add the last group, do that here.\n      if ( geo.groups.length > 0 ) {\n\n        var lastGroup = geo.groups[ geo.groups.length - 1 ];\n        var lastIndex = lastGroup.start + lastGroup.count;\n\n        if ( lastIndex !== materialIndexBuffer.length ) {\n\n          geo.addGroup( lastIndex, materialIndexBuffer.length - lastIndex, prevMaterialIndex );\n\n        }\n\n      }\n\n      // case where there are multiple materials but the whole geometry is only\n      // using one of them\n      if ( geo.groups.length === 0 ) {\n\n        geo.addGroup( 0, materialIndexBuffer.length, materialIndexBuffer[ 0 ] );\n\n      }\n\n    }\n\n    return geo;\n\n  }\n\n\n  // Parse normal from FBXTree.Objects.Geometry.LayerElementNormal if it exists\n  function getNormals( NormalNode ) {\n\n    var mappingType = NormalNode.MappingInformationType;\n    var referenceType = NormalNode.ReferenceInformationType;\n    var buffer = NormalNode.Normals.a;\n    var indexBuffer = [];\n    if ( referenceType === 'IndexToDirect' ) {\n\n      if ( 'NormalIndex' in NormalNode ) {\n\n        indexBuffer = NormalNode.NormalIndex.a;\n\n      } else if ( 'NormalsIndex' in NormalNode ) {\n\n        indexBuffer = NormalNode.NormalsIndex.a;\n\n      }\n\n    }\n\n    return {\n      dataSize: 3,\n      buffer: buffer,\n      indices: indexBuffer,\n      mappingType: mappingType,\n      referenceType: referenceType\n    };\n\n  }\n\n  // Parse UVs from FBXTree.Objects.Geometry.LayerElementUV if it exists\n  function getUVs( UVNode ) {\n\n    var mappingType = UVNode.MappingInformationType;\n    var referenceType = UVNode.ReferenceInformationType;\n    var buffer = UVNode.UV.a;\n    var indexBuffer = [];\n    if ( referenceType === 'IndexToDirect' ) {\n\n      indexBuffer = UVNode.UVIndex.a;\n\n    }\n\n    return {\n      dataSize: 2,\n      buffer: buffer,\n      indices: indexBuffer,\n      mappingType: mappingType,\n      referenceType: referenceType\n    };\n\n  }\n\n  // Parse Vertex Colors from FBXTree.Objects.Geometry.LayerElementColor if it exists\n  function getColors( ColorNode ) {\n\n    var mappingType = ColorNode.MappingInformationType;\n    var referenceType = ColorNode.ReferenceInformationType;\n    var buffer = ColorNode.Colors.a;\n    var indexBuffer = [];\n    if ( referenceType === 'IndexToDirect' ) {\n\n      indexBuffer = ColorNode.ColorIndex.a;\n\n    }\n\n    return {\n      dataSize: 4,\n      buffer: buffer,\n      indices: indexBuffer,\n      mappingType: mappingType,\n      referenceType: referenceType\n    };\n\n  }\n\n  // Parse mapping and material data in FBXTree.Objects.Geometry.LayerElementMaterial if it exists\n  function getMaterials( MaterialNode ) {\n\n    var mappingType = MaterialNode.MappingInformationType;\n    var referenceType = MaterialNode.ReferenceInformationType;\n\n    if ( mappingType === 'NoMappingInformation' ) {\n\n      return {\n        dataSize: 1,\n        buffer: [ 0 ],\n        indices: [ 0 ],\n        mappingType: 'AllSame',\n        referenceType: referenceType\n      };\n\n    }\n\n    var materialIndexBuffer = MaterialNode.Materials.a;\n\n    // Since materials are stored as indices, there's a bit of a mismatch between FBX and what\n    // we expect.So we create an intermediate buffer that points to the index in the buffer,\n    // for conforming with the other functions we've written for other data.\n    var materialIndices = [];\n\n    for ( var i = 0; i < materialIndexBuffer.length; ++ i ) {\n\n      materialIndices.push( i );\n\n    }\n\n    return {\n      dataSize: 1,\n      buffer: materialIndexBuffer,\n      indices: materialIndices,\n      mappingType: mappingType,\n      referenceType: referenceType\n    };\n\n  }\n\n  // Functions use the infoObject and given indices to return value array of geometry.\n  // Parameters:\n  // \t- polygonVertexIndex - Index of vertex in draw order (which index of the index buffer refers to this vertex).\n  // \t- polygonIndex - Index of polygon in geometry.\n  // \t- vertexIndex - Index of vertex inside vertex buffer (used because some data refers to old index buffer that we don't use anymore).\n  // \t- infoObject: can be materialInfo, normalInfo, UVInfo or colorInfo\n  // Index type:\n  //\t- Direct: index is same as polygonVertexIndex\n  //\t- IndexToDirect: infoObject has it's own set of indices\n  var dataArray = [];\n\n  var GetData = {\n\n    ByPolygonVertex: {\n\n      Direct: function ( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {\n\n        var from = ( polygonVertexIndex * infoObject.dataSize );\n        var to = ( polygonVertexIndex * infoObject.dataSize ) + infoObject.dataSize;\n\n        return slice( dataArray, infoObject.buffer, from, to );\n\n      },\n\n      IndexToDirect: function ( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {\n\n        var index = infoObject.indices[ polygonVertexIndex ];\n        var from = ( index * infoObject.dataSize );\n        var to = ( index * infoObject.dataSize ) + infoObject.dataSize;\n\n        return slice( dataArray, infoObject.buffer, from, to );\n\n      }\n\n    },\n\n    ByPolygon: {\n\n      Direct: function ( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {\n\n        var from = polygonIndex * infoObject.dataSize;\n        var to = polygonIndex * infoObject.dataSize + infoObject.dataSize;\n\n        return slice( dataArray, infoObject.buffer, from, to );\n\n      },\n\n      IndexToDirect: function ( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {\n\n        var index = infoObject.indices[ polygonIndex ];\n        var from = index * infoObject.dataSize;\n        var to = index * infoObject.dataSize + infoObject.dataSize;\n\n        return slice( dataArray, infoObject.buffer, from, to );\n\n      }\n\n    },\n\n    ByVertice: {\n\n      Direct: function ( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {\n\n        var from = ( vertexIndex * infoObject.dataSize );\n        var to = ( vertexIndex * infoObject.dataSize ) + infoObject.dataSize;\n\n        return slice( dataArray, infoObject.buffer, from, to );\n\n      }\n\n    },\n\n    AllSame: {\n\n      IndexToDirect: function ( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {\n\n        var from = infoObject.indices[ 0 ] * infoObject.dataSize;\n        var to = infoObject.indices[ 0 ] * infoObject.dataSize + infoObject.dataSize;\n\n        return slice( dataArray, infoObject.buffer, from, to );\n\n      }\n\n    }\n\n  };\n\n  function getData( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {\n\n    return GetData[ infoObject.mappingType ][ infoObject.referenceType ]( polygonVertexIndex, polygonIndex, vertexIndex, infoObject );\n\n  }\n\n  // Generate a NurbGeometry from a node in FBXTree.Objects.Geometry\n  function parseNurbsGeometry( geometryNode ) {\n\n    if ( THREE.NURBSCurve === undefined ) {\n\n      console.error( 'THREE.FBXLoader: The loader relies on THREE.NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry.' );\n      return new THREE.BufferGeometry();\n\n    }\n\n    var order = parseInt( geometryNode.Order );\n\n    if ( isNaN( order ) ) {\n\n      console.error( 'THREE.FBXLoader: Invalid Order %s given for geometry ID: %s', geometryNode.Order, geometryNode.id );\n      return new THREE.BufferGeometry();\n\n    }\n\n    var degree = order - 1;\n\n    var knots = geometryNode.KnotVector.a;\n    var controlPoints = [];\n    var pointsValues = geometryNode.Points.a;\n\n    for ( var i = 0, l = pointsValues.length; i < l; i += 4 ) {\n\n      controlPoints.push( new THREE.Vector4().fromArray( pointsValues, i ) );\n\n    }\n\n    var startKnot, endKnot;\n\n    if ( geometryNode.Form === 'Closed' ) {\n\n      controlPoints.push( controlPoints[ 0 ] );\n\n    } else if ( geometryNode.Form === 'Periodic' ) {\n\n      startKnot = degree;\n      endKnot = knots.length - 1 - startKnot;\n\n      for ( var i = 0; i < degree; ++ i ) {\n\n        controlPoints.push( controlPoints[ i ] );\n\n      }\n\n    }\n\n    var curve = new THREE.NURBSCurve( degree, knots, controlPoints, startKnot, endKnot );\n    var vertices = curve.getPoints( controlPoints.length * 7 );\n\n    var positions = new Float32Array( vertices.length * 3 );\n\n    vertices.forEach( function ( vertex, i ) {\n\n      vertex.toArray( positions, i * 3 );\n\n    } );\n\n    var geometry = new THREE.BufferGeometry();\n    geometry.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\n\n    return geometry;\n\n  }\n\n  // create the main THREE.Group() to be returned by the loader\n  function parseScene( FBXTree, connections, skeletons, geometryMap, materialMap ) {\n\n    var sceneGraph = new THREE.Group();\n\n    var modelMap = parseModels( FBXTree, skeletons, geometryMap, materialMap, connections );\n\n    var modelNodes = FBXTree.Objects.Model;\n\n    modelMap.forEach( function ( model ) {\n\n      var modelNode = modelNodes[ model.ID ];\n      setLookAtProperties( FBXTree, model, modelNode, connections, sceneGraph );\n\n      var parentConnections = connections.get( model.ID ).parents;\n\n      parentConnections.forEach( function ( connection ) {\n\n        var parent = modelMap.get( connection.ID );\n        if ( parent !== undefined ) parent.add( model );\n\n      } );\n\n      if ( model.parent === null ) {\n\n        sceneGraph.add( model );\n\n      }\n\n\n    } );\n\n    bindSkeleton( FBXTree, skeletons, geometryMap, modelMap, connections );\n\n    addAnimations( FBXTree, connections, sceneGraph );\n\n    createAmbientLight( FBXTree, sceneGraph );\n\n    return sceneGraph;\n\n  }\n\n  // parse nodes in FBXTree.Objects.Model\n  function parseModels( FBXTree, skeletons, geometryMap, materialMap, connections ) {\n\n    var modelMap = new Map();\n    var modelNodes = FBXTree.Objects.Model;\n\n    for ( var nodeID in modelNodes ) {\n\n      var id = parseInt( nodeID );\n      var node = modelNodes[ nodeID ];\n      var relationships = connections.get( id );\n\n      var model = buildSkeleton( relationships, skeletons, id, node.attrName );\n\n      if ( ! model ) {\n\n        switch ( node.attrType ) {\n\n          case 'Camera':\n            model = createCamera( FBXTree, relationships );\n            break;\n          case 'Light':\n            model = createLight( FBXTree, relationships );\n            break;\n          case 'Mesh':\n            model = createMesh( FBXTree, relationships, geometryMap, materialMap );\n            break;\n          case 'NurbsCurve':\n            model = createCurve( relationships, geometryMap );\n            break;\n          case 'LimbNode': // usually associated with a Bone, however if a Bone was not created we'll make a Group instead\n          case 'Null':\n          default:\n            model = new THREE.Group();\n            break;\n\n        }\n\n        model.name = THREE.PropertyBinding.sanitizeNodeName( node.attrName );\n        model.ID = id;\n\n      }\n\n      setModelTransforms( FBXTree, model, node );\n      modelMap.set( id, model );\n\n    }\n\n    return modelMap;\n\n  }\n\n  function buildSkeleton( relationships, skeletons, id, name ) {\n\n    var bone = null;\n\n    relationships.parents.forEach( function ( parent ) {\n\n      for ( var ID in skeletons ) {\n\n        var skeleton = skeletons[ ID ];\n\n        skeleton.rawBones.forEach( function ( rawBone, i ) {\n\n          if ( rawBone.ID === parent.ID ) {\n\n            var subBone = bone;\n            bone = new THREE.Bone();\n            bone.matrixWorld.copy( rawBone.transformLink );\n\n            // set name and id here - otherwise in cases where \"subBone\" is created it will not have a name / id\n            bone.name = THREE.PropertyBinding.sanitizeNodeName( name );\n            bone.ID = id;\n\n            skeleton.bones[ i ] = bone;\n\n            // In cases where a bone is shared between multiple meshes\n            // duplicate the bone here and and it as a child of the first bone\n            if ( subBone !== null ) {\n\n              bone.add( subBone );\n\n            }\n\n          }\n\n        } );\n\n      }\n\n    } );\n\n    return bone;\n\n  }\n\n  // create a THREE.PerspectiveCamera or THREE.OrthographicCamera\n  function createCamera( FBXTree, relationships ) {\n\n    var model;\n    var cameraAttribute;\n\n    relationships.children.forEach( function ( child ) {\n\n      var attr = FBXTree.Objects.NodeAttribute[ child.ID ];\n\n      if ( attr !== undefined ) {\n\n        cameraAttribute = attr;\n\n      }\n\n    } );\n\n    if ( cameraAttribute === undefined ) {\n\n      model = new THREE.Object3D();\n\n    } else {\n\n      var type = 0;\n      if ( cameraAttribute.CameraProjectionType !== undefined && cameraAttribute.CameraProjectionType.value === 1 ) {\n\n        type = 1;\n\n      }\n\n      var nearClippingPlane = 1;\n      if ( cameraAttribute.NearPlane !== undefined ) {\n\n        nearClippingPlane = cameraAttribute.NearPlane.value / 1000;\n\n      }\n\n      var farClippingPlane = 1000;\n      if ( cameraAttribute.FarPlane !== undefined ) {\n\n        farClippingPlane = cameraAttribute.FarPlane.value / 1000;\n\n      }\n\n\n      var width = window.innerWidth;\n      var height = window.innerHeight;\n\n      if ( cameraAttribute.AspectWidth !== undefined && cameraAttribute.AspectHeight !== undefined ) {\n\n        width = cameraAttribute.AspectWidth.value;\n        height = cameraAttribute.AspectHeight.value;\n\n      }\n\n      var aspect = width / height;\n\n      var fov = 45;\n      if ( cameraAttribute.FieldOfView !== undefined ) {\n\n        fov = cameraAttribute.FieldOfView.value;\n\n      }\n\n      var focalLength = cameraAttribute.FocalLength ? cameraAttribute.FocalLength.value : null;\n\n      switch ( type ) {\n\n        case 0: // Perspective\n          model = new THREE.PerspectiveCamera( fov, aspect, nearClippingPlane, farClippingPlane );\n          if ( focalLength !== null ) model.setFocalLength( focalLength );\n          break;\n\n        case 1: // Orthographic\n          model = new THREE.OrthographicCamera( - width / 2, width / 2, height / 2, - height / 2, nearClippingPlane, farClippingPlane );\n          break;\n\n        default:\n          console.warn( 'THREE.FBXLoader: Unknown camera type ' + type + '.' );\n          model = new THREE.Object3D();\n          break;\n\n      }\n\n    }\n\n    return model;\n\n  }\n\n  // Create a THREE.DirectionalLight, THREE.PointLight or THREE.SpotLight\n  function createLight( FBXTree, relationships ) {\n\n    var model;\n    var lightAttribute;\n\n    relationships.children.forEach( function ( child ) {\n\n      var attr = FBXTree.Objects.NodeAttribute[ child.ID ];\n\n      if ( attr !== undefined ) {\n\n        lightAttribute = attr;\n\n      }\n\n    } );\n\n    if ( lightAttribute === undefined ) {\n\n      model = new THREE.Object3D();\n\n    } else {\n\n      var type;\n\n      // LightType can be undefined for Point lights\n      if ( lightAttribute.LightType === undefined ) {\n\n        type = 0;\n\n      } else {\n\n        type = lightAttribute.LightType.value;\n\n      }\n\n      var color = 0xffffff;\n\n      if ( lightAttribute.Color !== undefined ) {\n\n        color = new THREE.Color().fromArray( lightAttribute.Color.value );\n\n      }\n\n      var intensity = ( lightAttribute.Intensity === undefined ) ? 1 : lightAttribute.Intensity.value / 100;\n\n      // light disabled\n      if ( lightAttribute.CastLightOnObject !== undefined && lightAttribute.CastLightOnObject.value === 0 ) {\n\n        intensity = 0;\n\n      }\n\n      var distance = 0;\n      if ( lightAttribute.FarAttenuationEnd !== undefined ) {\n\n        if ( lightAttribute.EnableFarAttenuation !== undefined && lightAttribute.EnableFarAttenuation.value === 0 ) {\n\n          distance = 0;\n\n        } else {\n\n          distance = lightAttribute.FarAttenuationEnd.value / 1000;\n\n        }\n\n      }\n\n      // TODO: could this be calculated linearly from FarAttenuationStart to FarAttenuationEnd?\n      var decay = 1;\n\n      switch ( type ) {\n\n        case 0: // Point\n          model = new THREE.PointLight( color, intensity, distance, decay );\n          break;\n\n        case 1: // Directional\n          model = new THREE.DirectionalLight( color, intensity );\n          break;\n\n        case 2: // Spot\n          var angle = Math.PI / 3;\n\n          if ( lightAttribute.InnerAngle !== undefined ) {\n\n            angle = THREE.Math.degToRad( lightAttribute.InnerAngle.value );\n\n          }\n\n          var penumbra = 0;\n          if ( lightAttribute.OuterAngle !== undefined ) {\n\n            // TODO: this is not correct - FBX calculates outer and inner angle in degrees\n            // with OuterAngle > InnerAngle && OuterAngle <= Math.PI\n            // while three.js uses a penumbra between (0, 1) to attenuate the inner angle\n            penumbra = THREE.Math.degToRad( lightAttribute.OuterAngle.value );\n            penumbra = Math.max( penumbra, 1 );\n\n          }\n\n          model = new THREE.SpotLight( color, intensity, distance, angle, penumbra, decay );\n          break;\n\n        default:\n          console.warn( 'THREE.FBXLoader: Unknown light type ' + lightAttribute.LightType.value + ', defaulting to a THREE.PointLight.' );\n          model = new THREE.PointLight( color, intensity );\n          break;\n\n      }\n\n      if ( lightAttribute.CastShadows !== undefined && lightAttribute.CastShadows.value === 1 ) {\n\n        model.castShadow = true;\n\n      }\n\n    }\n\n    return model;\n\n  }\n\n  function createMesh( FBXTree, relationships, geometryMap, materialMap ) {\n\n    var model;\n    var geometry = null;\n    var material = null;\n    var materials = [];\n\n    // get geometry and materials(s) from connections\n    relationships.children.forEach( function ( child ) {\n\n      if ( geometryMap.has( child.ID ) ) {\n\n        geometry = geometryMap.get( child.ID );\n\n      }\n\n      if ( materialMap.has( child.ID ) ) {\n\n        materials.push( materialMap.get( child.ID ) );\n\n      }\n\n    } );\n\n    if ( materials.length > 1 ) {\n\n      material = materials;\n\n    } else if ( materials.length > 0 ) {\n\n      material = materials[ 0 ];\n\n    } else {\n\n      material = new THREE.MeshPhongMaterial( { color: 0xcccccc } );\n      materials.push( material );\n\n    }\n\n    if ( 'color' in geometry.attributes ) {\n\n      materials.forEach( function ( material ) {\n\n        material.vertexColors = THREE.VertexColors;\n\n      } );\n\n    }\n\n    if ( geometry.FBX_Deformer ) {\n\n      materials.forEach( function ( material ) {\n\n        material.skinning = true;\n\n      } );\n\n      model = new THREE.SkinnedMesh( geometry, material );\n\n    } else {\n\n      model = new THREE.Mesh( geometry, material );\n\n    }\n\n    return model;\n\n  }\n\n  function createCurve( relationships, geometryMap ) {\n\n    var geometry = relationships.children.reduce( function ( geo, child ) {\n\n      if ( geometryMap.has( child.ID ) ) geo = geometryMap.get( child.ID );\n\n      return geo;\n\n    }, null );\n\n    // FBX does not list materials for Nurbs lines, so we'll just put our own in here.\n    var material = new THREE.LineBasicMaterial( { color: 0x3300ff, linewidth: 1 } );\n    return new THREE.Line( geometry, material );\n\n  }\n\n  // Parse ambient color in FBXTree.GlobalSettings - if it's not set to black (default), create an ambient light\n  function createAmbientLight( FBXTree, sceneGraph ) {\n\n    if ( 'GlobalSettings' in FBXTree && 'AmbientColor' in FBXTree.GlobalSettings ) {\n\n      var ambientColor = FBXTree.GlobalSettings.AmbientColor.value;\n      var r = ambientColor[ 0 ];\n      var g = ambientColor[ 1 ];\n      var b = ambientColor[ 2 ];\n\n      if ( r !== 0 || g !== 0 || b !== 0 ) {\n\n        var color = new THREE.Color( r, g, b );\n        sceneGraph.add( new THREE.AmbientLight( color, 1 ) );\n\n      }\n\n    }\n\n  }\n\n  function setLookAtProperties( FBXTree, model, modelNode, connections, sceneGraph ) {\n\n    if ( 'LookAtProperty' in modelNode ) {\n\n      var children = connections.get( model.ID ).children;\n\n      children.forEach( function ( child ) {\n\n        if ( child.relationship === 'LookAtProperty' ) {\n\n          var lookAtTarget = FBXTree.Objects.Model[ child.ID ];\n\n          if ( 'Lcl_Translation' in lookAtTarget ) {\n\n            var pos = lookAtTarget.Lcl_Translation.value;\n\n            // DirectionalLight, SpotLight\n            if ( model.target !== undefined ) {\n\n              model.target.position.fromArray( pos );\n              sceneGraph.add( model.target );\n\n            } else { // Cameras and other Object3Ds\n\n              model.lookAt( new THREE.Vector3().fromArray( pos ) );\n\n            }\n\n          }\n\n        }\n\n      } );\n\n    }\n\n  }\n\n  // parse the model node for transform details and apply them to the model\n  function setModelTransforms( FBXTree, model, modelNode ) {\n\n    // http://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_class_fbx_euler_html\n    if ( 'RotationOrder' in modelNode ) {\n\n      var enums = [\n        'XYZ', // default\n        'XZY',\n        'YZX',\n        'ZXY',\n        'YXZ',\n        'ZYX',\n        'SphericXYZ',\n      ];\n\n      var value = parseInt( modelNode.RotationOrder.value, 10 );\n\n      if ( value > 0 && value < 6 ) {\n\n        // model.rotation.order = enums[ value ];\n\n        // Note: Euler order other than XYZ is currently not supported, so just display a warning for now\n        console.warn( 'THREE.FBXLoader: unsupported Euler Order: %s. Currently only XYZ order is supported. Animations and rotations may be incorrect.', enums[ value ] );\n\n      } else if ( value === 6 ) {\n\n        console.warn( 'THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect.' );\n\n      }\n\n    }\n\n    if ( 'Lcl_Translation' in modelNode ) {\n\n      model.position.fromArray( modelNode.Lcl_Translation.value );\n\n    }\n\n    if ( 'Lcl_Rotation' in modelNode ) {\n\n      var rotation = modelNode.Lcl_Rotation.value.map( THREE.Math.degToRad );\n      rotation.push( 'ZYX' );\n      model.rotation.fromArray( rotation );\n\n    }\n\n    if ( 'Lcl_Scaling' in modelNode ) {\n\n      model.scale.fromArray( modelNode.Lcl_Scaling.value );\n\n    }\n\n    if ( 'PreRotation' in modelNode ) {\n\n      var array = modelNode.PreRotation.value.map( THREE.Math.degToRad );\n      array[ 3 ] = 'ZYX';\n\n      var preRotations = new THREE.Euler().fromArray( array );\n\n      preRotations = new THREE.Quaternion().setFromEuler( preRotations );\n      var currentRotation = new THREE.Quaternion().setFromEuler( model.rotation );\n      preRotations.multiply( currentRotation );\n      model.rotation.setFromQuaternion( preRotations, 'ZYX' );\n\n    }\n\n  }\n\n  function bindSkeleton( FBXTree, skeletons, geometryMap, modelMap, connections ) {\n\n    var bindMatrices = parsePoseNodes( FBXTree );\n\n    for ( var ID in skeletons ) {\n\n      var skeleton = skeletons[ ID ];\n\n      var parents = connections.get( parseInt( skeleton.ID ) ).parents;\n\n      parents.forEach( function ( parent ) {\n\n        if ( geometryMap.has( parent.ID ) ) {\n\n          var geoID = parent.ID;\n          var geoRelationships = connections.get( geoID );\n\n          geoRelationships.parents.forEach( function ( geoConnParent ) {\n\n            if ( modelMap.has( geoConnParent.ID ) ) {\n\n              var model = modelMap.get( geoConnParent.ID );\n\n              model.bind( new THREE.Skeleton( skeleton.bones ), bindMatrices[ geoConnParent.ID ] );\n\n            }\n\n          } );\n\n        }\n\n      } );\n\n    }\n\n  }\n\n  function parsePoseNodes( FBXTree ) {\n\n    var bindMatrices = {};\n\n    if ( 'Pose' in FBXTree.Objects ) {\n\n      var BindPoseNode = FBXTree.Objects.Pose;\n\n      for ( var nodeID in BindPoseNode ) {\n\n        if ( BindPoseNode[ nodeID ].attrType === 'BindPose' ) {\n\n          var poseNodes = BindPoseNode[ nodeID ].PoseNode;\n\n          if ( Array.isArray( poseNodes ) ) {\n\n            poseNodes.forEach( function ( poseNode ) {\n\n              bindMatrices[ poseNode.Node ] = new THREE.Matrix4().fromArray( poseNode.Matrix.a );\n\n            } );\n\n          } else {\n\n            bindMatrices[ poseNodes.Node ] = new THREE.Matrix4().fromArray( poseNodes.Matrix.a );\n\n          }\n\n        }\n\n      }\n\n    }\n\n    return bindMatrices;\n\n  }\n\n  function parseAnimations( FBXTree, connections ) {\n\n    // since the actual transformation data is stored in FBXTree.Objects.AnimationCurve,\n    // if this is undefined we can safely assume there are no animations\n    if ( FBXTree.Objects.AnimationCurve === undefined ) return undefined;\n\n    var curveNodesMap = parseAnimationCurveNodes( FBXTree );\n\n    parseAnimationCurves( FBXTree, connections, curveNodesMap );\n\n    var layersMap = parseAnimationLayers( FBXTree, connections, curveNodesMap );\n    var rawClips = parseAnimStacks( FBXTree, connections, layersMap );\n\n    return rawClips;\n\n  }\n\n  // parse nodes in FBXTree.Objects.AnimationCurveNode\n  // each AnimationCurveNode holds data for an animation transform for a model (e.g. left arm rotation )\n  // and is referenced by an AnimationLayer\n  function parseAnimationCurveNodes( FBXTree ) {\n\n    var rawCurveNodes = FBXTree.Objects.AnimationCurveNode;\n\n    var curveNodesMap = new Map();\n\n    for ( var nodeID in rawCurveNodes ) {\n\n      var rawCurveNode = rawCurveNodes[ nodeID ];\n\n      if ( rawCurveNode.attrName.match( /S|R|T/ ) !== null ) {\n\n        var curveNode = {\n\n          id: rawCurveNode.id,\n          attr: rawCurveNode.attrName,\n          curves: {},\n\n        };\n\n        curveNodesMap.set( curveNode.id, curveNode );\n\n      }\n\n    }\n\n    return curveNodesMap;\n\n  }\n\n  // parse nodes in FBXTree.Objects.AnimationCurve and connect them up to\n  // previously parsed AnimationCurveNodes. Each AnimationCurve holds data for a single animated\n  // axis ( e.g. times and values of x rotation)\n  function parseAnimationCurves( FBXTree, connections, curveNodesMap ) {\n\n    var rawCurves = FBXTree.Objects.AnimationCurve;\n\n    for ( var nodeID in rawCurves ) {\n\n      var animationCurve = {\n\n        id: rawCurves[ nodeID ].id,\n        times: rawCurves[ nodeID ].KeyTime.a.map( convertFBXTimeToSeconds ),\n        values: rawCurves[ nodeID ].KeyValueFloat.a,\n\n      };\n\n      var relationships = connections.get( animationCurve.id );\n\n      if ( relationships !== undefined ) {\n\n        var animationCurveID = relationships.parents[ 0 ].ID;\n        var animationCurveRelationship = relationships.parents[ 0 ].relationship;\n        var axis = '';\n\n        if ( animationCurveRelationship.match( /X/ ) ) {\n\n          axis = 'x';\n\n        } else if ( animationCurveRelationship.match( /Y/ ) ) {\n\n          axis = 'y';\n\n        } else if ( animationCurveRelationship.match( /Z/ ) ) {\n\n          axis = 'z';\n\n        } else {\n\n          continue;\n\n        }\n\n        curveNodesMap.get( animationCurveID ).curves[ axis ] = animationCurve;\n\n      }\n\n    }\n\n  }\n\n  // parse nodes in FBXTree.Objects.AnimationLayer. Each layers holds references\n  // to various AnimationCurveNodes and is referenced by an AnimationStack node\n  // note: theoretically a stack can multiple layers, however in practice there always seems to be one per stack\n  function parseAnimationLayers( FBXTree, connections, curveNodesMap ) {\n\n    var rawLayers = FBXTree.Objects.AnimationLayer;\n\n    var layersMap = new Map();\n\n    for ( var nodeID in rawLayers ) {\n\n      var layerCurveNodes = [];\n\n      var connection = connections.get( parseInt( nodeID ) );\n\n      if ( connection !== undefined ) {\n\n        // all the animationCurveNodes used in the layer\n        var children = connection.children;\n\n        children.forEach( function ( child, i ) {\n\n          if ( curveNodesMap.has( child.ID ) ) {\n\n            var curveNode = curveNodesMap.get( child.ID );\n\n            // check that the curves are defined for at least one axis, otherwise ignore the curveNode\n            if ( curveNode.curves.x !== undefined || curveNode.curves.y !== undefined || curveNode.curves.z !== undefined ) {\n\n              if ( layerCurveNodes[ i ] === undefined ) {\n\n                var modelID;\n\n                connections.get( child.ID ).parents.forEach( function ( parent ) {\n\n                  if ( parent.relationship !== undefined ) modelID = parent.ID;\n\n                } );\n\n                var rawModel = FBXTree.Objects.Model[ modelID.toString() ];\n\n                var node = {\n\n                  modelName: THREE.PropertyBinding.sanitizeNodeName( rawModel.attrName ),\n                  initialPosition: [ 0, 0, 0 ],\n                  initialRotation: [ 0, 0, 0 ],\n                  initialScale: [ 1, 1, 1 ],\n\n                };\n\n                if ( 'Lcl_Translation' in rawModel ) node.initialPosition = rawModel.Lcl_Translation.value;\n\n                if ( 'Lcl_Rotation' in rawModel ) node.initialRotation = rawModel.Lcl_Rotation.value;\n\n                if ( 'Lcl_Scaling' in rawModel ) node.initialScale = rawModel.Lcl_Scaling.value;\n\n                // if the animated model is pre rotated, we'll have to apply the pre rotations to every\n                // animation value as well\n                if ( 'PreRotation' in rawModel ) node.preRotations = rawModel.PreRotation.value;\n\n                layerCurveNodes[ i ] = node;\n\n              }\n\n              layerCurveNodes[ i ][ curveNode.attr ] = curveNode;\n\n            }\n\n\n\n          }\n\n        } );\n\n        layersMap.set( parseInt( nodeID ), layerCurveNodes );\n\n      }\n\n    }\n\n    return layersMap;\n\n  }\n\n  // parse nodes in FBXTree.Objects.AnimationStack. These are the top level node in the animation\n  // hierarchy. Each Stack node will be used to create a THREE.AnimationClip\n  function parseAnimStacks( FBXTree, connections, layersMap ) {\n\n    var rawStacks = FBXTree.Objects.AnimationStack;\n\n    // connect the stacks (clips) up to the layers\n    var rawClips = {};\n\n    for ( var nodeID in rawStacks ) {\n\n      var children = connections.get( parseInt( nodeID ) ).children;\n\n      if ( children.length > 1 ) {\n\n        // it seems like stacks will always be associated with a single layer. But just in case there are files\n        // where there are multiple layers per stack, we'll display a warning\n        console.warn( 'THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.' );\n\n      }\n\n      var layer = layersMap.get( children[ 0 ].ID );\n\n      rawClips[ nodeID ] = {\n\n        name: rawStacks[ nodeID ].attrName,\n        layer: layer,\n\n      };\n\n    }\n\n    return rawClips;\n\n  }\n\n  // take raw animation data from parseAnimations and connect it up to the loaded models\n  function addAnimations( FBXTree, connections, sceneGraph ) {\n\n    sceneGraph.animations = [];\n\n    var rawClips = parseAnimations( FBXTree, connections );\n\n    if ( rawClips === undefined ) return;\n\n\n    for ( var key in rawClips ) {\n\n      var rawClip = rawClips[ key ];\n\n      var clip = addClip( rawClip );\n\n      sceneGraph.animations.push( clip );\n\n    }\n\n  }\n\n  function addClip( rawClip ) {\n\n    var tracks = [];\n\n    rawClip.layer.forEach( function ( rawTracks ) {\n\n      tracks = tracks.concat( generateTracks( rawTracks ) );\n\n    } );\n\n    return new THREE.AnimationClip( rawClip.name, - 1, tracks );\n\n  }\n\n  function generateTracks( rawTracks ) {\n\n    var tracks = [];\n\n    if ( rawTracks.T !== undefined && Object.keys( rawTracks.T.curves ).length > 0 ) {\n\n      var positionTrack = generateVectorTrack( rawTracks.modelName, rawTracks.T.curves, rawTracks.initialPosition, 'position' );\n      if ( positionTrack !== undefined ) tracks.push( positionTrack );\n\n    }\n\n    if ( rawTracks.R !== undefined && Object.keys( rawTracks.R.curves ).length > 0 ) {\n\n      var rotationTrack = generateRotationTrack( rawTracks.modelName, rawTracks.R.curves, rawTracks.initialRotation, rawTracks.preRotations );\n      if ( rotationTrack !== undefined ) tracks.push( rotationTrack );\n\n    }\n\n    if ( rawTracks.S !== undefined && Object.keys( rawTracks.S.curves ).length > 0 ) {\n\n      var scaleTrack = generateVectorTrack( rawTracks.modelName, rawTracks.S.curves, rawTracks.initialScale, 'scale' );\n      if ( scaleTrack !== undefined ) tracks.push( scaleTrack );\n\n    }\n\n    return tracks;\n\n  }\n\n  function generateVectorTrack( modelName, curves, initialValue, type ) {\n\n    var times = getTimesForAllAxes( curves );\n    var values = getKeyframeTrackValues( times, curves, initialValue );\n\n    return new THREE.VectorKeyframeTrack( modelName + '.' + type, times, values );\n\n  }\n\n  function generateRotationTrack( modelName, curves, initialValue, preRotations ) {\n\n    if ( curves.x !== undefined ) curves.x.values = curves.x.values.map( THREE.Math.degToRad );\n    if ( curves.y !== undefined ) curves.y.values = curves.y.values.map( THREE.Math.degToRad );\n    if ( curves.z !== undefined ) curves.z.values = curves.z.values.map( THREE.Math.degToRad );\n\n    var times = getTimesForAllAxes( curves );\n    var values = getKeyframeTrackValues( times, curves, initialValue );\n\n    if ( preRotations !== undefined ) {\n\n      preRotations = preRotations.map( THREE.Math.degToRad );\n      preRotations.push( 'ZYX' );\n\n      preRotations = new THREE.Euler().fromArray( preRotations );\n      preRotations = new THREE.Quaternion().setFromEuler( preRotations );\n\n    }\n\n    var quaternion = new THREE.Quaternion();\n    var euler = new THREE.Euler();\n\n    var quaternionValues = [];\n\n    for ( var i = 0; i < values.length; i += 3 ) {\n\n      euler.set( values[ i ], values[ i + 1 ], values[ i + 2 ], 'ZYX' );\n\n      quaternion.setFromEuler( euler );\n\n      if ( preRotations !== undefined )quaternion.premultiply( preRotations );\n\n      quaternion.toArray( quaternionValues, ( i / 3 ) * 4 );\n\n    }\n\n    return new THREE.QuaternionKeyframeTrack( modelName + '.quaternion', times, quaternionValues );\n\n  }\n\n  function getKeyframeTrackValues( times, curves, initialValue ) {\n\n    var prevValue = initialValue;\n\n    var values = [];\n\n    var xIndex = - 1;\n    var yIndex = - 1;\n    var zIndex = - 1;\n\n    times.forEach( function ( time ) {\n\n      if ( curves.x ) xIndex = curves.x.times.indexOf( time );\n      if ( curves.y ) yIndex = curves.y.times.indexOf( time );\n      if ( curves.z ) zIndex = curves.z.times.indexOf( time );\n\n      // if there is an x value defined for this frame, use that\n      if ( xIndex !== - 1 ) {\n\n        var xValue = curves.x.values[ xIndex ];\n        values.push( xValue );\n        prevValue[ 0 ] = xValue;\n\n      } else {\n\n        // otherwise use the x value from the previous frame\n        values.push( prevValue[ 0 ] );\n\n      }\n\n      if ( yIndex !== - 1 ) {\n\n        var yValue = curves.y.values[ yIndex ];\n        values.push( yValue );\n        prevValue[ 1 ] = yValue;\n\n      } else {\n\n        values.push( prevValue[ 1 ] );\n\n      }\n\n      if ( zIndex !== - 1 ) {\n\n        var zValue = curves.z.values[ zIndex ];\n        values.push( zValue );\n        prevValue[ 2 ] = zValue;\n\n      } else {\n\n        values.push( prevValue[ 2 ] );\n\n      }\n\n    } );\n\n    return values;\n\n  }\n\n  // For all animated objects, times are defined separately for each axis\n  // Here we'll combine the times into one sorted array without duplicates\n  function getTimesForAllAxes( curves ) {\n\n    var times = [];\n\n    // first join together the times for each axis, if defined\n    if ( curves.x !== undefined ) times = times.concat( curves.x.times );\n    if ( curves.y !== undefined ) times = times.concat( curves.y.times );\n    if ( curves.z !== undefined ) times = times.concat( curves.z.times );\n\n    // then sort them and remove duplicates\n    times = times.sort( function ( a, b ) {\n\n      return a - b;\n\n    } ).filter( function ( elem, index, array ) {\n\n      return array.indexOf( elem ) == index;\n\n    } );\n\n    return times;\n\n  }\n\n  // parse an FBX file in ASCII format\n  function TextParser() {}\n\n  Object.assign( TextParser.prototype, {\n\n    getPrevNode: function () {\n\n      return this.nodeStack[ this.currentIndent - 2 ];\n\n    },\n\n    getCurrentNode: function () {\n\n      return this.nodeStack[ this.currentIndent - 1 ];\n\n    },\n\n    getCurrentProp: function () {\n\n      return this.currentProp;\n\n    },\n\n    pushStack: function ( node ) {\n\n      this.nodeStack.push( node );\n      this.currentIndent += 1;\n\n    },\n\n    popStack: function () {\n\n      this.nodeStack.pop();\n      this.currentIndent -= 1;\n\n    },\n\n    setCurrentProp: function ( val, name ) {\n\n      this.currentProp = val;\n      this.currentPropName = name;\n\n    },\n\n    parse: function ( text ) {\n\n      this.currentIndent = 0;\n      this.allNodes = new FBXTree();\n      this.nodeStack = [];\n      this.currentProp = [];\n      this.currentPropName = '';\n\n      var self = this;\n\n      var split = text.split( '\\n' );\n\n      split.forEach( function ( line, i ) {\n\n        var matchComment = line.match( /^[\\s\\t]*;/ );\n        var matchEmpty = line.match( /^[\\s\\t]*$/ );\n\n        if ( matchComment || matchEmpty ) return;\n\n        var matchBeginning = line.match( '^\\\\t{' + self.currentIndent + '}(\\\\w+):(.*){', '' );\n        var matchProperty = line.match( '^\\\\t{' + ( self.currentIndent ) + '}(\\\\w+):[\\\\s\\\\t\\\\r\\\\n](.*)' );\n        var matchEnd = line.match( '^\\\\t{' + ( self.currentIndent - 1 ) + '}}' );\n\n        if ( matchBeginning ) {\n\n          self.parseNodeBegin( line, matchBeginning );\n\n        } else if ( matchProperty ) {\n\n          self.parseNodeProperty( line, matchProperty, split[ ++ i ] );\n\n        } else if ( matchEnd ) {\n\n          self.popStack();\n\n        } else if ( line.match( /^[^\\s\\t}]/ ) ) {\n\n          // large arrays are split over multiple lines terminated with a ',' character\n          // if this is encountered the line needs to be joined to the previous line\n          self.parseNodePropertyContinued( line );\n\n        }\n\n      } );\n\n      return this.allNodes;\n\n    },\n\n    parseNodeBegin: function ( line, property ) {\n\n      var nodeName = property[ 1 ].trim().replace( /^\"/, '' ).replace( /\"$/, '' );\n\n      var nodeAttrs = property[ 2 ].split( ',' ).map( function ( attr ) {\n\n        return attr.trim().replace( /^\"/, '' ).replace( /\"$/, '' );\n\n      } );\n\n      var node = { name: nodeName };\n      var attrs = this.parseNodeAttr( nodeAttrs );\n\n      var currentNode = this.getCurrentNode();\n\n      // a top node\n      if ( this.currentIndent === 0 ) {\n\n        this.allNodes.add( nodeName, node );\n\n      } else { // a subnode\n\n        // if the subnode already exists, append it\n        if ( nodeName in currentNode ) {\n\n        // special case Pose needs PoseNodes as an array\n          if ( nodeName === 'PoseNode' ) {\n\n            currentNode.PoseNode.push( node );\n\n          } else if ( currentNode[ nodeName ].id !== undefined ) {\n\n            currentNode[ nodeName ] = {};\n            currentNode[ nodeName ][ currentNode[ nodeName ].id ] = currentNode[ nodeName ];\n\n          }\n\n          if ( attrs.id !== '' ) currentNode[ nodeName ][ attrs.id ] = node;\n\n        } else if ( typeof attrs.id === 'number' ) {\n\n          currentNode[ nodeName ] = {};\n          currentNode[ nodeName ][ attrs.id ] = node;\n\n        } else if ( nodeName !== 'Properties70' ) {\n\n          if ( nodeName === 'PoseNode' )\tcurrentNode[ nodeName ] = [ node ];\n          else currentNode[ nodeName ] = node;\n\n        }\n\n      }\n\n      if ( typeof attrs.id === 'number' ) node.id = attrs.id;\n      if ( attrs.name !== '' ) node.attrName = attrs.name;\n      if ( attrs.type !== '' ) node.attrType = attrs.type;\n\n      this.pushStack( node );\n\n    },\n\n    parseNodeAttr: function ( attrs ) {\n\n      var id = attrs[ 0 ];\n\n      if ( attrs[ 0 ] !== '' ) {\n\n        id = parseInt( attrs[ 0 ] );\n\n        if ( isNaN( id ) ) {\n\n          id = attrs[ 0 ];\n\n        }\n\n      }\n\n      var name = '', type = '';\n\n      if ( attrs.length > 1 ) {\n\n        name = attrs[ 1 ].replace( /^(\\w+)::/, '' );\n        type = attrs[ 2 ];\n\n      }\n\n      return { id: id, name: name, type: type };\n\n    },\n\n    parseNodeProperty: function ( line, property, contentLine ) {\n\n      var propName = property[ 1 ].replace( /^\"/, '' ).replace( /\"$/, '' ).trim();\n      var propValue = property[ 2 ].replace( /^\"/, '' ).replace( /\"$/, '' ).trim();\n\n      // for special case: base64 image data follows \"Content: ,\" line\n      //\tContent: ,\n      //\t \"/9j/4RDaRXhpZgAATU0A...\"\n      if ( propName === 'Content' && propValue === ',' ) {\n\n        propValue = contentLine.replace( /\"/g, '' ).replace( /,$/, '' ).trim();\n\n      }\n\n      var currentNode = this.getCurrentNode();\n      var parentName = currentNode.name;\n\n      if ( parentName === 'Properties70' ) {\n\n        this.parseNodeSpecialProperty( line, propName, propValue );\n        return;\n\n      }\n\n      // Connections\n      if ( propName === 'C' ) {\n\n        var connProps = propValue.split( ',' ).slice( 1 );\n        var from = parseInt( connProps[ 0 ] );\n        var to = parseInt( connProps[ 1 ] );\n\n        var rest = propValue.split( ',' ).slice( 3 );\n\n        rest = rest.map( function ( elem ) {\n\n          return elem.trim().replace( /^\"/, '' );\n\n        } );\n\n        propName = 'connections';\n        propValue = [ from, to ];\n        append( propValue, rest );\n\n        if ( currentNode[ propName ] === undefined ) {\n\n          currentNode[ propName ] = [];\n\n        }\n\n      }\n\n      // Node\n      if ( propName === 'Node' ) currentNode.id = propValue;\n\n      // connections\n      if ( propName in currentNode && Array.isArray( currentNode[ propName ] ) ) {\n\n        currentNode[ propName ].push( propValue );\n\n      } else {\n\n        if ( propName !== 'a' ) currentNode[ propName ] = propValue;\n        else currentNode.a = propValue;\n\n      }\n\n      this.setCurrentProp( currentNode, propName );\n\n      // convert string to array, unless it ends in ',' in which case more will be added to it\n      if ( propName === 'a' && propValue.slice( - 1 ) !== ',' ) {\n\n        currentNode.a = parseNumberArray( propValue );\n\n      }\n\n    },\n\n    parseNodePropertyContinued: function ( line ) {\n\n      var currentNode = this.getCurrentNode();\n\n      currentNode.a += line;\n\n      // if the line doesn't end in ',' we have reached the end of the property value\n      // so convert the string to an array\n      if ( line.slice( - 1 ) !== ',' ) {\n\n        currentNode.a = parseNumberArray( currentNode.a );\n\n      }\n\n    },\n\n    // parse \"Property70\"\n    parseNodeSpecialProperty: function ( line, propName, propValue ) {\n\n      // split this\n      // P: \"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\",1,1,1\n      // into array like below\n      // [\"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\", \"1,1,1\" ]\n      var props = propValue.split( '\",' ).map( function ( prop ) {\n\n        return prop.trim().replace( /^\\\"/, '' ).replace( /\\s/, '_' );\n\n      } );\n\n      var innerPropName = props[ 0 ];\n      var innerPropType1 = props[ 1 ];\n      var innerPropType2 = props[ 2 ];\n      var innerPropFlag = props[ 3 ];\n      var innerPropValue = props[ 4 ];\n\n      // cast values where needed, otherwise leave as strings\n      switch ( innerPropType1 ) {\n\n        case 'int':\n        case 'enum':\n        case 'bool':\n        case 'ULongLong':\n        case 'double':\n        case 'Number':\n        case 'FieldOfView':\n          innerPropValue = parseFloat( innerPropValue );\n          break;\n\n        case 'Color':\n        case 'ColorRGB':\n        case 'Vector3D':\n        case 'Lcl_Translation':\n        case 'Lcl_Rotation':\n        case 'Lcl_Scaling':\n          innerPropValue = parseNumberArray( innerPropValue );\n          break;\n\n      }\n\n      // CAUTION: these props must append to parent's parent\n      this.getPrevNode()[ innerPropName ] = {\n\n        'type': innerPropType1,\n        'type2': innerPropType2,\n        'flag': innerPropFlag,\n        'value': innerPropValue\n\n      };\n\n      this.setCurrentProp( this.getPrevNode(), innerPropName );\n\n    },\n\n  } );\n\n  // Parse an FBX file in Binary format\n  function BinaryParser() {}\n\n  Object.assign( BinaryParser.prototype, {\n\n    parse: function ( buffer ) {\n\n      var reader = new BinaryReader( buffer );\n      reader.skip( 23 ); // skip magic 23 bytes\n\n      var version = reader.getUint32();\n\n      console.log( 'THREE.FBXLoader: FBX binary version: ' + version );\n\n      var allNodes = new FBXTree();\n\n      while ( ! this.endOfContent( reader ) ) {\n\n        var node = this.parseNode( reader, version );\n        if ( node !== null ) allNodes.add( node.name, node );\n\n      }\n\n      return allNodes;\n\n    },\n\n    // Check if reader has reached the end of content.\n    endOfContent: function ( reader ) {\n\n      // footer size: 160bytes + 16-byte alignment padding\n      // - 16bytes: magic\n      // - padding til 16-byte alignment (at least 1byte?)\n      //\t(seems like some exporters embed fixed 15 or 16bytes?)\n      // - 4bytes: magic\n      // - 4bytes: version\n      // - 120bytes: zero\n      // - 16bytes: magic\n      if ( reader.size() % 16 === 0 ) {\n\n        return ( ( reader.getOffset() + 160 + 16 ) & ~ 0xf ) >= reader.size();\n\n      } else {\n\n        return reader.getOffset() + 160 + 16 >= reader.size();\n\n      }\n\n    },\n\n    // recursively parse nodes until the end of the file is reached\n    parseNode: function ( reader, version ) {\n\n      var node = {};\n\n      // The first three data sizes depends on version.\n      var endOffset = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\n      var numProperties = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\n\n      // note: do not remove this even if you get a linter warning as it moves the buffer forward\n      var propertyListLen = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\n\n      var nameLen = reader.getUint8();\n      var name = reader.getString( nameLen );\n\n      // Regards this node as NULL-record if endOffset is zero\n      if ( endOffset === 0 ) return null;\n\n      var propertyList = [];\n\n      for ( var i = 0; i < numProperties; i ++ ) {\n\n        propertyList.push( this.parseProperty( reader ) );\n\n      }\n\n      // Regards the first three elements in propertyList as id, attrName, and attrType\n      var id = propertyList.length > 0 ? propertyList[ 0 ] : '';\n      var attrName = propertyList.length > 1 ? propertyList[ 1 ] : '';\n      var attrType = propertyList.length > 2 ? propertyList[ 2 ] : '';\n\n      // check if this node represents just a single property\n      // like (name, 0) set or (name2, [0, 1, 2]) set of {name: 0, name2: [0, 1, 2]}\n      node.singleProperty = ( numProperties === 1 && reader.getOffset() === endOffset ) ? true : false;\n\n      while ( endOffset > reader.getOffset() ) {\n\n        var subNode = this.parseNode( reader, version );\n\n        if ( subNode !== null ) this.parseSubNode( name, node, subNode );\n\n      }\n\n      node.propertyList = propertyList; // raw property list used by parent\n\n      if ( typeof id === 'number' ) node.id = id;\n      if ( attrName !== '' ) node.attrName = attrName;\n      if ( attrType !== '' ) node.attrType = attrType;\n      if ( name !== '' ) node.name = name;\n\n      return node;\n\n    },\n\n    parseSubNode: function ( name, node, subNode ) {\n\n      // special case: child node is single property\n      if ( subNode.singleProperty === true ) {\n\n        var value = subNode.propertyList[ 0 ];\n\n        if ( Array.isArray( value ) ) {\n\n          node[ subNode.name ] = subNode;\n\n          subNode.a = value;\n\n        } else {\n\n          node[ subNode.name ] = value;\n\n        }\n\n      } else if ( name === 'Connections' && subNode.name === 'C' ) {\n\n        var array = [];\n\n        subNode.propertyList.forEach( function ( property, i ) {\n\n          // first Connection is FBX type (OO, OP, etc.). We'll discard these\n          if ( i !== 0 ) array.push( property );\n\n        } );\n\n        if ( node.connections === undefined ) {\n\n          node.connections = [];\n\n        }\n\n        node.connections.push( array );\n\n      } else if ( subNode.name === 'Properties70' ) {\n\n        var keys = Object.keys( subNode );\n\n        keys.forEach( function ( key ) {\n\n          node[ key ] = subNode[ key ];\n\n        } );\n\n      } else if ( name === 'Properties70' && subNode.name === 'P' ) {\n\n        var innerPropName = subNode.propertyList[ 0 ];\n        var innerPropType1 = subNode.propertyList[ 1 ];\n        var innerPropType2 = subNode.propertyList[ 2 ];\n        var innerPropFlag = subNode.propertyList[ 3 ];\n        var innerPropValue;\n\n        if ( innerPropName.indexOf( 'Lcl ' ) === 0 ) innerPropName = innerPropName.replace( 'Lcl ', 'Lcl_' );\n        if ( innerPropType1.indexOf( 'Lcl ' ) === 0 ) innerPropType1 = innerPropType1.replace( 'Lcl ', 'Lcl_' );\n\n        if ( innerPropType1 === 'Color' || innerPropType1 === 'ColorRGB' || innerPropType1 === 'Vector' || innerPropType1 === 'Vector3D' || innerPropType1.indexOf( 'Lcl_' ) === 0 ) {\n\n          innerPropValue = [\n            subNode.propertyList[ 4 ],\n            subNode.propertyList[ 5 ],\n            subNode.propertyList[ 6 ]\n          ];\n\n        } else {\n\n          innerPropValue = subNode.propertyList[ 4 ];\n\n        }\n\n        // this will be copied to parent, see above\n        node[ innerPropName ] = {\n\n          'type': innerPropType1,\n          'type2': innerPropType2,\n          'flag': innerPropFlag,\n          'value': innerPropValue\n\n        };\n\n      } else if ( node[ subNode.name ] === undefined ) {\n\n        if ( typeof subNode.id === 'number' ) {\n\n          node[ subNode.name ] = {};\n          node[ subNode.name ][ subNode.id ] = subNode;\n\n        } else {\n\n          node[ subNode.name ] = subNode;\n\n        }\n\n      } else {\n\n        if ( subNode.name === 'PoseNode' ) {\n\n          if ( ! Array.isArray( node[ subNode.name ] ) ) {\n\n            node[ subNode.name ] = [ node[ subNode.name ] ];\n\n          }\n\n          node[ subNode.name ].push( subNode );\n\n        } else if ( node[ subNode.name ][ subNode.id ] === undefined ) {\n\n          node[ subNode.name ][ subNode.id ] = subNode;\n\n        }\n\n      }\n\n    },\n\n    parseProperty: function ( reader ) {\n\n      var type = reader.getString( 1 );\n\n      switch ( type ) {\n\n        case 'C':\n          return reader.getBoolean();\n\n        case 'D':\n          return reader.getFloat64();\n\n        case 'F':\n          return reader.getFloat32();\n\n        case 'I':\n          return reader.getInt32();\n\n        case 'L':\n          return reader.getInt64();\n\n        case 'R':\n          var length = reader.getUint32();\n          return reader.getArrayBuffer( length );\n\n        case 'S':\n          var length = reader.getUint32();\n          return reader.getString( length );\n\n        case 'Y':\n          return reader.getInt16();\n\n        case 'b':\n        case 'c':\n        case 'd':\n        case 'f':\n        case 'i':\n        case 'l':\n\n          var arrayLength = reader.getUint32();\n          var encoding = reader.getUint32(); // 0: non-compressed, 1: compressed\n          var compressedLength = reader.getUint32();\n\n          if ( encoding === 0 ) {\n\n            switch ( type ) {\n\n              case 'b':\n              case 'c':\n                return reader.getBooleanArray( arrayLength );\n\n              case 'd':\n                return reader.getFloat64Array( arrayLength );\n\n              case 'f':\n                return reader.getFloat32Array( arrayLength );\n\n              case 'i':\n                return reader.getInt32Array( arrayLength );\n\n              case 'l':\n                return reader.getInt64Array( arrayLength );\n\n            }\n\n          }\n\n          if ( window.Zlib === undefined ) {\n\n            console.error( 'THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js' );\n\n          }\n\n          var inflate = new Zlib.Inflate( new Uint8Array( reader.getArrayBuffer( compressedLength ) ) ); // eslint-disable-line no-undef\n          var reader2 = new BinaryReader( inflate.decompress().buffer );\n\n          switch ( type ) {\n\n            case 'b':\n            case 'c':\n              return reader2.getBooleanArray( arrayLength );\n\n            case 'd':\n              return reader2.getFloat64Array( arrayLength );\n\n            case 'f':\n              return reader2.getFloat32Array( arrayLength );\n\n            case 'i':\n              return reader2.getInt32Array( arrayLength );\n\n            case 'l':\n              return reader2.getInt64Array( arrayLength );\n\n          }\n\n        default:\n          throw new Error( 'THREE.FBXLoader: Unknown property type ' + type );\n\n      }\n\n    }\n\n  } );\n\n\n  function BinaryReader( buffer, littleEndian ) {\n\n    this.dv = new DataView( buffer );\n    this.offset = 0;\n    this.littleEndian = ( littleEndian !== undefined ) ? littleEndian : true;\n\n  }\n\n  Object.assign( BinaryReader.prototype, {\n\n    getOffset: function () {\n\n      return this.offset;\n\n    },\n\n    size: function () {\n\n      return this.dv.buffer.byteLength;\n\n    },\n\n    skip: function ( length ) {\n\n      this.offset += length;\n\n    },\n\n    // seems like true/false representation depends on exporter.\n    // true: 1 or 'Y'(=0x59), false: 0 or 'T'(=0x54)\n    // then sees LSB.\n    getBoolean: function () {\n\n      return ( this.getUint8() & 1 ) === 1;\n\n    },\n\n    getBooleanArray: function ( size ) {\n\n      var a = [];\n\n      for ( var i = 0; i < size; i ++ ) {\n\n        a.push( this.getBoolean() );\n\n      }\n\n      return a;\n\n    },\n\n    getUint8: function () {\n\n      var value = this.dv.getUint8( this.offset );\n      this.offset += 1;\n      return value;\n\n    },\n\n    getInt16: function () {\n\n      var value = this.dv.getInt16( this.offset, this.littleEndian );\n      this.offset += 2;\n      return value;\n\n    },\n\n    getInt32: function () {\n\n      var value = this.dv.getInt32( this.offset, this.littleEndian );\n      this.offset += 4;\n      return value;\n\n    },\n\n    getInt32Array: function ( size ) {\n\n      var a = [];\n\n      for ( var i = 0; i < size; i ++ ) {\n\n        a.push( this.getInt32() );\n\n      }\n\n      return a;\n\n    },\n\n    getUint32: function () {\n\n      var value = this.dv.getUint32( this.offset, this.littleEndian );\n      this.offset += 4;\n      return value;\n\n    },\n\n    // JavaScript doesn't support 64-bit integer so calculate this here\n    // 1 << 32 will return 1 so using multiply operation instead here.\n    // There's a possibility that this method returns wrong value if the value\n    // is out of the range between Number.MAX_SAFE_INTEGER and Number.MIN_SAFE_INTEGER.\n    // TODO: safely handle 64-bit integer\n    getInt64: function () {\n\n      var low, high;\n\n      if ( this.littleEndian ) {\n\n        low = this.getUint32();\n        high = this.getUint32();\n\n      } else {\n\n        high = this.getUint32();\n        low = this.getUint32();\n\n      }\n\n      // calculate negative value\n      if ( high & 0x80000000 ) {\n\n        high = ~ high & 0xFFFFFFFF;\n        low = ~ low & 0xFFFFFFFF;\n\n        if ( low === 0xFFFFFFFF ) high = ( high + 1 ) & 0xFFFFFFFF;\n\n        low = ( low + 1 ) & 0xFFFFFFFF;\n\n        return - ( high * 0x100000000 + low );\n\n      }\n\n      return high * 0x100000000 + low;\n\n    },\n\n    getInt64Array: function ( size ) {\n\n      var a = [];\n\n      for ( var i = 0; i < size; i ++ ) {\n\n        a.push( this.getInt64() );\n\n      }\n\n      return a;\n\n    },\n\n    // Note: see getInt64() comment\n    getUint64: function () {\n\n      var low, high;\n\n      if ( this.littleEndian ) {\n\n        low = this.getUint32();\n        high = this.getUint32();\n\n      } else {\n\n        high = this.getUint32();\n        low = this.getUint32();\n\n      }\n\n      return high * 0x100000000 + low;\n\n    },\n\n    getFloat32: function () {\n\n      var value = this.dv.getFloat32( this.offset, this.littleEndian );\n      this.offset += 4;\n      return value;\n\n    },\n\n    getFloat32Array: function ( size ) {\n\n      var a = [];\n\n      for ( var i = 0; i < size; i ++ ) {\n\n        a.push( this.getFloat32() );\n\n      }\n\n      return a;\n\n    },\n\n    getFloat64: function () {\n\n      var value = this.dv.getFloat64( this.offset, this.littleEndian );\n      this.offset += 8;\n      return value;\n\n    },\n\n    getFloat64Array: function ( size ) {\n\n      var a = [];\n\n      for ( var i = 0; i < size; i ++ ) {\n\n        a.push( this.getFloat64() );\n\n      }\n\n      return a;\n\n    },\n\n    getArrayBuffer: function ( size ) {\n\n      var value = this.dv.buffer.slice( this.offset, this.offset + size );\n      this.offset += size;\n      return value;\n\n    },\n\n    getString: function ( size ) {\n\n      var a = new Uint8Array( size );\n\n      for ( var i = 0; i < size; i ++ ) {\n\n        a[ i ] = this.getUint8();\n\n      }\n\n      var nullByte = a.indexOf( 0 );\n      if ( nullByte >= 0 ) a = a.slice( 0, nullByte );\n\n      return THREE.LoaderUtils.decodeText( a );\n\n    }\n\n  } );\n\n  // FBXTree holds a representation of the FBX data, returned by the TextParser ( FBX ASCII format)\n  // and BinaryParser( FBX Binary format)\n  function FBXTree() {}\n\n  Object.assign( FBXTree.prototype, {\n\n    add: function ( key, val ) {\n\n      this[ key ] = val;\n\n    },\n\n  } );\n\n  function isFbxFormatBinary( buffer ) {\n\n    var CORRECT = 'Kaydara FBX Binary  \\0';\n\n    return buffer.byteLength >= CORRECT.length && CORRECT === convertArrayBufferToString( buffer, 0, CORRECT.length );\n\n  }\n\n  function isFbxFormatASCII( text ) {\n\n    var CORRECT = [ 'K', 'a', 'y', 'd', 'a', 'r', 'a', '\\\\', 'F', 'B', 'X', '\\\\', 'B', 'i', 'n', 'a', 'r', 'y', '\\\\', '\\\\' ];\n\n    var cursor = 0;\n\n    function read( offset ) {\n\n      var result = text[ offset - 1 ];\n      text = text.slice( cursor + offset );\n      cursor ++;\n      return result;\n\n    }\n\n    for ( var i = 0; i < CORRECT.length; ++ i ) {\n\n      var num = read( 1 );\n      if ( num === CORRECT[ i ] ) {\n\n        return false;\n\n      }\n\n    }\n\n    return true;\n\n  }\n\n  function getFbxVersion( text ) {\n\n    var versionRegExp = /FBXVersion: (\\d+)/;\n    var match = text.match( versionRegExp );\n    if ( match ) {\n\n      var version = parseInt( match[ 1 ] );\n      return version;\n\n    }\n    throw new Error( 'THREE.FBXLoader: Cannot find the version number for the file given.' );\n\n  }\n\n  // Converts FBX ticks into real time seconds.\n  function convertFBXTimeToSeconds( time ) {\n\n    return time / 46186158000;\n\n  }\n\n\n  // Parses comma separated list of numbers and returns them an array.\n  // Used internally by the TextParser\n  function parseNumberArray( value ) {\n\n    var array = value.split( ',' ).map( function ( val ) {\n\n      return parseFloat( val );\n\n    } );\n\n    return array;\n\n  }\n\n  function convertArrayBufferToString( buffer, from, to ) {\n\n    if ( from === undefined ) from = 0;\n    if ( to === undefined ) to = buffer.byteLength;\n\n    return THREE.LoaderUtils.decodeText( new Uint8Array( buffer, from, to ) );\n\n  }\n\n  function append( a, b ) {\n\n    for ( var i = 0, j = a.length, l = b.length; i < l; i ++, j ++ ) {\n\n      a[ j ] = b[ i ];\n\n    }\n\n  }\n\n  function slice( a, b, from, to ) {\n\n    for ( var i = from, j = 0; i < to; i ++, j ++ ) {\n\n      a[ j ] = b[ i ];\n\n    }\n\n    return a;\n\n  }\n\n} )();\n","const LoopMode = {\n  once: THREE.LoopOnce,\n  repeat: THREE.LoopRepeat,\n  pingpong: THREE.LoopPingPong\n};\n\n/**\n * animation-mixer\n *\n * Player for animation clips. Intended to be compatible with any model format that supports\n * skeletal or morph animations through THREE.AnimationMixer.\n * See: https://threejs.org/docs/?q=animation#Reference/Animation/AnimationMixer\n */\nAFRAME.registerComponent('animation-mixer', {\n  schema: {\n    clip:  {default: '*'},\n    duration: {default: 0},\n    crossFadeDuration: {default: 0},\n    loop: {default: 'repeat', oneOf: Object.keys(LoopMode)},\n    repetitions: {default: Infinity, min: 0}\n  },\n\n  init: function () {\n    /** @type {THREE.Mesh} */\n    this.model = null;\n    /** @type {THREE.AnimationMixer} */\n    this.mixer = null;\n    /** @type {Array<THREE.AnimationAction>} */\n    this.activeActions = [];\n\n    const model = this.el.getObject3D('mesh');\n\n    if (model) {\n      this.load(model);\n    } else {\n      this.el.addEventListener('model-loaded', (e) => {\n        this.load(e.detail.model);\n      });\n    }\n  },\n\n  load: function (model) {\n    const el = this.el;\n    this.model = model;\n    this.mixer = new THREE.AnimationMixer(model);\n    this.mixer.addEventListener('loop', (e) => {\n      el.emit('animation-loop', {action: e.action, loopDelta: e.loopDelta});\n    });\n    this.mixer.addEventListener('finished', (e) => {\n      el.emit('animation-finished', {action: e.action, direction: e.direction});\n    });\n    if (this.data.clip) this.update({});\n  },\n\n  remove: function () {\n    if (this.mixer) this.mixer.stopAllAction();\n  },\n\n  update: function (previousData) {\n    if (!previousData) return;\n\n    this.stopAction();\n\n    if (this.data.clip) {\n      this.playAction();\n    }\n  },\n\n  stopAction: function () {\n    const data = this.data;\n    for (let i = 0; i < this.activeActions.length; i++) {\n      data.crossFadeDuration\n        ? this.activeActions[i].fadeOut(data.crossFadeDuration)\n        : this.activeActions[i].stop();\n    }\n    this.activeActions.length = 0;\n  },\n\n  playAction: function () {\n    if (!this.mixer) return;\n\n    const model = this.model,\n        data = this.data,\n        clips = model.animations || (model.geometry || {}).animations || [];\n\n    if (!clips.length) return;\n\n    const re = wildcardToRegExp(data.clip);\n\n    for (let clip, i = 0; (clip = clips[i]); i++) {\n      if (clip.name.match(re)) {\n        const action = this.mixer.clipAction(clip, model);\n        action.enabled = true;\n        if (data.duration) action.setDuration(data.duration);\n        action\n          .setLoop(LoopMode[data.loop], data.repetitions)\n          .fadeIn(data.crossFadeDuration)\n          .play();\n        this.activeActions.push(action);\n      }\n    }\n  },\n\n  tick: function (t, dt) {\n    if (this.mixer && !isNaN(dt)) this.mixer.update(dt / 1000);\n  }\n});\n\n/**\n * Creates a RegExp from the given string, converting asterisks to .* expressions,\n * and escaping all other characters.\n */\nfunction wildcardToRegExp (s) {\n  return new RegExp('^' + s.split(/\\*+/).map(regExpEscape).join('.*') + '$');\n}\n\n/**\n * RegExp-escapes all characters in the given string.\n */\nfunction regExpEscape (s) {\n  return s.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&');\n}\n","AFRAME.registerComponent('rounded', {\n  schema: {\n    enabled: {default: true},\n    width: {type: 'number', default: 1},\n    height: {type: 'number', default: 1},\n    radius: {type: 'number', default: 0.3},\n    topLeftRadius: {type: 'number', default: -1},\n    topRightRadius: {type: 'number', default: -1},\n    bottomLeftRadius: {type: 'number', default: -1},\n    bottomRightRadius: {type: 'number', default: -1},\n    color: {type: 'color', default: \"#F0F0F0\"},\n    opacity: {type: 'number', default: 1}\n  },\n  init: function () {\n    this.rounded = new THREE.Mesh( this.draw(), new THREE.MeshPhongMaterial( { color: new THREE.Color(this.data.color), side: THREE.DoubleSide } ) );\n    this.updateOpacity();\n    this.el.setObject3D('mesh', this.rounded)\n  },\n  update: function () {\n    if (this.data.enabled) {\n      if (this.rounded) {\n        this.rounded.visible = true;\n        this.rounded.geometry = this.draw();\n        this.rounded.material.color = new THREE.Color(this.data.color);\n        this.updateOpacity();\n      }\n    } else {\n      this.rounded.visible = false;\n    }\n  },\n  updateOpacity: function() {\n    if (this.data.opacity < 0) { this.data.opacity = 0; }\n    if (this.data.opacity > 1) { this.data.opacity = 1; }\n    if (this.data.opacity < 1) {\n      this.rounded.material.transparent = true;\n    } else {\n      this.rounded.material.transparent = false;\n    }\n    this.rounded.material.opacity = this.data.opacity;\n  },\n  tick: function () {},\n  remove: function () {\n    if (!this.rounded) { return; }\n    this.el.object3D.remove( this.rounded );\n    this.rounded = null;\n  },\n  draw: function() {\n    var roundedRectShape = new THREE.Shape();\n    function roundedRect( ctx, x, y, width, height, topLeftRadius, topRightRadius, bottomLeftRadius, bottomRightRadius ) {\n      if (!topLeftRadius) { topLeftRadius = 0.00001; }\n      if (!topRightRadius) { topRightRadius = 0.00001; }\n      if (!bottomLeftRadius) { bottomLeftRadius = 0.00001; }\n      if (!bottomRightRadius) { bottomRightRadius = 0.00001; }\n      ctx.moveTo( x, y + topLeftRadius );\n      ctx.lineTo( x, y + height - topLeftRadius );\n      ctx.quadraticCurveTo( x, y + height, x + topLeftRadius, y + height );\n      ctx.lineTo( x + width - topRightRadius, y + height );\n      ctx.quadraticCurveTo( x + width, y + height, x + width, y + height - topRightRadius );\n      ctx.lineTo( x + width, y + bottomRightRadius );\n      ctx.quadraticCurveTo( x + width, y, x + width - bottomRightRadius, y );\n      ctx.lineTo( x + bottomLeftRadius, y );\n      ctx.quadraticCurveTo( x, y, x, y + bottomLeftRadius );\n    }\n\n    var corners = [this.data.radius, this.data.radius, this.data.radius, this.data.radius];\n    if (this.data.topLeftRadius != -1) { corners[0] = this.data.topLeftRadius; }\n    if (this.data.topRightRadius != -1) { corners[1] = this.data.topRightRadius; }\n    if (this.data.bottomLeftRadius != -1) { corners[2] = this.data.bottomLeftRadius; }\n    if (this.data.bottomRightRadius != -1) { corners[3] = this.data.bottomRightRadius; }\n\n    roundedRect( roundedRectShape, 0, 0, this.data.width, this.data.height, corners[0], corners[1], corners[2], corners[3] );\n    return new THREE.ShapeBufferGeometry( roundedRectShape );\n  },\n  pause: function () {},\n  play: function () {}\n});\n\nAFRAME.registerPrimitive('a-rounded', {\n  defaultComponents: {\n    rounded: {}\n  },\n  mappings: {\n    enabled: 'rounded.enabled',\n    width: 'rounded.width',\n    height: 'rounded.height',\n    radius: 'rounded.radius',\n    'top-left-radius': 'rounded.topLeftRadius',\n    'top-right-radius': 'rounded.topRightRadius',\n    'bottom-left-radius': 'rounded.bottomLeftRadius',\n    'bottom-right-radius': 'rounded.bottomRightRadius',\n    color: 'rounded.color',\n    opacity: 'rounded.opacity'\n  }\n});\n"],"sourceRoot":""}